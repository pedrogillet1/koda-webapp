/* ============================================
   KODA CHAT UI - CHATGPT-QUALITY TYPOGRAPHY
   Updated to match UI_ISSUES_BREAKDOWN.md specs
   ============================================ */

/* ============================================
   1. CONTAINER - Max width 720px
   ============================================ */

.markdown-preview-container {
  font-family: 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  font-size: 16px;
  line-height: 1.5;
  color: #1a1a1a;
  max-width: 720px;
  padding: 0;
  background: transparent;
}

/* ============================================
   2. TYPOGRAPHY - Font Sizes & Weights
   ============================================ */

/* Answer title (h2) - 22px, bold (600 weight) */
.markdown-h2 {
  font-size: 22px !important;
  font-weight: 600 !important;
  line-height: 1.3 !important;
  color: #1a1a1a !important;
  margin: 0 0 0.5em 0 !important;
  padding: 0 !important;
  font-family: 'Plus Jakarta Sans', sans-serif !important;
}

/* First h2 should have no top margin */
.markdown-preview-container > h2:first-child,
.markdown-preview-container > .markdown-h2:first-child {
  margin-top: 0 !important;
}

/* Section headings (h3) - 18px, bold (700 weight), darker color */
.markdown-h3 {
  font-size: 18px !important;
  font-weight: 700 !important;
  line-height: 1.4 !important;
  color: #1a1a1a !important;
  margin: 1.5em 0 0.6em 0 !important;
  padding: 0 !important;
  letter-spacing: 0.02em !important;
  font-family: 'Plus Jakarta Sans', sans-serif !important;
}

/* First h3 has smaller top margin */
.markdown-preview-container > h3:first-child,
.markdown-preview-container > .markdown-h3:first-child {
  margin-top: 0.5em !important;
}

/* Body text / paragraphs - 16px, normal weight */
.markdown-paragraph {
  font-size: 16px !important;
  font-weight: 400 !important;
  line-height: 1.5 !important;
  color: #1a1a1a !important;
  margin: 0 0 0.7em 0 !important;
  padding: 0 !important;
  font-family: 'Plus Jakarta Sans', sans-serif !important;
}

/* Remove margin from last paragraph */
.markdown-paragraph:last-child {
  margin-bottom: 0 !important;
}

/* Sub-headings (bold/strong) - 17px, bold (600 weight) */
.markdown-preview-container strong,
.markdown-preview-container b {
  font-weight: 600 !important;
  font-size: 17px !important;
  color: #2a2a2a !important;
}

/* Meta text (code) - for filenames, paths */
.markdown-inline-code {
  font-size: 14px !important;
  font-weight: 400 !important;
  color: #374151 !important;
  background-color: #f3f4f6 !important;
  padding: 2px 6px !important;
  border-radius: 4px !important;
  border: 1px solid #e5e7eb !important;
  font-family: 'Monaco', 'Menlo', 'Courier New', monospace !important;
}

/* ============================================
   3. LISTS - Reduced spacing (0.35em between items)
   ============================================ */

/* Bullet lists */
.markdown-ul {
  margin: 0.6em 0 0.6em 0 !important;
  padding-left: 1.5em !important;
  list-style-type: disc !important;
  font-family: 'Plus Jakarta Sans', sans-serif !important;
}

/* List items - 16px, reduced margin (0.35em â‰ˆ 6px) */
.markdown-ul li {
  margin: 0 0 0.35em 0 !important;
  padding: 0 !important;
  line-height: 1.5 !important;
  color: #1a1a1a !important;
  font-size: 16px !important;
}

/* Last list item has no margin */
.markdown-ul li:last-child {
  margin-bottom: 0 !important;
}

/* Bullet style */
.markdown-ul li::marker {
  color: #1a1a1a;
}

/* Ordered lists */
.markdown-ol {
  margin: 0.6em 0 0.6em 0 !important;
  padding-left: 1.5em !important;
  list-style-type: decimal !important;
  font-family: 'Plus Jakarta Sans', sans-serif !important;
}

.markdown-ol li {
  margin: 0 0 0.35em 0 !important;
  padding: 0 !important;
  line-height: 1.5 !important;
  color: #1a1a1a !important;
  font-size: 16px !important;
}

.markdown-ol li:last-child {
  margin-bottom: 0 !important;
}

/* Nested lists */
.markdown-ul ul,
.markdown-ol ul,
.markdown-ul ol,
.markdown-ol ol {
  margin: 0.3em 0 0 0 !important;
  padding-left: 1.5em !important;
}

/* Fix for nested paragraphs in list items (prevents double spacing) */
.markdown-ul li > p,
.markdown-ol li > p {
  margin: 0 !important;
}

/* ============================================
   4. SECTION SPACING
   ============================================ */

/* Space after list before next section */
.markdown-ul + .markdown-h3,
.markdown-ol + .markdown-h3 {
  margin-top: 1.5em !important;
}

/* Space after paragraph before heading */
.markdown-paragraph + .markdown-h3 {
  margin-top: 1.5em !important;
}

/* Space after heading before content */
.markdown-h3 + .markdown-ul,
.markdown-h3 + .markdown-ol,
.markdown-h3 + .markdown-paragraph {
  margin-top: 0.5em !important;
}

/* Space between consecutive paragraphs */
.markdown-paragraph + .markdown-paragraph {
  margin-top: 0.7em !important;
}

/* ============================================
   5. TABLES - Professional styling
   ============================================ */

.markdown-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 15px;
  background: white;
  font-family: 'Plus Jakarta Sans', sans-serif !important;
  margin: 1em 0 !important;
  border-radius: 8px;
  overflow: hidden;
  border: 1px solid #e5e7eb;
}

.markdown-table thead {
  background: #000000 !important;
  color: white !important;
}

.markdown-table thead th {
  padding: 12px 16px !important;
  text-align: left !important;
  font-weight: 600 !important;
  font-size: 15px !important;
  color: white !important;
  border: none !important;
}

.markdown-table tbody tr {
  border-bottom: 1px solid #e5e7eb !important;
}

.markdown-table tbody tr:nth-child(even) {
  background-color: #f9fafb !important;
}

.markdown-table tbody tr:hover {
  background-color: #f3f4f6 !important;
}

.markdown-table tbody td {
  padding: 10px 16px !important;
  color: #1a1a1a !important;
  border: none !important;
  font-size: 15px !important;
}

/* ============================================
   6. LINKS
   ============================================ */

.markdown-link {
  color: #3b82f6 !important;
  text-decoration: none !important;
  border-bottom: 1px solid #93c5fd !important;
  transition: all 0.2s ease !important;
  font-weight: 500 !important;
}

.markdown-link:hover {
  color: #2563eb !important;
  border-bottom-color: #3b82f6 !important;
}

/* ============================================
   7. BLOCKQUOTES
   ============================================ */

.markdown-blockquote {
  border-left: 3px solid #e0e0e0 !important;
  background-color: transparent !important;
  padding: 0 0 0 16px !important;
  margin: 0.8em 0 !important;
  color: #666666 !important;
  font-style: normal !important;
  font-family: 'Plus Jakarta Sans', sans-serif !important;
}

.markdown-blockquote p {
  margin: 0 !important;
  color: #666666 !important;
}

/* ============================================
   8. CODE BLOCKS
   ============================================ */

.markdown-code-block {
  display: block !important;
  background-color: #f5f5f5 !important;
  color: #374151 !important;
  padding: 12px !important;
  border-radius: 6px !important;
  font-family: 'Monaco', 'Menlo', 'Courier New', monospace !important;
  font-size: 14px !important;
  overflow-x: auto !important;
  margin: 0.8em 0 !important;
}

/* ============================================
   9. IMAGES
   ============================================ */

.markdown-image {
  max-width: 100% !important;
  height: auto !important;
  border-radius: 8px !important;
  margin: 1em 0 !important;
}

/* ============================================
   10. HORIZONTAL RULE - Hidden
   ============================================ */

.markdown-hr {
  display: none !important;
}

/* ============================================
   11. RESPONSIVE DESIGN
   ============================================ */

@media (max-width: 768px) {
  .markdown-preview-container {
    font-size: 16px;
    max-width: 100%;
  }

  .markdown-h2 {
    font-size: 20px !important;
  }

  .markdown-h3 {
    font-size: 17px !important;
  }

  .markdown-table {
    font-size: 14px;
  }

  .markdown-table thead th,
  .markdown-table tbody td {
    padding: 8px 12px !important;
  }
}

/* ============================================
   12. PRINT STYLES
   ============================================ */

@media print {
  .markdown-preview-container {
    padding: 0;
    background: white;
  }

  .markdown-h2 {
    page-break-after: avoid;
  }

  .markdown-table {
    page-break-inside: avoid;
  }

  .markdown-link {
    color: #000 !important;
    text-decoration: underline !important;
  }
}

/* ============================================
   13. ACCESSIBILITY
   ============================================ */

.markdown-preview-container *:focus {
  outline: 2px solid #3b82f6;
  outline-offset: 2px;
}

/* Selection styling */
.markdown-preview-container ::selection {
  background: #dbeafe;
  color: #1e40af;
}

/* ============================================
   14. STREAMING CURSOR
   ============================================ */

.markdown-preview-container.streaming .cursor {
  display: inline-block;
  animation: blink 1s step-end infinite;
  margin-left: 2px;
  color: #6366F1;
  font-weight: 400;
}

@keyframes blink {
  0%, 50% { opacity: 1; }
  51%, 100% { opacity: 0; }
}

/* ============================================
   15. MESSAGE CARD LAYOUT FIXES
   ============================================ */

/* Bot message row - avatar aligned with card top */
.assistant-message {
  display: flex;
  align-items: flex-start !important;
  gap: 12px;
}

/* Bot message card - full width, proper padding */
.assistant-message-card {
  flex: 1;
  width: 100%;
  max-width: 720px;
  padding: 24px 28px;
  background: white;
  border-radius: 16px;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
}

/* ============================================
   TYPOGRAPHY SUMMARY (ChatGPT Quality):
   - Base font: 16px (was 14px) +14%
   - Answer title (h2): 22px (was 16px) +38%
   - Section headings (h3): 18px, bold (was 12px) +50%
   - Sub-headings (strong): 17px (was default)
   - Line-height: 1.5 (consistent)
   - Paragraph margin: 0.7em (~11px) (was 0 or 8px)
   - List item margin: 0.35em (~6px) (was 0)
   - Section heading margins: 1.5em top, 0.6em bottom
   - Colors: #1a1a1a (darker, not washed out grey)
   ============================================ */
