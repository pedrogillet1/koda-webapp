
> backend@1.0.0 dev
> nodemon --exec ts-node --transpile-only src/server.ts

[33m[nodemon] 3.1.10[39m
[33m[nodemon] to restart at any time, enter `rs`[39m
[33m[nodemon] watching path(s): *.*[39m
[33m[nodemon] watching extensions: ts,json[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ GCS initialized
Warning: Please use the `legacy` build in Node.js environments.
[dotenv@17.2.3] injecting env (0) from .env -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops
[dotenv@17.2.3] injecting env (0) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
Error: listen EADDRINUSE: address already in use :::5000
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at Server.listen (node:net:2102:7)
    at Object.<anonymous> (C:\Users\Pedro\Desktop\webapp\backend\src\server.ts:250:12)
    at Module._compile (node:internal/modules/cjs/loader:1706:14)
    at Module.m._compile (C:\Users\Pedro\Desktop\webapp\backend\node_modules\ts-node\src\index.ts:1618:23)
    at node:internal/modules/cjs/loader:1839:10
    at Object.require.extensions.<computed> [as .ts] (C:\Users\Pedro\Desktop\webapp\backend\node_modules\ts-node\src\index.ts:1621:12)
    at Module.load (node:internal/modules/cjs/loader:1441:32)
    at Function._load (node:internal/modules/cjs/loader:1263:12)
    at TracingChannel.traceSync (node:diagnostics_channel:322:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:237:24)
    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:171:5)
    at phase4 (C:\Users\Pedro\Desktop\webapp\backend\node_modules\ts-node\src\bin.ts:649:14)
    at bootstrap (C:\Users\Pedro\Desktop\webapp\backend\node_modules\ts-node\src\bin.ts:95:10)
    at main (C:\Users\Pedro\Desktop\webapp\backend\node_modules\ts-node\src\bin.ts:55:10) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '::',
  port: 5000
}
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ GCS initialized
Warning: Please use the `legacy` build in Node.js environments.
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit
[dotenv@17.2.3] injecting env (0) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
Error: listen EADDRINUSE: address already in use :::5000
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at Server.listen (node:net:2102:7)
    at Object.<anonymous> (C:\Users\Pedro\Desktop\webapp\backend\src\server.ts:250:12)
    at Module._compile (node:internal/modules/cjs/loader:1706:14)
    at Module.m._compile (C:\Users\Pedro\Desktop\webapp\backend\node_modules\ts-node\src\index.ts:1618:23)
    at node:internal/modules/cjs/loader:1839:10
    at Object.require.extensions.<computed> [as .ts] (C:\Users\Pedro\Desktop\webapp\backend\node_modules\ts-node\src\index.ts:1621:12)
    at Module.load (node:internal/modules/cjs/loader:1441:32)
    at Function._load (node:internal/modules/cjs/loader:1263:12)
    at TracingChannel.traceSync (node:diagnostics_channel:322:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:237:24)
    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:171:5)
    at phase4 (C:\Users\Pedro\Desktop\webapp\backend\node_modules\ts-node\src\bin.ts:649:14)
    at bootstrap (C:\Users\Pedro\Desktop\webapp\backend\node_modules\ts-node\src\bin.ts:95:10)
    at main (C:\Users\Pedro\Desktop\webapp\backend\node_modules\ts-node\src\bin.ts:55:10) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '::',
  port: 5000
}
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ GCS initialized
Warning: Please use the `legacy` build in Node.js environments.
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops
[dotenv@17.2.3] injecting env (0) from .env -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
Error: listen EADDRINUSE: address already in use :::5000
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at Server.listen (node:net:2102:7)
    at Object.<anonymous> (C:\Users\Pedro\Desktop\webapp\backend\src\server.ts:250:12)
    at Module._compile (node:internal/modules/cjs/loader:1706:14)
    at Module.m._compile (C:\Users\Pedro\Desktop\webapp\backend\node_modules\ts-node\src\index.ts:1618:23)
    at node:internal/modules/cjs/loader:1839:10
    at Object.require.extensions.<computed> [as .ts] (C:\Users\Pedro\Desktop\webapp\backend\node_modules\ts-node\src\index.ts:1621:12)
    at Module.load (node:internal/modules/cjs/loader:1441:32)
    at Function._load (node:internal/modules/cjs/loader:1263:12)
    at TracingChannel.traceSync (node:diagnostics_channel:322:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:237:24)
    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:171:5)
    at phase4 (C:\Users\Pedro\Desktop\webapp\backend\node_modules\ts-node\src\bin.ts:649:14)
    at bootstrap (C:\Users\Pedro\Desktop\webapp\backend\node_modules\ts-node\src\bin.ts:95:10)
    at main (C:\Users\Pedro\Desktop\webapp\backend\node_modules\ts-node\src\bin.ts:55:10) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '::',
  port: 5000
}
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ GCS initialized
Warning: Please use the `legacy` build in Node.js environments.
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
Error: listen EADDRINUSE: address already in use :::5000
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at Server.listen (node:net:2102:7)
    at Object.<anonymous> (C:\Users\Pedro\Desktop\webapp\backend\src\server.ts:250:12)
    at Module._compile (node:internal/modules/cjs/loader:1706:14)
    at Module.m._compile (C:\Users\Pedro\Desktop\webapp\backend\node_modules\ts-node\src\index.ts:1618:23)
    at node:internal/modules/cjs/loader:1839:10
    at Object.require.extensions.<computed> [as .ts] (C:\Users\Pedro\Desktop\webapp\backend\node_modules\ts-node\src\index.ts:1621:12)
    at Module.load (node:internal/modules/cjs/loader:1441:32)
    at Function._load (node:internal/modules/cjs/loader:1263:12)
    at TracingChannel.traceSync (node:diagnostics_channel:322:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:237:24)
    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:171:5)
    at phase4 (C:\Users\Pedro\Desktop\webapp\backend\node_modules\ts-node\src\bin.ts:649:14)
    at bootstrap (C:\Users\Pedro\Desktop\webapp\backend\node_modules\ts-node\src\bin.ts:95:10)
    at main (C:\Users\Pedro\Desktop\webapp\backend\node_modules\ts-node\src\bin.ts:55:10) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '::',
  port: 5000
}
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ GCS initialized
Warning: Please use the `legacy` build in Node.js environments.
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîë add access controls to secrets: https://dotenvx.com/ops
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
Error: listen EADDRINUSE: address already in use :::5000
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at Server.listen (node:net:2102:7)
    at Object.<anonymous> (C:\Users\Pedro\Desktop\webapp\backend\src\server.ts:250:12)
    at Module._compile (node:internal/modules/cjs/loader:1706:14)
    at Module.m._compile (C:\Users\Pedro\Desktop\webapp\backend\node_modules\ts-node\src\index.ts:1618:23)
    at node:internal/modules/cjs/loader:1839:10
    at Object.require.extensions.<computed> [as .ts] (C:\Users\Pedro\Desktop\webapp\backend\node_modules\ts-node\src\index.ts:1621:12)
    at Module.load (node:internal/modules/cjs/loader:1441:32)
    at Function._load (node:internal/modules/cjs/loader:1263:12)
    at TracingChannel.traceSync (node:diagnostics_channel:322:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:237:24)
    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:171:5)
    at phase4 (C:\Users\Pedro\Desktop\webapp\backend\node_modules\ts-node\src\bin.ts:649:14)
    at bootstrap (C:\Users\Pedro\Desktop\webapp\backend\node_modules\ts-node\src\bin.ts:95:10)
    at main (C:\Users\Pedro\Desktop\webapp\backend\node_modules\ts-node\src\bin.ts:55:10) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '::',
  port: 5000
}
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ GCS initialized
Warning: Please use the `legacy` build in Node.js environments.
ReferenceError: DOMMatrix is not defined
    at webpack://pdf.js/src/display/canvas.js:63:22
    at ModuleJobSync.runSync (node:internal/modules/esm/module_job:458:37)
    at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:433:47)
    at loadESMFromCJS (node:internal/modules/cjs/loader:1537:24)
    at Module._compile (node:internal/modules/cjs/loader:1688:5)
    at node:internal/modules/cjs/loader:1839:10
    at Object.require.extensions.<computed> [as .js] (C:\Users\Pedro\Desktop\webapp\backend\node_modules\ts-node\src\index.ts:1608:43)
    at Module.load (node:internal/modules/cjs/loader:1441:32)
    at Function._load (node:internal/modules/cjs/loader:1263:12)
    at TracingChannel.traceSync (node:diagnostics_channel:322:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:237:24)
    at Module.require (node:internal/modules/cjs/loader:1463:12)
    at require (node:internal/modules/helpers:147:16)
    at Object.<anonymous> (C:\Users\Pedro\Desktop\webapp\backend\src\services\thumbnail.service.ts:7:1)
    at Module._compile (node:internal/modules/cjs/loader:1706:14)
    at Module.m._compile (C:\Users\Pedro\Desktop\webapp\backend\node_modules\ts-node\src\index.ts:1618:23)
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ GCS initialized
Warning: Please use the `legacy` build in Node.js environments.
ReferenceError: DOMMatrix is not defined
    at webpack://pdf.js/src/display/canvas.js:63:22
    at ModuleJobSync.runSync (node:internal/modules/esm/module_job:458:37)
    at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:433:47)
    at loadESMFromCJS (node:internal/modules/cjs/loader:1537:24)
    at Module._compile (node:internal/modules/cjs/loader:1688:5)
    at node:internal/modules/cjs/loader:1839:10
    at Object.require.extensions.<computed> [as .js] (C:\Users\Pedro\Desktop\webapp\backend\node_modules\ts-node\src\index.ts:1608:43)
    at Module.load (node:internal/modules/cjs/loader:1441:32)
    at Function._load (node:internal/modules/cjs/loader:1263:12)
    at TracingChannel.traceSync (node:diagnostics_channel:322:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:237:24)
    at Module.require (node:internal/modules/cjs/loader:1463:12)
    at require (node:internal/modules/helpers:147:16)
    at Object.<anonymous> (C:\Users\Pedro\Desktop\webapp\backend\src\services\thumbnail.service.ts:7:1)
    at Module._compile (node:internal/modules/cjs/loader:1706:14)
    at Module.m._compile (C:\Users\Pedro\Desktop\webapp\backend\node_modules\ts-node\src\index.ts:1618:23)
[31m[nodemon] app crashed - waiting for file changes before starting...[39m

> backend@1.0.0 dev
> nodemon --exec ts-node --transpile-only src/server.ts

[33m[nodemon] 3.1.10[39m
[33m[nodemon] to restart at any time, enter `rs`[39m
[33m[nodemon] watching path(s): *.*[39m
[33m[nodemon] watching extensions: ts,json[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ GCS initialized
Warning: Please use the `legacy` build in Node.js environments.
ReferenceError: DOMMatrix is not defined
    at webpack://pdf.js/src/display/canvas.js:63:22
    at ModuleJobSync.runSync (node:internal/modules/esm/module_job:458:37)
    at ModuleLoader.importSyncForRequire (node:internal/modules/esm/loader:433:47)
    at loadESMFromCJS (node:internal/modules/cjs/loader:1537:24)
    at Module._compile (node:internal/modules/cjs/loader:1688:5)
    at node:internal/modules/cjs/loader:1839:10
    at Object.require.extensions.<computed> [as .js] (C:\Users\Pedro\Desktop\webapp\backend\node_modules\ts-node\src\index.ts:1608:43)
    at Module.load (node:internal/modules/cjs/loader:1441:32)
    at Function._load (node:internal/modules/cjs/loader:1263:12)
    at TracingChannel.traceSync (node:diagnostics_channel:322:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:237:24)
    at Module.require (node:internal/modules/cjs/loader:1463:12)
    at require (node:internal/modules/helpers:147:16)
    at Object.<anonymous> (C:\Users\Pedro\Desktop\webapp\backend\src\services\thumbnail.service.ts:7:1)
    at Module._compile (node:internal/modules/cjs/loader:1706:14)
    at Module.m._compile (C:\Users\Pedro\Desktop\webapp\backend\node_modules\ts-node\src\index.ts:1618:23)
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ GCS initialized
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
üöÄ Server is running on http://localhost:5000
üìù Environment: development
üîó Health check: http://localhost:5000/health
‚öôÔ∏è  Background workers initialized
üîå WebSocket server ready
‚ö†Ô∏è  HTTP mode - SSL/HTTPS not enabled (development only)
‚úÖ Reminder scheduler started (runs every hour)
üîÑ Starting background document processor (polling every 30s)
‚úÖ System roles initialized
‚úÖ Cache service connected to Redis
‚úÖ Redis connected
üîå Client connected: KlqAC9KDkgYgMvk9AAAB (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ GCS initialized
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
üöÄ Server is running on http://localhost:5000
üìù Environment: development
üîó Health check: http://localhost:5000/health
‚öôÔ∏è  Background workers initialized
üîå WebSocket server ready
‚ö†Ô∏è  HTTP mode - SSL/HTTPS not enabled (development only)
‚úÖ Reminder scheduler started (runs every hour)
üîÑ Starting background document processor (polling every 30s)
‚úÖ System roles initialized
‚úÖ Redis connected
‚úÖ Cache service connected to Redis
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
üîå Client connected: kQx6P503O5lt7JiVAAAB (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
üîç CORS Check - Origin: undefined, isNgrokDomain: undefined, allowed: true
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
üîç CORS Check - Origin: undefined, isNgrokDomain: undefined, allowed: true
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT 1
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE "public"."folders"."userId" = $1 ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: true)
üí¨ Left conversation: 32ae1099-0057-4e81-bab9-bffadeaa8b46
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE "public"."folders"."userId" = $1 ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: true)
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1) OFFSET $2
prisma:query SELECT "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt" FROM "public"."tags" WHERE "public"."tags"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1) OFFSET $2

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 0e6bc9e7-531e-44de-b0c3-cbaf2dcefa3f
   filename: "Montana-Rocking-CC-Sanctuary.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/2e9d32c7-9b7d-4e1c-9906-5dc29e2a3531-1762553874542"
   mimeType: "application/pdf"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1) OFFSET $2
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt" FROM "public"."tags" WHERE "public"."tags"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1) OFFSET $2
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1) OFFSET $2

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 0e6bc9e7-531e-44de-b0c3-cbaf2dcefa3f
   filename: "Montana-Rocking-CC-Sanctuary.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/2e9d32c7-9b7d-4e1c-9906-5dc29e2a3531-1762553874542"
   mimeType: "application/pdf"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt" FROM "public"."tags" WHERE "public"."tags"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
üîå Client disconnected: kQx6P503O5lt7JiVAAAB
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1) OFFSET $2

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 0e6bc9e7-531e-44de-b0c3-cbaf2dcefa3f
   filename: "Montana-Rocking-CC-Sanctuary.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/2e9d32c7-9b7d-4e1c-9906-5dc29e2a3531-1762553874542"
   mimeType: "application/pdf"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1) OFFSET $2
prisma:query SELECT "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt" FROM "public"."tags" WHERE "public"."tags"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1) OFFSET $2

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 0e6bc9e7-531e-44de-b0c3-cbaf2dcefa3f
   filename: "Montana-Rocking-CC-Sanctuary.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/2e9d32c7-9b7d-4e1c-9906-5dc29e2a3531-1762553874542"
   mimeType: "application/pdf"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
üîç CORS Check - Origin: http://localhost:3000, isNgrokDomain: false, allowed: true
üîç CORS Check - Origin: http://localhost:3000, isNgrokDomain: false, allowed: true
üîç CORS Check - Origin: http://localhost:3000, isNgrokDomain: false, allowed: true
üîç CORS Check - Origin: http://localhost:3000, isNgrokDomain: false, allowed: true
üîç CORS Check - Origin: http://localhost:3000, isNgrokDomain: false, allowed: true
üîç CORS Check - Origin: http://localhost:3000, isNgrokDomain: false, allowed: true
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
üîç CORS Check - Origin: undefined, isNgrokDomain: undefined, allowed: true
üîç CORS Check - Origin: undefined, isNgrokDomain: undefined, allowed: true
üîê Google OAuth login: 123hackerabc@gmail.com
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."firstName", "public"."users"."lastName", "public"."users"."profileImage", "public"."users"."passwordHash", "public"."users"."salt", "public"."users"."googleId", "public"."users"."appleId", "public"."users"."phoneNumber", "public"."users"."isEmailVerified", "public"."users"."isPhoneVerified", "public"."users"."subscriptionTier", "public"."users"."role", "public"."users"."storageUsedBytes", "public"."users"."createdAt", "public"."users"."updatedAt" FROM "public"."users" WHERE ("public"."users"."email" = $1 AND 1=1) LIMIT $2 OFFSET $3
‚úÖ Existing user found: c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query INSERT INTO "public"."sessions" ("id","userId","refreshTokenHash","expiresAt","createdAt","lastActivityAt","isActive","isSuspicious") VALUES ($1,$2,$3,$4,$5,$6,$7,$8) RETURNING "public"."sessions"."id", "public"."sessions"."userId", "public"."sessions"."refreshTokenHash", "public"."sessions"."expiresAt", "public"."sessions"."createdAt", "public"."sessions"."lastActivityAt", "public"."sessions"."ipAddress", "public"."sessions"."lastIpAddress", "public"."sessions"."userAgent", "public"."sessions"."deviceId", "public"."sessions"."deviceType", "public"."sessions"."deviceName", "public"."sessions"."isActive", "public"."sessions"."isSuspicious", "public"."sessions"."suspicionReason", "public"."sessions"."country", "public"."sessions"."city"
‚úÖ OAuth session created for user: c4f8906d-fbc7-4445-8de3-28dcdc5615ae
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîå Client connected: vQ45dbr42z18yvv3AAAD (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."firstName", "public"."users"."lastName", "public"."users"."profileImage", "public"."users"."isEmailVerified", "public"."users"."phoneNumber", "public"."users"."isPhoneVerified" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE "public"."folders"."userId" = $1 ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: true)
prisma:query SELECT "public"."two_factor_auth"."id", "public"."two_factor_auth"."isEnabled", "public"."two_factor_auth"."userId" FROM "public"."two_factor_auth" WHERE "public"."two_factor_auth"."userId" IN ($1) OFFSET $2
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."firstName", "public"."users"."lastName", "public"."users"."profileImage", "public"."users"."isEmailVerified", "public"."users"."phoneNumber", "public"."users"."isPhoneVerified" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE "public"."folders"."userId" = $1 ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: true)
prisma:query SELECT "public"."two_factor_auth"."id", "public"."two_factor_auth"."isEnabled", "public"."two_factor_auth"."userId" FROM "public"."two_factor_auth" WHERE "public"."two_factor_auth"."userId" IN ($1) OFFSET $2
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1) OFFSET $2
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1) OFFSET $2
prisma:query SELECT "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt" FROM "public"."tags" WHERE "public"."tags"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
prisma:query SELECT "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt" FROM "public"."tags" WHERE "public"."tags"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1) OFFSET $2

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 0e6bc9e7-531e-44de-b0c3-cbaf2dcefa3f
   filename: "Montana-Rocking-CC-Sanctuary.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/2e9d32c7-9b7d-4e1c-9906-5dc29e2a3531-1762553874542"
   mimeType: "application/pdf"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1) OFFSET $2

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 0e6bc9e7-531e-44de-b0c3-cbaf2dcefa3f
   filename: "Montana-Rocking-CC-Sanctuary.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/2e9d32c7-9b7d-4e1c-9906-5dc29e2a3531-1762553874542"
   mimeType: "application/pdf"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE "public"."folders"."userId" = $1 ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: true)
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1) OFFSET $2
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt" FROM "public"."tags" WHERE "public"."tags"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1) OFFSET $2
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1) OFFSET $2

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 0e6bc9e7-531e-44de-b0c3-cbaf2dcefa3f
   filename: "Montana-Rocking-CC-Sanctuary.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/2e9d32c7-9b7d-4e1c-9906-5dc29e2a3531-1762553874542"
   mimeType: "application/pdf"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt" FROM "public"."tags" WHERE "public"."tags"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1) OFFSET $2
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1) OFFSET $2

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 0e6bc9e7-531e-44de-b0c3-cbaf2dcefa3f
   filename: "Montana-Rocking-CC-Sanctuary.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/2e9d32c7-9b7d-4e1c-9906-5dc29e2a3531-1762553874542"
   mimeType: "application/pdf"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt" FROM "public"."tags" WHERE "public"."tags"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîå Client connected: KRVgFGz0pHJEPJB6AAAF (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1) OFFSET $2

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 0e6bc9e7-531e-44de-b0c3-cbaf2dcefa3f
   filename: "Montana-Rocking-CC-Sanctuary.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/2e9d32c7-9b7d-4e1c-9906-5dc29e2a3531-1762553874542"
   mimeType: "application/pdf"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìã Fetching conversations for user: c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1) OFFSET $2
prisma:query SELECT "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt" FROM "public"."tags" WHERE "public"."tags"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."firstName", "public"."users"."lastName", "public"."users"."profileImage", "public"."users"."isEmailVerified", "public"."users"."phoneNumber", "public"."users"."isPhoneVerified" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."conversations"."id", "public"."conversations"."userId", "public"."conversations"."title", "public"."conversations"."createdAt", "public"."conversations"."updatedAt", "public"."conversations"."contextType", "public"."conversations"."contextId", "public"."conversations"."contextName", "public"."conversations"."contextMeta", COALESCE("aggr_selection_0_Message"."_aggr_count_messages", 0) AS "_aggr_count_messages" FROM "public"."conversations" LEFT JOIN (SELECT "public"."messages"."conversationId", COUNT(*) AS "_aggr_count_messages" FROM "public"."messages" WHERE 1=1 GROUP BY "public"."messages"."conversationId") AS "aggr_selection_0_Message" ON ("public"."conversations"."id" = "aggr_selection_0_Message"."conversationId") WHERE "public"."conversations"."userId" = $1 ORDER BY "public"."conversations"."updatedAt" DESC OFFSET $2
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1) OFFSET $2

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 0e6bc9e7-531e-44de-b0c3-cbaf2dcefa3f
   filename: "Montana-Rocking-CC-Sanctuary.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/2e9d32c7-9b7d-4e1c-9906-5dc29e2a3531-1762553874542"
   mimeType: "application/pdf"
prisma:query SELECT "public"."two_factor_auth"."id", "public"."two_factor_auth"."isEnabled", "public"."two_factor_auth"."userId" FROM "public"."two_factor_auth" WHERE "public"."two_factor_auth"."userId" IN ($1) OFFSET $2
prisma:query SELECT "public"."messages"."id", "public"."messages"."content", "public"."messages"."createdAt", "public"."messages"."conversationId" FROM "public"."messages" WHERE "public"."messages"."conversationId" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9) ORDER BY "public"."messages"."createdAt" DESC OFFSET $10
‚úÖ Found 9 conversations
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT 1
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE "public"."folders"."userId" = $1 ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: true)
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE "public"."folders"."userId" = $1 ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: true)
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1) OFFSET $2
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1) OFFSET $2
prisma:query SELECT "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt" FROM "public"."tags" WHERE "public"."tags"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
prisma:query SELECT "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt" FROM "public"."tags" WHERE "public"."tags"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1) OFFSET $2

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 0e6bc9e7-531e-44de-b0c3-cbaf2dcefa3f
   filename: "Montana-Rocking-CC-Sanctuary.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/2e9d32c7-9b7d-4e1c-9906-5dc29e2a3531-1762553874542"
   mimeType: "application/pdf"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1) OFFSET $2

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 0e6bc9e7-531e-44de-b0c3-cbaf2dcefa3f
   filename: "Montana-Rocking-CC-Sanctuary.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/2e9d32c7-9b7d-4e1c-9906-5dc29e2a3531-1762553874542"
   mimeType: "application/pdf"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1) OFFSET $2
prisma:query SELECT "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt" FROM "public"."tags" WHERE "public"."tags"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1) OFFSET $2

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 0e6bc9e7-531e-44de-b0c3-cbaf2dcefa3f
   filename: "Montana-Rocking-CC-Sanctuary.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/2e9d32c7-9b7d-4e1c-9906-5dc29e2a3531-1762553874542"
   mimeType: "application/pdf"
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1) OFFSET $2
üóëÔ∏è [Pinecone] Deleting all vectors for document: 0e6bc9e7-531e-44de-b0c3-cbaf2dcefa3f
prisma:query SELECT "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt" FROM "public"."tags" WHERE "public"."tags"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1) OFFSET $2

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 0e6bc9e7-531e-44de-b0c3-cbaf2dcefa3f
   filename: "Montana-Rocking-CC-Sanctuary.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/2e9d32c7-9b7d-4e1c-9906-5dc29e2a3531-1762553874542"
   mimeType: "application/pdf"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üîç [Pinecone] Found 4 vectors to delete
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1) OFFSET $2
prisma:query SELECT "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt" FROM "public"."tags" WHERE "public"."tags"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1) OFFSET $2

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 0e6bc9e7-531e-44de-b0c3-cbaf2dcefa3f
   filename: "Montana-Rocking-CC-Sanctuary.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/2e9d32c7-9b7d-4e1c-9906-5dc29e2a3531-1762553874542"
   mimeType: "application/pdf"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=false, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
üóëÔ∏è [Pinecone] Deleted batch 1/1
‚úÖ [Pinecone] Successfully deleted 4 embeddings for document 0e6bc9e7-531e-44de-b0c3-cbaf2dcefa3f
Deleted embeddings for document 0e6bc9e7-531e-44de-b0c3-cbaf2dcefa3f from Pinecone
üóëÔ∏è Deleted embeddings for document 0e6bc9e7-531e-44de-b0c3-cbaf2dcefa3f
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE ("public"."folders"."userId" = $1 AND "public"."folders"."parentFolderId" IS NULL) ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: false)
prisma:query DELETE FROM "public"."documents" WHERE ("public"."documents"."id" = $1 AND 1=1) RETURNING "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt"
üóëÔ∏è Invalidated user cache for c4f8906d-fbc7-4445-8de3-28dcdc5615ae after document deletion
üóëÔ∏è Invalidated response cache for document 0e6bc9e7-531e-44de-b0c3-cbaf2dcefa3f
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE "public"."folders"."userId" = $1 ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: true)
üîå Client disconnected: KRVgFGz0pHJEPJB6AAAF
üîå Client disconnected: vQ45dbr42z18yvv3AAAD
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîå Client connected: MAPdf_wuj0vqUQnsAAAH (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE "public"."folders"."userId" = $1 ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: true)
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=false, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE ("public"."folders"."userId" = $1 AND "public"."folders"."parentFolderId" IS NULL) ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: false)
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE "public"."folders"."userId" = $1 ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: true)
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìù [createDocumentAfterUpload] Processing upload:
   Filename: Montana-Rocking-CC-Sanctuary.pdf
   File hash: a6aaf439776169a2b39c3053f10794cf0edeabec3ce015aeac07d8b015729c65
   File size: 3231818
   Folder ID: null (no folder)
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."fileHash" = $2 AND "public"."documents"."status" = $3) LIMIT $4 OFFSET $5
‚úÖ New file detected: Montana-Rocking-CC-Sanctuary.pdf
‚úÖ Thumbnail uploaded: c4f8906d-fbc7-4445-8de3-28dcdc5615ae/thumbnails/6a0c3879-ace5-48de-a224-308a9efceffc-1762555141307.jpg
prisma:query BEGIN
prisma:query INSERT INTO "public"."documents" ("id","userId","folderId","filename","encryptedFilename","fileSize","mimeType","fileHash","status","isEncrypted","createdAt","updatedAt") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12) RETURNING "public"."documents"."id"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."id" = $1 LIMIT $2 OFFSET $3
prisma:query COMMIT
üöÄ Starting async processing for: Montana-Rocking-CC-Sanctuary.pdf (Document ID: 18a80b0a-1144-4165-8006-e9245a95de47)
üìÑ Processing document: Montana-Rocking-CC-Sanctuary.pdf
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=false, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1) OFFSET $2
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE ("public"."folders"."userId" = $1 AND "public"."folders"."parentFolderId" IS NULL) ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: false)
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1) OFFSET $2

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 18a80b0a-1144-4165-8006-e9245a95de47
   filename: "Montana-Rocking-CC-Sanctuary.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/d1b33aaa-9172-4be2-8f4c-69a353a39da6-1762555138568"
   mimeType: "application/pdf"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=false, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE ("public"."folders"."userId" = $1 AND "public"."folders"."parentFolderId" IS NULL) ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: false)
üìù Using text extraction service...
Error extracting text from PDF: TypeError: pdfParse is not a function
    at extractTextFromPDF (C:\Users\Pedro\Desktop\webapp\backend\src\services\textExtraction.service.ts:133:24)
    at Object.extractText (C:\Users\Pedro\Desktop\webapp\backend\src\services\textExtraction.service.ts:735:40)
    at processDocumentAsync (C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:1458:52)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:1104:7
Error in text extraction: Error: Failed to extract text from PDF
    at extractTextFromPDF (C:\Users\Pedro\Desktop\webapp\backend\src\services\textExtraction.service.ts:163:11)
    at Object.extractText (C:\Users\Pedro\Desktop\webapp\backend\src\services\textExtraction.service.ts:735:40)
    at processDocumentAsync (C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:1458:52)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:1104:7
‚ö†Ô∏è Standard extraction failed
Error: Failed to extract text from PDF
üì∏ Trying Google Cloud Vision for scanned PDF...
üîç Converting PDF to images for OCR...
  ‚úÖ Converted 15 pages to images
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1) OFFSET $2
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1) OFFSET $2

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 18a80b0a-1144-4165-8006-e9245a95de47
   filename: "Montana-Rocking-CC-Sanctuary.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/d1b33aaa-9172-4be2-8f4c-69a353a39da6-1762555138568"
   mimeType: "application/pdf"
  ‚úÖ Page 1: 117 chars
  ‚úÖ Page 2: 697 chars
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
  ‚úÖ Page 3: 274 chars
  ‚úÖ Page 4: 302 chars
  ‚úÖ Page 5: 2311 chars
  ‚úÖ Page 6: 1817 chars
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
  ‚úÖ Page 7: 968 chars
  ‚úÖ Page 8: 399 chars
  ‚úÖ Page 9: 1599 chars
  ‚úÖ Page 10: 396 chars
‚úÖ OCR complete: 8900 characters, confidence: 0.93
‚úÖ Google Cloud Vision extraction successful
‚úÖ Text extracted (8898 characters)
üìù Converting document to markdown...
üîÑ Converting Montana-Rocking-CC-Sanctuary.pdf to markdown (application/pdf)
Error converting PDF to markdown: TypeError: pdfParse is not a function
    at MarkdownConversionService.pdfToMarkdown (C:\Users\Pedro\Desktop\webapp\backend\src\services\markdownConversion.service.ts:108:26)
    at MarkdownConversionService.convertToMarkdown (C:\Users\Pedro\Desktop\webapp\backend\src\services\markdownConversion.service.ts:78:27)
    at processDocumentAsync (C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:1502:62)
    at async C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:1104:7
‚ö†Ô∏è Markdown conversion failed (non-critical): TypeError: pdfParse is not a function
    at MarkdownConversionService.pdfToMarkdown (C:\Users\Pedro\Desktop\webapp\backend\src\services\markdownConversion.service.ts:108:26)
    at MarkdownConversionService.convertToMarkdown (C:\Users\Pedro\Desktop\webapp\backend\src\services\markdownConversion.service.ts:78:27)
    at processDocumentAsync (C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:1502:62)
    at async C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:1104:7
ü§ñ Analyzing document with Gemini...
‚úÖ Document analyzed
üîç Enriching document metadata with semantic analysis...
üîç [Metadata Enrichment] Enriching document metadata...
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
‚úÖ [Metadata Enrichment] Completed in 19.38s
   Topics: 5
   Entities: 29
   Summary: 415 chars
   Key Points: 7
‚úÖ Metadata enriched: 5 topics, 7 key points, sentiment: positive
prisma:query SELECT 1
prisma:query INSERT INTO "public"."document_metadata" ("id","documentId","extractedText","ocrConfidence","pageCount","wordCount","thumbnailUrl","entities","classification","summary","hasSignature","hasTables","hasImages","markdownContent","slidesData","pptxMetadata","slideGenerationStatus","createdAt","updatedAt") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19) ON CONFLICT ("documentId") DO UPDATE SET "extractedText" = $20, "ocrConfidence" = $21, "classification" = $22, "entities" = $23, "summary" = $24, "thumbnailUrl" = $25, "pageCount" = $26, "wordCount" = $27, "markdownContent" = $28, "slidesData" = $29, "pptxMetadata" = $30, "updatedAt" = $31 WHERE ("public"."document_metadata"."documentId" = $32 AND 1=1) RETURNING "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt"
üè∑Ô∏è Auto-generating tags...
‚úÖ Generated 7 tags: real estate, investment, montana, 2023, land, bozeman, sanctuary
prisma:query SELECT "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt" FROM "public"."tags" WHERE (("public"."tags"."userId" = $1 AND "public"."tags"."name" = $2) AND 1=1) LIMIT $3 OFFSET $4
prisma:query BEGIN
prisma:query SELECT "public"."document_tags"."id" FROM "public"."document_tags" WHERE (("public"."document_tags"."documentId" = $1 AND "public"."document_tags"."tagId" = $2) AND 1=1) OFFSET $3
prisma:query INSERT INTO "public"."document_tags" ("id","documentId","tagId","createdAt") VALUES ($1,$2,$3,$4) RETURNING "public"."document_tags"."id"
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."id" = $1 LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query SELECT "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt" FROM "public"."tags" WHERE (("public"."tags"."userId" = $1 AND "public"."tags"."name" = $2) AND 1=1) LIMIT $3 OFFSET $4
prisma:query BEGIN
prisma:query SELECT "public"."document_tags"."id" FROM "public"."document_tags" WHERE (("public"."document_tags"."documentId" = $1 AND "public"."document_tags"."tagId" = $2) AND 1=1) OFFSET $3
prisma:query INSERT INTO "public"."document_tags" ("id","documentId","tagId","createdAt") VALUES ($1,$2,$3,$4) RETURNING "public"."document_tags"."id"
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."id" = $1 LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query SELECT "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt" FROM "public"."tags" WHERE (("public"."tags"."userId" = $1 AND "public"."tags"."name" = $2) AND 1=1) LIMIT $3 OFFSET $4
prisma:query BEGIN
prisma:query SELECT "public"."document_tags"."id" FROM "public"."document_tags" WHERE (("public"."document_tags"."documentId" = $1 AND "public"."document_tags"."tagId" = $2) AND 1=1) OFFSET $3
prisma:query INSERT INTO "public"."document_tags" ("id","documentId","tagId","createdAt") VALUES ($1,$2,$3,$4) RETURNING "public"."document_tags"."id"
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."id" = $1 LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query SELECT "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt" FROM "public"."tags" WHERE (("public"."tags"."userId" = $1 AND "public"."tags"."name" = $2) AND 1=1) LIMIT $3 OFFSET $4
prisma:query BEGIN
prisma:query SELECT "public"."document_tags"."id" FROM "public"."document_tags" WHERE (("public"."document_tags"."documentId" = $1 AND "public"."document_tags"."tagId" = $2) AND 1=1) OFFSET $3
prisma:query INSERT INTO "public"."document_tags" ("id","documentId","tagId","createdAt") VALUES ($1,$2,$3,$4) RETURNING "public"."document_tags"."id"
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."id" = $1 LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query SELECT "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt" FROM "public"."tags" WHERE (("public"."tags"."userId" = $1 AND "public"."tags"."name" = $2) AND 1=1) LIMIT $3 OFFSET $4
prisma:query BEGIN
prisma:query SELECT "public"."document_tags"."id" FROM "public"."document_tags" WHERE (("public"."document_tags"."documentId" = $1 AND "public"."document_tags"."tagId" = $2) AND 1=1) OFFSET $3
prisma:query INSERT INTO "public"."document_tags" ("id","documentId","tagId","createdAt") VALUES ($1,$2,$3,$4) RETURNING "public"."document_tags"."id"
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."id" = $1 LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query SELECT "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt" FROM "public"."tags" WHERE (("public"."tags"."userId" = $1 AND "public"."tags"."name" = $2) AND 1=1) LIMIT $3 OFFSET $4
prisma:query BEGIN
prisma:query SELECT "public"."document_tags"."id" FROM "public"."document_tags" WHERE (("public"."document_tags"."documentId" = $1 AND "public"."document_tags"."tagId" = $2) AND 1=1) OFFSET $3
prisma:query INSERT INTO "public"."document_tags" ("id","documentId","tagId","createdAt") VALUES ($1,$2,$3,$4) RETURNING "public"."document_tags"."id"
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."id" = $1 LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query SELECT "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt" FROM "public"."tags" WHERE (("public"."tags"."userId" = $1 AND "public"."tags"."name" = $2) AND 1=1) LIMIT $3 OFFSET $4
prisma:query BEGIN
prisma:query SELECT "public"."document_tags"."id" FROM "public"."document_tags" WHERE (("public"."document_tags"."documentId" = $1 AND "public"."document_tags"."tagId" = $2) AND 1=1) OFFSET $3
prisma:query INSERT INTO "public"."document_tags" ("id","documentId","tagId","createdAt") VALUES ($1,$2,$3,$4) RETURNING "public"."document_tags"."id"
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."id" = $1 LIMIT $2 OFFSET $3
prisma:query COMMIT
üîÆ Generating semantic chunks and vector embeddings...
üìù Using standard text chunking...
üì¶ Split document into 4 chunks
üîÆ Generating embeddings with Gemini...
‚ö° [Embedding Service] BATCH generating embeddings for 4 texts...
   üì¶ Processing batch 1/1 (4 texts in ONE API call)...
üíæ Cached embedding for text (length: 3026)
üíæ Cached embedding for text (length: 1943)
üíæ Cached embedding for text (length: 3510)
üíæ Cached embedding for text (length: 78)
   ‚úÖ Batch 1/1 completed (4 embeddings)
‚úÖ [Embedding Service] Generated 4 embeddings in 0.45s
‚ö° [Store Embeddings] Processing 4 chunks for document 18a80b0a-1144-4165-8006-e9245a95de47...
üóëÔ∏è [Pinecone] Deleting all vectors for document: 18a80b0a-1144-4165-8006-e9245a95de47
‚ö†Ô∏è [Pinecone] No vectors found for document 18a80b0a-1144-4165-8006-e9245a95de47
‚ö° [Batch Embedding] Processing 4 chunks in parallel...
‚úÖ Cache hit for embedding (length: 3039)
‚úÖ Cache hit for embedding (length: 1946)
‚úÖ Cache hit for embedding (length: 3527)
‚úÖ Cache hit for embedding (length: 79)
üì¶ [Batch Embedding] Cache hits: 4/4
‚ö° [Batch Embedding] Completed in 2ms (1ms per chunk)
üíæ [Store Embeddings] Saving to Pinecone...
‚úÖ [Pinecone] Upserted batch 1/1
‚úÖ [Pinecone] Upserted 4 embeddings with full metadata for document 18a80b0a-1144-4165-8006-e9245a95de47
‚úÖ [Store Embeddings] Completed in 2.6s (657ms per chunk)
‚úÖ Stored 4 vector embeddings
üîç Verifying Pinecone storage...
üîç Verifying document 18a80b0a-1144-4165-8006-e9245a95de47 in Pinecone...
‚úÖ Verification passed: Found 4 vectors
‚úÖ Verification passed: Found 4 vectors in Pinecone
prisma:query UPDATE "public"."documents" SET "status" = $1, "updatedAt" = $2 WHERE ("public"."documents"."id" = $3 AND 1=1) RETURNING "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt"
üóëÔ∏è Invalidated cache for user c4f8906d-fbc7-4445-8de3-28dcdc5615ae after document processing
‚úÖ Document processing completed: Montana-Rocking-CC-Sanctuary.pdf
‚úÖ Document processing completed: Montana-Rocking-CC-Sanctuary.pdf
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ GCS initialized
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
üöÄ Server is running on http://localhost:5000
üìù Environment: development
üîó Health check: http://localhost:5000/health
‚öôÔ∏è  Background workers initialized
üîå WebSocket server ready
‚ö†Ô∏è  HTTP mode - SSL/HTTPS not enabled (development only)
‚úÖ Reminder scheduler started (runs every hour)
üîÑ Starting background document processor (polling every 30s)
‚úÖ System roles initialized
‚úÖ Redis connected
‚úÖ Cache service connected to Redis
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: üîë add access controls to secrets: https://dotenvx.com/ops
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ GCS initialized
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
[32m[nodemon] restarting due to changes...[39m
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
üöÄ Server is running on http://localhost:5000
üìù Environment: development
üîó Health check: http://localhost:5000/health
‚öôÔ∏è  Background workers initialized
üîå WebSocket server ready
‚ö†Ô∏è  HTTP mode - SSL/HTTPS not enabled (development only)
‚úÖ Reminder scheduler started (runs every hour)
üîÑ Starting background document processor (polling every 30s)
‚úÖ System roles initialized
‚úÖ Cache service connected to Redis
‚úÖ Redis connected
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ GCS initialized
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
üöÄ Server is running on http://localhost:5000
üìù Environment: development
üîó Health check: http://localhost:5000/health
‚öôÔ∏è  Background workers initialized
üîå WebSocket server ready
‚ö†Ô∏è  HTTP mode - SSL/HTTPS not enabled (development only)
‚úÖ Reminder scheduler started (runs every hour)
üîÑ Starting background document processor (polling every 30s)
‚úÖ System roles initialized
‚úÖ Redis connected
‚úÖ Cache service connected to Redis
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
üîå Client connected: LeWut4GconfzvXeEAAAB (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ GCS initialized
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
üöÄ Server is running on http://localhost:5000
üìù Environment: development
üîó Health check: http://localhost:5000/health
‚öôÔ∏è  Background workers initialized
üîå WebSocket server ready
‚ö†Ô∏è  HTTP mode - SSL/HTTPS not enabled (development only)
‚úÖ Reminder scheduler started (runs every hour)
üîÑ Starting background document processor (polling every 30s)
‚úÖ System roles initialized
‚úÖ Redis connected
‚úÖ Cache service connected to Redis
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: üîë add access controls to secrets: https://dotenvx.com/ops
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ GCS initialized
[dotenv@17.2.3] injecting env (0) from .env -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
üöÄ Server is running on http://localhost:5000
üìù Environment: development
üîó Health check: http://localhost:5000/health
‚öôÔ∏è  Background workers initialized
üîå WebSocket server ready
‚ö†Ô∏è  HTTP mode - SSL/HTTPS not enabled (development only)
‚úÖ Reminder scheduler started (runs every hour)
üîÑ Starting background document processor (polling every 30s)
‚úÖ System roles initialized
‚úÖ Cache service connected to Redis
‚úÖ Redis connected
üîå Client connected: VneoH0DPuX7JOCEzAAAB (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîå Client connected: 0P77ReM5o47k0pIeAAAD (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìã Fetching conversations for user: c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE "public"."folders"."userId" = $1 ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: true)
prisma:query SELECT "public"."conversations"."id", "public"."conversations"."userId", "public"."conversations"."title", "public"."conversations"."createdAt", "public"."conversations"."updatedAt", "public"."conversations"."contextType", "public"."conversations"."contextId", "public"."conversations"."contextName", "public"."conversations"."contextMeta", COALESCE("aggr_selection_0_Message"."_aggr_count_messages", 0) AS "_aggr_count_messages" FROM "public"."conversations" LEFT JOIN (SELECT "public"."messages"."conversationId", COUNT(*) AS "_aggr_count_messages" FROM "public"."messages" WHERE 1=1 GROUP BY "public"."messages"."conversationId") AS "aggr_selection_0_Message" ON ("public"."conversations"."id" = "aggr_selection_0_Message"."conversationId") WHERE "public"."conversations"."userId" = $1 ORDER BY "public"."conversations"."updatedAt" DESC OFFSET $2
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."firstName", "public"."users"."lastName", "public"."users"."profileImage", "public"."users"."isEmailVerified", "public"."users"."phoneNumber", "public"."users"."isPhoneVerified" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1) OFFSET $2
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1) OFFSET $2
prisma:query SELECT "public"."messages"."id", "public"."messages"."content", "public"."messages"."createdAt", "public"."messages"."conversationId" FROM "public"."messages" WHERE "public"."messages"."conversationId" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9) ORDER BY "public"."messages"."createdAt" DESC OFFSET $10
‚úÖ Found 9 conversations
prisma:query SELECT "public"."two_factor_auth"."id", "public"."two_factor_auth"."isEnabled", "public"."two_factor_auth"."userId" FROM "public"."two_factor_auth" WHERE "public"."two_factor_auth"."userId" IN ($1) OFFSET $2
prisma:query SELECT "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt" FROM "public"."tags" WHERE "public"."tags"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
prisma:query SELECT "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt" FROM "public"."tags" WHERE "public"."tags"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1) OFFSET $2

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 18a80b0a-1144-4165-8006-e9245a95de47
   filename: "Montana-Rocking-CC-Sanctuary.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/d1b33aaa-9172-4be2-8f4c-69a353a39da6-1762555138568"
   mimeType: "application/pdf"
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1) OFFSET $2

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 18a80b0a-1144-4165-8006-e9245a95de47
   filename: "Montana-Rocking-CC-Sanctuary.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/d1b33aaa-9172-4be2-8f4c-69a353a39da6-1762555138568"
   mimeType: "application/pdf"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üí¨ Creating new conversation for user: c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query INSERT INTO "public"."conversations" ("id","userId","title","createdAt","updatedAt") VALUES ($1,$2,$3,$4,$5) RETURNING "public"."conversations"."id", "public"."conversations"."userId", "public"."conversations"."title", "public"."conversations"."createdAt", "public"."conversations"."updatedAt", "public"."conversations"."contextType", "public"."conversations"."contextId", "public"."conversations"."contextName", "public"."conversations"."contextMeta"
‚úÖ Conversation created: 85a028e0-024d-43c0-acd6-5d06c47f080d
üí¨ Joined conversation: 85a028e0-024d-43c0-acd6-5d06c47f080d (1 clients in room)
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìé [ATTACHED FILES] Received: []
üìé [ATTACHED DOCUMENT IDs] Extracted IDs: []
üìé [STREAMING ATTACHMENT DEBUG] documentId: null, attachedDocs: 0, final: undefined
üß† LLM Intent Detection: {
  query: 'Tell me about Montana real estate',
  intent: 'rag_query',
  confidence: 0.98,
  parameters: { keyword: 'Montana real estate' }
}
üéØ [STREAMING LLM Intent] rag_query (confidence: 0.98)
üìù [STREAMING Entities] { keyword: 'Montana real estate' }
üìö [FALLBACK] Falling through to RAG query for intent: rag_query
üöÄ [DEBUG] Sent connected event
prisma:query INSERT INTO "public"."messages" ("id","conversationId","role","content","metadata","createdAt","isDocument") VALUES ($1,$2,$3,$4,$5,$6,$7) RETURNING "public"."messages"."id", "public"."messages"."conversationId", "public"."messages"."role", "public"."messages"."content", "public"."messages"."metadata", "public"."messages"."createdAt", "public"."messages"."isDocument", "public"."messages"."documentTitle", "public"."messages"."documentFormat", "public"."messages"."markdownContent"
üöÄ [DEBUG] About to call generateAnswerStream
üöÄ [DEBUG] userId: c4f8906d-fbc7-4445-8de3-28dcdc5615ae
üöÄ [DEBUG] query: Tell me about Montana real estate
üöÄ [DEBUG] conversationId: 85a028e0-024d-43c0-acd6-5d06c47f080d
üöÄ [DEBUG] generateAnswerStream called
üöÄ [DEBUG] onChunk is function: true

üéØ [HYBRID RAG] Processing query: Tell me about Montana real estate
üìé Attached document ID: undefined
ü§ñ [FILE ACTION] No strict match, trying LLM intent detection...
üß† LLM Intent Detection: {
  query: 'Tell me about Montana real estate',
  intent: 'rag_query',
  confidence: 0.98,
  parameters: { keyword: 'Montana real estate' }
}
ü§ñ [FILE ACTION] LLM intent: {
  intent: 'rag_query',
  confidence: 0.98,
  parameters: { keyword: 'Montana real estate' }
}
‚ùå [FILE ACTION] LLM confidence too low or not a file action
üìö [REGULAR QUERY] Processing
üìö [REGULAR QUERY] Starting RAG pipeline
üîç [DEBUG] Query filter - userId: c4f8906d-fbc7-4445-8de3-28dcdc5615ae
üîç [DEBUG] Query text: "Tell me about Montana real estate"
üîç [DEBUG] Attached document ID: none
üîç [EXTRACT] All words: [ 'tell', 'about', 'montana', 'real', 'estate' ]
üîç [EXTRACT] After filtering stop words: [ 'montana', 'real', 'estate' ]
üîç [DOC SEARCH] Looking for documents matching: [ 'montana', 'real', 'estate' ]
prisma:query SELECT "public"."documents"."id", "public"."documents"."filename" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3
üìÑ [DOC SEARCH] Checking 1 documents
üìÑ [DOC SEARCH] Checking document: "Montana-Rocking-CC-Sanctuary.pdf" (lower: "montana-rocking-cc-sanctuary.pdf", without ext: "montana-rocking-cc-sanctuary")
  üîç Testing "montana": docLower.includes="true", potentialName.includes(docWithoutExt)="false", docWithoutExt.includes="true"
  ‚úÖ [DOC SEARCH] MATCHED "montana" ‚Üí "Montana-Rocking-CC-Sanctuary.pdf"
‚úÖ [REGULAR QUERY] Found 1 documents by name
prisma:query SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."id" IN ($1) AND "public"."documents"."userId" = $2 AND "public"."documents"."status" <> $3) OFFSET $4
‚úÖ [REGULAR QUERY] Found 4 relevant chunks
üêõ [DEBUG] All document IDs found: [ '18a80b0a-1144-4165-8006-e9245a95de47' ]
üêõ [DEBUG] All filenames found: [ 'Montana-Rocking-CC-Sanctuary.pdf' ]
üêõ [DEBUG] First chunk sample: {
  "id": "18a80b0a-1144-4165-8006-e9245a95de47-3",
  "score": 0.69020462,
  "values": [],
  "metadata": {
    "chunkIndex": 3,
    "content": "Made with GAMMA\n\nMontana's Premium Land Market & Investment\nMarket Highlights\n.",
    "createdAt": "2025-11-07T22:39:02.310Z",
    "documentId": "18a80b0a-1144-4165-8006-e9245a95de47",
    "endChar": 80,
    "filename": "Montana-Rocking-CC-Sanctuary.pdf",
    "mimeType": "application/pdf",
    "startChar": -1,
    "status": "processing",
    "userId": "c4f8906d-fbc7-4445-8de3-28dcdc5615ae"
  }
}
üìù [CONTEXT] Length: 8828 chars
üìù [CONTEXT] Preview: [Source: Montana-Rocking-CC-Sanctuary.pdf, Page: N/A]
Made with GAMMA

Montana's Premium Land Market & Investment
Market Highlights
.

---

[Source: Montana-Rocking-CC-Sanctuary.pdf, Page: N/A]
5m $3k...
üêõ [DEBUG] Full context (first 500 chars): [Source: Montana-Rocking-CC-Sanctuary.pdf, Page: N/A]
Made with GAMMA

Montana's Premium Land Market & Investment
Market Highlights
.

---

[Source: Montana-Rocking-CC-Sanctuary.pdf, Page: N/A]
5m $3k/acre
Butte
320 acres, $16m $50k/acre
Three Forks
Wilsall
Clyde Park
dview
141 acres,$6m, $44k/acre
Rapelje
191
Conner
Sula
15
Whitehalle
Big Timer
Wise River
373 acres,$8m, $20k/acre
grade
Groveliff
Bozeman
39 acres,$3m, $83k/acre
Billings
90
Livings
Laurel
Gibbonsville
Wisdom Beaverhead Deerlodge

üåç Detected query language: English (Next step: "Next step")
üåä [STREAMING] Starting real stream
üöÄ [DEBUG] onChunk called with chunk length: 262
üöÄ [DEBUG] Chunk preview: Montana's real estate market is identified as a pr
üöÄ [DEBUG] Writing chunk to SSE stream...
üöÄ [DEBUG] Chunk written and flushed
üöÄ [DEBUG] onChunk called with chunk length: 303
üöÄ [DEBUG] Chunk preview:  considerations include **lower property taxes** a
üöÄ [DEBUG] Writing chunk to SSE stream...
üöÄ [DEBUG] Chunk written and flushed
üöÄ [DEBUG] onChunk called with chunk length: 16
üöÄ [DEBUG] Chunk preview: , and locations.
üöÄ [DEBUG] Writing chunk to SSE stream...
üöÄ [DEBUG] Chunk written and flushed
‚úÖ [STREAMING] Complete. Total chars: 581
üöÄ [DEBUG] generateAnswerStream completed
üöÄ [DEBUG] fullAnswer length: 581
‚úÖ [POST-PROCESSING] Applied responsePostProcessor formatting (warnings, spacing, next steps limiting)
‚úÖ [DEDUPLICATION] 0 sources ‚Üí 0 unique sources
prisma:query INSERT INTO "public"."messages" ("id","conversationId","role","content","metadata","createdAt","isDocument") VALUES ($1,$2,$3,$4,$5,$6,$7) RETURNING "public"."messages"."id", "public"."messages"."conversationId", "public"."messages"."role", "public"."messages"."content", "public"."messages"."metadata", "public"."messages"."createdAt", "public"."messages"."isDocument", "public"."messages"."documentTitle", "public"."messages"."documentFormat", "public"."messages"."markdownContent"
prisma:query UPDATE "public"."conversations" SET "updatedAt" = $1 WHERE ("public"."conversations"."id" = $2 AND 1=1) RETURNING "public"."conversations"."id", "public"."conversations"."userId", "public"."conversations"."title", "public"."conversations"."createdAt", "public"."conversations"."updatedAt", "public"."conversations"."contextType", "public"."conversations"."contextId", "public"."conversations"."contextName", "public"."conversations"."contextMeta"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."messages"."id" FROM "public"."messages" WHERE "public"."messages"."conversationId" = $1 OFFSET $2) AS "sub"
prisma:query SELECT "public"."conversations"."id", "public"."conversations"."title" FROM "public"."conversations" WHERE ("public"."conversations"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìù Generating AI-powered conversation title...
üöÄ [DEBUG] About to send done event
üöÄ [DEBUG] Done event sent
üöÄ [DEBUG] Response ended
‚ö° RAG Streaming Response Time: 10.242s
‚úÖ Generated title: Montana real estate market overview
prisma:query UPDATE "public"."conversations" SET "title" = $1, "updatedAt" = $2 WHERE ("public"."conversations"."id" = $3 AND 1=1) RETURNING "public"."conversations"."id", "public"."conversations"."userId", "public"."conversations"."title", "public"."conversations"."createdAt", "public"."conversations"."updatedAt", "public"."conversations"."contextType", "public"."conversations"."contextId", "public"."conversations"."contextName", "public"."conversations"."contextMeta"
‚ö†Ô∏è  WebSocket not available for title update
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE "public"."folders"."userId" = $1 ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: true)
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1) OFFSET $2
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1) OFFSET $2
prisma:query SELECT "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt" FROM "public"."tags" WHERE "public"."tags"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
prisma:query SELECT "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt" FROM "public"."tags" WHERE "public"."tags"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1) OFFSET $2

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 18a80b0a-1144-4165-8006-e9245a95de47
   filename: "Montana-Rocking-CC-Sanctuary.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/d1b33aaa-9172-4be2-8f4c-69a353a39da6-1762555138568"
   mimeType: "application/pdf"
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1) OFFSET $2

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 18a80b0a-1144-4165-8006-e9245a95de47
   filename: "Montana-Rocking-CC-Sanctuary.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/d1b33aaa-9172-4be2-8f4c-69a353a39da6-1762555138568"
   mimeType: "application/pdf"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ GCS initialized
[dotenv@17.2.3] injecting env (0) from .env -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
üöÄ Server is running on http://localhost:5000
üìù Environment: development
üîó Health check: http://localhost:5000/health
‚öôÔ∏è  Background workers initialized
üîå WebSocket server ready
‚ö†Ô∏è  HTTP mode - SSL/HTTPS not enabled (development only)
‚úÖ Reminder scheduler started (runs every hour)
üîÑ Starting background document processor (polling every 30s)
‚úÖ System roles initialized
‚úÖ Cache service connected to Redis
‚úÖ Redis connected
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
üîå Client connected: VPMfY78wsIK1O-p_AAAB (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
üîå Client connected: QgJ6JncGMfno8byQAAAD (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ GCS initialized
[dotenv@17.2.3] injecting env (0) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
üöÄ Server is running on http://localhost:5000
üìù Environment: development
üîó Health check: http://localhost:5000/health
‚öôÔ∏è  Background workers initialized
üîå WebSocket server ready
‚ö†Ô∏è  HTTP mode - SSL/HTTPS not enabled (development only)
‚úÖ Reminder scheduler started (runs every hour)
üîÑ Starting background document processor (polling every 30s)
‚úÖ System roles initialized
‚úÖ Redis connected
‚úÖ Cache service connected to Redis
üîå Client connected: ppGo9Y-6xtjwlYqUAAAB (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
üîå Client connected: 1jmOGMUUq1IaR6dBAAAD (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ GCS initialized
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops
[dotenv@17.2.3] injecting env (0) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
üöÄ Server is running on http://localhost:5000
üìù Environment: development
üîó Health check: http://localhost:5000/health
‚öôÔ∏è  Background workers initialized
üîå WebSocket server ready
‚ö†Ô∏è  HTTP mode - SSL/HTTPS not enabled (development only)
‚úÖ Reminder scheduler started (runs every hour)
üîÑ Starting background document processor (polling every 30s)
‚úÖ System roles initialized
‚úÖ Cache service connected to Redis
‚úÖ Redis connected
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
üîå Client connected: CtLApwxQM4XIRFrFAAAC (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
üîå Client connected: LoG1tp9VBJ3NLkP0AAAD (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ Supabase Storage initialized
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
üöÄ Server is running on http://localhost:5000
üìù Environment: development
üîó Health check: http://localhost:5000/health
‚öôÔ∏è  Background workers initialized
üîå WebSocket server ready
‚ö†Ô∏è  HTTP mode - SSL/HTTPS not enabled (development only)
‚úÖ Reminder scheduler started (runs every hour)
üîÑ Starting background document processor (polling every 30s)
‚úÖ System roles initialized
‚úÖ Cache service connected to Redis
‚úÖ Redis connected
‚úÖ Supabase storage bucket already exists: user-files
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
üîå Client connected: WoAvPOxYoCr64BEzAAAC (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
üîå Client connected: 7ebf9qALfA1rHTyLAAAD (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ Supabase Storage initialized
[dotenv@17.2.3] injecting env (0) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
üöÄ Server is running on http://localhost:5000
üìù Environment: development
üîó Health check: http://localhost:5000/health
‚öôÔ∏è  Background workers initialized
üîå WebSocket server ready
‚ö†Ô∏è  HTTP mode - SSL/HTTPS not enabled (development only)
‚úÖ Reminder scheduler started (runs every hour)
üîÑ Starting background document processor (polling every 30s)
‚úÖ System roles initialized
‚úÖ Redis connected
‚úÖ Cache service connected to Redis
‚úÖ Supabase storage bucket already exists: user-files
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
üîå Client connected: I81Ak5jFaMEhSbDsAAAC (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
üîå Client connected: sOUKCIvZtUNXedw6AAAD (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ Supabase Storage initialized
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops
[32m[nodemon] restarting due to changes...[39m
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }
‚úÖ Twilio SMS service initialized
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ Supabase Storage initialized
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }
[dotenv@17.2.3] injecting env (0) from .env -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
üöÄ Server is running on http://localhost:5000
üìù Environment: development
üîó Health check: http://localhost:5000/health
‚öôÔ∏è  Background workers initialized
üîå WebSocket server ready
‚ö†Ô∏è  HTTP mode - SSL/HTTPS not enabled (development only)
‚úÖ Reminder scheduler started (runs every hour)
üîÑ Starting background document processor (polling every 30s)
‚úÖ System roles initialized
‚úÖ Redis connected
‚úÖ Cache service connected to Redis
üîå Client connected: Q20QM6errXYCr6nGAAAC (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
üîå Client connected: ZfhlKWZ5c4V-17_bAAAD (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
‚úÖ Supabase storage bucket already exists: user-files
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ Supabase Storage initialized
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
[32m[nodemon] restarting due to changes...[39m
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ Supabase Storage initialized
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
üöÄ Server is running on http://localhost:5000
üìù Environment: development
üîó Health check: http://localhost:5000/health
‚öôÔ∏è  Background workers initialized
üîå WebSocket server ready
‚ö†Ô∏è  HTTP mode - SSL/HTTPS not enabled (development only)
‚úÖ Reminder scheduler started (runs every hour)
üîÑ Starting background document processor (polling every 30s)
‚úÖ System roles initialized
‚úÖ Cache service connected to Redis
‚úÖ Redis connected
üîå Client connected: wet7OVGXFZHPbBb1AAAB (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
‚úÖ Supabase storage bucket already exists: user-files
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
üîå Client connected: MdrGvw1P8I6UY1mtAAAD (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ Supabase Storage initialized
C:\Users\Pedro\Desktop\webapp\backend\src\services\markdownConversion.service.ts:57
    this.storage = new Storage({
                       ^
ReferenceError: Storage is not defined
    at new MarkdownConversionService (C:\Users\Pedro\Desktop\webapp\backend\src\services\markdownConversion.service.ts:57:24)
    at Object.<anonymous> (C:\Users\Pedro\Desktop\webapp\backend\src\services\markdownConversion.service.ts:500:16)
    at Module._compile (node:internal/modules/cjs/loader:1706:14)
    at Module.m._compile (C:\Users\Pedro\Desktop\webapp\backend\node_modules\ts-node\src\index.ts:1618:23)
    at node:internal/modules/cjs/loader:1839:10
    at Object.require.extensions.<computed> [as .ts] (C:\Users\Pedro\Desktop\webapp\backend\node_modules\ts-node\src\index.ts:1621:12)
    at Module.load (node:internal/modules/cjs/loader:1441:32)
    at Function._load (node:internal/modules/cjs/loader:1263:12)
    at TracingChannel.traceSync (node:diagnostics_channel:322:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:237:24)
    at Module.require (node:internal/modules/cjs/loader:1463:12)
    at require (node:internal/modules/helpers:147:16)
    at Object.<anonymous> (C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:9:1)
    at Module._compile (node:internal/modules/cjs/loader:1706:14)
    at Module.m._compile (C:\Users\Pedro\Desktop\webapp\backend\node_modules\ts-node\src\index.ts:1618:23)
    at node:internal/modules/cjs/loader:1839:10
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ Supabase Storage initialized
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }
[dotenv@17.2.3] injecting env (0) from .env -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
üöÄ Server is running on http://localhost:5000
üìù Environment: development
üîó Health check: http://localhost:5000/health
‚öôÔ∏è  Background workers initialized
üîå WebSocket server ready
‚ö†Ô∏è  HTTP mode - SSL/HTTPS not enabled (development only)
‚úÖ Reminder scheduler started (runs every hour)
üîÑ Starting background document processor (polling every 30s)
‚úÖ System roles initialized
‚úÖ Redis connected
‚úÖ Cache service connected to Redis
‚úÖ Supabase storage bucket already exists: user-files
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
üîå Client connected: UmH14oU6lW52bcjtAAAB (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
üîå Client connected: xx8c8esRFhLeT4wMAAAD (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
üí¨ Left conversation: 85a028e0-024d-43c0-acd6-5d06c47f080d
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT 1
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE "public"."folders"."userId" = $1 ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: true)
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE "public"."folders"."userId" = $1 ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: true)
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1) OFFSET $2
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE "public"."folders"."userId" = $1 ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: true)
prisma:query SELECT "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt" FROM "public"."tags" WHERE "public"."tags"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1) OFFSET $2

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 18a80b0a-1144-4165-8006-e9245a95de47
   filename: "Montana-Rocking-CC-Sanctuary.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/d1b33aaa-9172-4be2-8f4c-69a353a39da6-1762555138568"
   mimeType: "application/pdf"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1) OFFSET $2
üîå Client disconnected: xx8c8esRFhLeT4wMAAAD
üîå Client disconnected: UmH14oU6lW52bcjtAAAB
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîå Client connected: UZ7FuXjXka2lBAMfAAAF (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
prisma:query SELECT "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt" FROM "public"."tags" WHERE "public"."tags"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1) OFFSET $2
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE "public"."folders"."userId" = $1 ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: true)
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1) OFFSET $2

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 18a80b0a-1144-4165-8006-e9245a95de47
   filename: "Montana-Rocking-CC-Sanctuary.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/d1b33aaa-9172-4be2-8f4c-69a353a39da6-1762555138568"
   mimeType: "application/pdf"
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE "public"."folders"."userId" = $1 ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: true)
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt" FROM "public"."tags" WHERE "public"."tags"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1) OFFSET $2
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1) OFFSET $2

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 18a80b0a-1144-4165-8006-e9245a95de47
   filename: "Montana-Rocking-CC-Sanctuary.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/d1b33aaa-9172-4be2-8f4c-69a353a39da6-1762555138568"
   mimeType: "application/pdf"
prisma:query SELECT "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt" FROM "public"."tags" WHERE "public"."tags"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1) OFFSET $2

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 18a80b0a-1144-4165-8006-e9245a95de47
   filename: "Montana-Rocking-CC-Sanctuary.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/d1b33aaa-9172-4be2-8f4c-69a353a39da6-1762555138568"
   mimeType: "application/pdf"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1) OFFSET $2
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt" FROM "public"."tags" WHERE "public"."tags"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1) OFFSET $2
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1) OFFSET $2

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 18a80b0a-1144-4165-8006-e9245a95de47
   filename: "Montana-Rocking-CC-Sanctuary.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/d1b33aaa-9172-4be2-8f4c-69a353a39da6-1762555138568"
   mimeType: "application/pdf"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt" FROM "public"."tags" WHERE "public"."tags"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1) OFFSET $2

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 18a80b0a-1144-4165-8006-e9245a95de47
   filename: "Montana-Rocking-CC-Sanctuary.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/d1b33aaa-9172-4be2-8f4c-69a353a39da6-1762555138568"
   mimeType: "application/pdf"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1) OFFSET $2
prisma:query SELECT "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt" FROM "public"."tags" WHERE "public"."tags"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1) OFFSET $2

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 18a80b0a-1144-4165-8006-e9245a95de47
   filename: "Montana-Rocking-CC-Sanctuary.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/d1b33aaa-9172-4be2-8f4c-69a353a39da6-1762555138568"
   mimeType: "application/pdf"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1) OFFSET $2
prisma:query SELECT "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt" FROM "public"."tags" WHERE "public"."tags"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1) OFFSET $2

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 18a80b0a-1144-4165-8006-e9245a95de47
   filename: "Montana-Rocking-CC-Sanctuary.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/d1b33aaa-9172-4be2-8f4c-69a353a39da6-1762555138568"
   mimeType: "application/pdf"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üóëÔ∏è Deleted from Supabase: c4f8906d-fbc7-4445-8de3-28dcdc5615ae/d1b33aaa-9172-4be2-8f4c-69a353a39da6-1762555138568
üóëÔ∏è [Pinecone] Deleting all vectors for document: 18a80b0a-1144-4165-8006-e9245a95de47
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=false, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE ("public"."folders"."userId" = $1 AND "public"."folders"."parentFolderId" IS NULL) ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: false)
üîç [Pinecone] Found 4 vectors to delete
üóëÔ∏è [Pinecone] Deleted batch 1/1
‚úÖ [Pinecone] Successfully deleted 4 embeddings for document 18a80b0a-1144-4165-8006-e9245a95de47
Deleted embeddings for document 18a80b0a-1144-4165-8006-e9245a95de47 from Pinecone
üóëÔ∏è Deleted embeddings for document 18a80b0a-1144-4165-8006-e9245a95de47
prisma:query DELETE FROM "public"."documents" WHERE ("public"."documents"."id" = $1 AND 1=1) RETURNING "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt"
üóëÔ∏è Invalidated user cache for c4f8906d-fbc7-4445-8de3-28dcdc5615ae after document deletion
üóëÔ∏è Invalidated response cache for document 18a80b0a-1144-4165-8006-e9245a95de47
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE "public"."folders"."userId" = $1 ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: true)
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
‚ö†Ô∏è getSignedUploadUrl called - Supabase uploads should use server-side uploadFile()
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìù [createDocumentAfterUpload] Processing upload:
   Filename: Comprovante1.pdf
   File hash: 85e959035ba0bf1e4ec29aa8e9ceecb37a01201bcfa6e95458dd244d44de9acf
   File size: 6631
   Folder ID: null (no folder)
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."fileHash" = $2 AND "public"."documents"."status" = $3) LIMIT $4 OFFSET $5
‚úÖ New file detected: Comprovante1.pdf
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
‚úÖ Uploaded to Supabase: c4f8906d-fbc7-4445-8de3-28dcdc5615ae/thumbnails/98f5facb-9927-469b-b349-af4705bb5c98-1762556244970.jpg
‚úÖ Thumbnail uploaded: c4f8906d-fbc7-4445-8de3-28dcdc5615ae/thumbnails/98f5facb-9927-469b-b349-af4705bb5c98-1762556244970.jpg
prisma:query BEGIN
prisma:query INSERT INTO "public"."documents" ("id","userId","folderId","filename","encryptedFilename","fileSize","mimeType","fileHash","status","isEncrypted","createdAt","updatedAt") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12) RETURNING "public"."documents"."id"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."id" = $1 LIMIT $2 OFFSET $3
prisma:query COMMIT
üöÄ Starting async processing for: Comprovante1.pdf (Document ID: a2a8a10b-5d6f-47c3-bd5d-8534e4c9b3e8)
üìÑ Processing document: Comprovante1.pdf
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=false, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT 1
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE ("public"."folders"."userId" = $1 AND "public"."folders"."parentFolderId" IS NULL) ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: false)
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
Error downloading from Supabase: Error: Supabase download error: {}
    at SupabaseStorageService.download (C:\Users\Pedro\Desktop\webapp\backend\src\services\supabaseStorage.service.ts:65:15)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async downloadFile (C:\Users\Pedro\Desktop\webapp\backend\src\config\storage.ts:55:18)
    at async processDocumentAsync (C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:1169:22)
    at async C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:1104:7
‚ùå Error processing document: Error: Supabase download error: {}
    at SupabaseStorageService.download (C:\Users\Pedro\Desktop\webapp\backend\src\services\supabaseStorage.service.ts:65:15)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async downloadFile (C:\Users\Pedro\Desktop\webapp\backend\src\config\storage.ts:55:18)
    at async processDocumentAsync (C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:1169:22)
    at async C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:1104:7
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1) OFFSET $2
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=false, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT 1
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1) OFFSET $2

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: a2a8a10b-5d6f-47c3-bd5d-8534e4c9b3e8
   filename: "Comprovante1.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/5bab9355-8e1e-4dfd-b394-f47daccbaddd-1762556244468"
   mimeType: "application/pdf"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE ("public"."folders"."userId" = $1 AND "public"."folders"."parentFolderId" IS NULL) ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: false)
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query UPDATE "public"."documents" SET "status" = $1, "updatedAt" = $2 WHERE ("public"."documents"."id" = $3 AND 1=1) RETURNING "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt"
‚úÖ Document processing completed: Comprovante1.pdf
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1) OFFSET $2
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1) OFFSET $2

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: a2a8a10b-5d6f-47c3-bd5d-8534e4c9b3e8
   filename: "Comprovante1.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/5bab9355-8e1e-4dfd-b394-f47daccbaddd-1762556244468"
   mimeType: "application/pdf"
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
üîî Running scheduled reminder check...
prisma:query SELECT "public"."reminders"."id", "public"."reminders"."userId", "public"."reminders"."title", "public"."reminders"."description", "public"."reminders"."dueDate", "public"."reminders"."isCompleted", "public"."reminders"."notified", "public"."reminders"."documentId", "public"."reminders"."createdAt", "public"."reminders"."updatedAt" FROM "public"."reminders" WHERE ("public"."reminders"."dueDate" <= $1 AND "public"."reminders"."dueDate" >= $2 AND "public"."reminders"."isCompleted" = $3 AND "public"."reminders"."notified" = $4) OFFSET $5
Checking reminders: Found 0 reminders to notify
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: üîë add access controls to secrets: https://dotenvx.com/ops
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ Supabase Storage initialized
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîë add access controls to secrets: https://dotenvx.com/ops
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
üöÄ Server is running on http://localhost:5000
üìù Environment: development
üîó Health check: http://localhost:5000/health
‚öôÔ∏è  Background workers initialized
üîå WebSocket server ready
‚ö†Ô∏è  HTTP mode - SSL/HTTPS not enabled (development only)
‚úÖ Reminder scheduler started (runs every hour)
üîÑ Starting background document processor (polling every 30s)
‚úÖ System roles initialized
‚úÖ Redis connected
‚úÖ Cache service connected to Redis
üîå Client connected: nA9NZYWY0jm_zqOGAAAB (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
‚úÖ Supabase storage bucket already exists: user-files
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ Supabase Storage initialized
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
üöÄ Server is running on http://localhost:5000
üìù Environment: development
üîó Health check: http://localhost:5000/health
‚öôÔ∏è  Background workers initialized
üîå WebSocket server ready
‚ö†Ô∏è  HTTP mode - SSL/HTTPS not enabled (development only)
‚úÖ Reminder scheduler started (runs every hour)
üîÑ Starting background document processor (polling every 30s)
‚úÖ System roles initialized
‚úÖ Cache service connected to Redis
‚úÖ Redis connected
üîå Client connected: Sf83bjwP9kHoeZYYAAAB (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
‚úÖ Supabase storage bucket already exists: user-files
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ Supabase Storage initialized
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops
[dotenv@17.2.3] injecting env (0) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
üöÄ Server is running on http://localhost:5000
üìù Environment: development
üîó Health check: http://localhost:5000/health
‚öôÔ∏è  Background workers initialized
üîå WebSocket server ready
‚ö†Ô∏è  HTTP mode - SSL/HTTPS not enabled (development only)
‚úÖ Reminder scheduler started (runs every hour)
üîÑ Starting background document processor (polling every 30s)
‚úÖ System roles initialized
‚úÖ Redis connected
‚úÖ Cache service connected to Redis
‚úÖ Supabase storage bucket already exists: user-files
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
üîå Client connected: R5WaBCR9CNwo7BbkAAAB (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ Supabase Storage initialized
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
üöÄ Server is running on http://localhost:5000
üìù Environment: development
üîó Health check: http://localhost:5000/health
‚öôÔ∏è  Background workers initialized
üîå WebSocket server ready
‚ö†Ô∏è  HTTP mode - SSL/HTTPS not enabled (development only)
‚úÖ Reminder scheduler started (runs every hour)
üîÑ Starting background document processor (polling every 30s)
‚úÖ System roles initialized
‚úÖ Redis connected
‚úÖ Cache service connected to Redis
‚úÖ Supabase storage bucket already exists: user-files
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
üîå Client connected: _aOs15ucvgCgV38YAAAB (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ Supabase Storage initialized
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }
[dotenv@17.2.3] injecting env (0) from .env -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
üöÄ Server is running on http://localhost:5000
üìù Environment: development
üîó Health check: http://localhost:5000/health
‚öôÔ∏è  Background workers initialized
üîå WebSocket server ready
‚ö†Ô∏è  HTTP mode - SSL/HTTPS not enabled (development only)
‚úÖ Reminder scheduler started (runs every hour)
üîÑ Starting background document processor (polling every 30s)
‚úÖ System roles initialized
‚úÖ Redis connected
‚úÖ Cache service connected to Redis
‚úÖ Supabase storage bucket already exists: user-files
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
üîå Client connected: nsVHhPIep6fFewpVAAAB (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT 1
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE "public"."folders"."userId" = $1 ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: true)
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE "public"."folders"."userId" = $1 ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: true)
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1) OFFSET $2
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1) OFFSET $2
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1) OFFSET $2

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: a2a8a10b-5d6f-47c3-bd5d-8534e4c9b3e8
   filename: "Comprovante1.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/5bab9355-8e1e-4dfd-b394-f47daccbaddd-1762556244468"
   mimeType: "application/pdf"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1) OFFSET $2

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: a2a8a10b-5d6f-47c3-bd5d-8534e4c9b3e8
   filename: "Comprovante1.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/5bab9355-8e1e-4dfd-b394-f47daccbaddd-1762556244468"
   mimeType: "application/pdf"
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1) OFFSET $2
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1) OFFSET $2
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1) OFFSET $2

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: a2a8a10b-5d6f-47c3-bd5d-8534e4c9b3e8
   filename: "Comprovante1.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/5bab9355-8e1e-4dfd-b394-f47daccbaddd-1762556244468"
   mimeType: "application/pdf"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1) OFFSET $2

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: a2a8a10b-5d6f-47c3-bd5d-8534e4c9b3e8
   filename: "Comprovante1.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/5bab9355-8e1e-4dfd-b394-f47daccbaddd-1762556244468"
   mimeType: "application/pdf"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE "public"."folders"."userId" = $1 ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: true)
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1) OFFSET $2
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1) OFFSET $2
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1) OFFSET $2

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: a2a8a10b-5d6f-47c3-bd5d-8534e4c9b3e8
   filename: "Comprovante1.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/5bab9355-8e1e-4dfd-b394-f47daccbaddd-1762556244468"
   mimeType: "application/pdf"
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1) OFFSET $2

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: a2a8a10b-5d6f-47c3-bd5d-8534e4c9b3e8
   filename: "Comprovante1.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/5bab9355-8e1e-4dfd-b394-f47daccbaddd-1762556244468"
   mimeType: "application/pdf"
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
‚ö†Ô∏è getSignedUploadUrl called - Supabase uploads should use server-side uploadFile()
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìù [createDocumentAfterUpload] Processing upload:
   Filename: koda_checklist.pdf
   File hash: 66f6bc6c6bc03cccc1cbb83596282cbc17081da3cca3ecdf828303259a926393
   File size: 306823
   Folder ID: null (no folder)
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."fileHash" = $2 AND "public"."documents"."status" = $3) LIMIT $4 OFFSET $5
‚úÖ New file detected: koda_checklist.pdf
‚úÖ Uploaded to Supabase: c4f8906d-fbc7-4445-8de3-28dcdc5615ae/thumbnails/5f7032d6-fb5e-44f9-8feb-407ca7285808-1762556651617.jpg
‚úÖ Thumbnail uploaded: c4f8906d-fbc7-4445-8de3-28dcdc5615ae/thumbnails/5f7032d6-fb5e-44f9-8feb-407ca7285808-1762556651617.jpg
prisma:query BEGIN
prisma:query INSERT INTO "public"."documents" ("id","userId","folderId","filename","encryptedFilename","fileSize","mimeType","fileHash","status","isEncrypted","createdAt","updatedAt") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12) RETURNING "public"."documents"."id"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."id" = $1 LIMIT $2 OFFSET $3
prisma:query COMMIT
üöÄ Starting async processing for: koda_checklist.pdf (Document ID: a550e5d4-e098-4b78-abbb-f031b9e6ab39)
üìÑ Processing document: koda_checklist.pdf
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
Error downloading from Supabase: Error: Supabase download error: {}
    at SupabaseStorageService.download (C:\Users\Pedro\Desktop\webapp\backend\src\services\supabaseStorage.service.ts:65:15)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async downloadFile (C:\Users\Pedro\Desktop\webapp\backend\src\config\storage.ts:55:18)
    at async processDocumentAsync (C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:1138:22)
    at async C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:1073:7
‚ùå Error processing document: Error: Supabase download error: {}
    at SupabaseStorageService.download (C:\Users\Pedro\Desktop\webapp\backend\src\services\supabaseStorage.service.ts:65:15)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async downloadFile (C:\Users\Pedro\Desktop\webapp\backend\src\config\storage.ts:55:18)
    at async processDocumentAsync (C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:1138:22)
    at async C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:1073:7
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=false, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query UPDATE "public"."documents" SET "status" = $1, "updatedAt" = $2 WHERE ("public"."documents"."id" = $3 AND 1=1) RETURNING "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt"
‚úÖ Document processing completed: koda_checklist.pdf
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE ("public"."folders"."userId" = $1 AND "public"."folders"."parentFolderId" IS NULL) ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: false)
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=false, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE ("public"."folders"."userId" = $1 AND "public"."folders"."parentFolderId" IS NULL) ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: false)
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2) OFFSET $3

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: a550e5d4-e098-4b78-abbb-f031b9e6ab39
   filename: "koda_checklist.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/8ae1e7ba-af92-44d9-8de7-198dffda8039-1762556650838"
   mimeType: "application/pdf"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2) OFFSET $3

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: a550e5d4-e098-4b78-abbb-f031b9e6ab39
   filename: "koda_checklist.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/8ae1e7ba-af92-44d9-8de7-198dffda8039-1762556650838"
   mimeType: "application/pdf"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT 1
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE "public"."folders"."userId" = $1 ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: true)
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE "public"."folders"."userId" = $1 ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: true)
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2) OFFSET $3

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: a550e5d4-e098-4b78-abbb-f031b9e6ab39
   filename: "koda_checklist.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/8ae1e7ba-af92-44d9-8de7-198dffda8039-1762556650838"
   mimeType: "application/pdf"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîå Client disconnected: nsVHhPIep6fFewpVAAAB
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
üîå Client connected: Nn8sGMVZ5dgukvnSAAAD (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2) OFFSET $3
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE "public"."folders"."userId" = $1 ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: true)
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2) OFFSET $3

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: a550e5d4-e098-4b78-abbb-f031b9e6ab39
   filename: "koda_checklist.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/8ae1e7ba-af92-44d9-8de7-198dffda8039-1762556650838"
   mimeType: "application/pdf"
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2) OFFSET $3

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: a550e5d4-e098-4b78-abbb-f031b9e6ab39
   filename: "koda_checklist.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/8ae1e7ba-af92-44d9-8de7-198dffda8039-1762556650838"
   mimeType: "application/pdf"
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2) OFFSET $3
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2) OFFSET $3

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: a550e5d4-e098-4b78-abbb-f031b9e6ab39
   filename: "koda_checklist.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/8ae1e7ba-af92-44d9-8de7-198dffda8039-1762556650838"
   mimeType: "application/pdf"
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2) OFFSET $3

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: a550e5d4-e098-4b78-abbb-f031b9e6ab39
   filename: "koda_checklist.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/8ae1e7ba-af92-44d9-8de7-198dffda8039-1762556650838"
   mimeType: "application/pdf"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=false, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: a550e5d4-e098-4b78-abbb-f031b9e6ab39
   filename: "koda_checklist.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/8ae1e7ba-af92-44d9-8de7-198dffda8039-1762556650838"
   mimeType: "application/pdf"
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE ("public"."folders"."userId" = $1 AND "public"."folders"."parentFolderId" IS NULL) ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: false)
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ Supabase Storage initialized
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
üöÄ Server is running on http://localhost:5000
üìù Environment: development
üîó Health check: http://localhost:5000/health
‚öôÔ∏è  Background workers initialized
üîå WebSocket server ready
‚ö†Ô∏è  HTTP mode - SSL/HTTPS not enabled (development only)
‚úÖ Reminder scheduler started (runs every hour)
üîÑ Starting background document processor (polling every 30s)
‚úÖ System roles initialized
‚úÖ Cache service connected to Redis
‚úÖ Redis connected
üîå Client connected: C22h-G_Ty2b6kzs0AAAB (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
‚úÖ Supabase storage bucket already exists: user-files
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE "public"."folders"."userId" = $1 ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: true)
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE "public"."folders"."userId" = $1 ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: true)
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2) OFFSET $3

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: a550e5d4-e098-4b78-abbb-f031b9e6ab39
   filename: "koda_checklist.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/8ae1e7ba-af92-44d9-8de7-198dffda8039-1762556650838"
   mimeType: "application/pdf"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2) OFFSET $3

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: a550e5d4-e098-4b78-abbb-f031b9e6ab39
   filename: "koda_checklist.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/8ae1e7ba-af92-44d9-8de7-198dffda8039-1762556650838"
   mimeType: "application/pdf"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE "public"."folders"."userId" = $1 ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: true)
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2) OFFSET $3

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: a550e5d4-e098-4b78-abbb-f031b9e6ab39
   filename: "koda_checklist.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/8ae1e7ba-af92-44d9-8de7-198dffda8039-1762556650838"
   mimeType: "application/pdf"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2) OFFSET $3

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: a550e5d4-e098-4b78-abbb-f031b9e6ab39
   filename: "koda_checklist.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/8ae1e7ba-af92-44d9-8de7-198dffda8039-1762556650838"
   mimeType: "application/pdf"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
‚ö†Ô∏è getSignedUploadUrl called - Supabase uploads should use server-side uploadFile()
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìù [createDocumentAfterUpload] Processing upload:
   Filename: Koda blueprint (1).docx
   File hash: 9b0cf62b0c9ae8af3974e7a06faae03e1c49603946e025ca4a8550ac8aebad3a
   File size: 337211
   Folder ID: null (no folder)
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2) OFFSET $3

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: a550e5d4-e098-4b78-abbb-f031b9e6ab39
   filename: "koda_checklist.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/8ae1e7ba-af92-44d9-8de7-198dffda8039-1762556650838"
   mimeType: "application/pdf"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."fileHash" = $2 AND "public"."documents"."status" = $3) LIMIT $4 OFFSET $5
‚úÖ New file detected: Koda blueprint (1).docx
prisma:query BEGIN
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2) OFFSET $3

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: a550e5d4-e098-4b78-abbb-f031b9e6ab39
   filename: "koda_checklist.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/8ae1e7ba-af92-44d9-8de7-198dffda8039-1762556650838"
   mimeType: "application/pdf"
prisma:query INSERT INTO "public"."documents" ("id","userId","folderId","filename","encryptedFilename","fileSize","mimeType","fileHash","status","isEncrypted","createdAt","updatedAt") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12) RETURNING "public"."documents"."id"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."id" = $1 LIMIT $2 OFFSET $3
prisma:query COMMIT
üöÄ Starting async processing for: Koda blueprint (1).docx (Document ID: 4945f2e1-45c9-448c-8b5f-aaf7d234bf08)
üìÑ Processing document: Koda blueprint (1).docx
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=false, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE ("public"."folders"."userId" = $1 AND "public"."folders"."parentFolderId" IS NULL) ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: false)
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=false, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE ("public"."folders"."userId" = $1 AND "public"."folders"."parentFolderId" IS NULL) ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: false)
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2,$3) OFFSET $4

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 4945f2e1-45c9-448c-8b5f-aaf7d234bf08
   filename: "Koda blueprint (1).docx"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/98ce70be-af1e-480b-a4cd-6e1a2d778242-1762556917700"
   mimeType: "application/vnd.openxmlformats-officedocument.wordprocessingml.document"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
Supabase download error for c4f8906d-fbc7-4445-8de3-28dcdc5615ae/98ce70be-af1e-480b-a4cd-6e1a2d778242-1762556917700: {
  "__isStorageError": true,
  "name": "StorageUnknownError",
  "originalError": {}
}
Error downloading from Supabase (c4f8906d-fbc7-4445-8de3-28dcdc5615ae/98ce70be-af1e-480b-a4cd-6e1a2d778242-1762556917700): Error: Supabase download error: {}
    at SupabaseStorageService.download (C:\Users\Pedro\Desktop\webapp\backend\src\services\supabaseStorage.service.ts:66:15)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async downloadFile (C:\Users\Pedro\Desktop\webapp\backend\src\config\storage.ts:55:18)
    at async processDocumentAsync (C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:1138:22)
    at async C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:1073:7
‚ùå Error processing document: Error: Supabase download error: {}
    at SupabaseStorageService.download (C:\Users\Pedro\Desktop\webapp\backend\src\services\supabaseStorage.service.ts:66:15)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async downloadFile (C:\Users\Pedro\Desktop\webapp\backend\src\config\storage.ts:55:18)
    at async processDocumentAsync (C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:1138:22)
    at async C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:1073:7
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query UPDATE "public"."documents" SET "status" = $1, "updatedAt" = $2 WHERE ("public"."documents"."id" = $3 AND 1=1) RETURNING "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt"
‚úÖ Document processing completed: Koda blueprint (1).docx
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2,$3) OFFSET $4

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 4945f2e1-45c9-448c-8b5f-aaf7d234bf08
   filename: "Koda blueprint (1).docx"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/98ce70be-af1e-480b-a4cd-6e1a2d778242-1762556917700"
   mimeType: "application/vnd.openxmlformats-officedocument.wordprocessingml.document"
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT 1
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2,$3) OFFSET $4

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 4945f2e1-45c9-448c-8b5f-aaf7d234bf08
   filename: "Koda blueprint (1).docx"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/98ce70be-af1e-480b-a4cd-6e1a2d778242-1762556917700"
   mimeType: "application/vnd.openxmlformats-officedocument.wordprocessingml.document"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=false, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE ("public"."folders"."userId" = $1 AND "public"."folders"."parentFolderId" IS NULL) ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: false)
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT 1
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE "public"."folders"."userId" = $1 ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: true)
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE "public"."folders"."userId" = $1 ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: true)
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2,$3) OFFSET $4

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 4945f2e1-45c9-448c-8b5f-aaf7d234bf08
   filename: "Koda blueprint (1).docx"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/98ce70be-af1e-480b-a4cd-6e1a2d778242-1762556917700"
   mimeType: "application/vnd.openxmlformats-officedocument.wordprocessingml.document"
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2,$3) OFFSET $4

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 4945f2e1-45c9-448c-8b5f-aaf7d234bf08
   filename: "Koda blueprint (1).docx"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/98ce70be-af1e-480b-a4cd-6e1a2d778242-1762556917700"
   mimeType: "application/vnd.openxmlformats-officedocument.wordprocessingml.document"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2,$3) OFFSET $4

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 4945f2e1-45c9-448c-8b5f-aaf7d234bf08
   filename: "Koda blueprint (1).docx"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/98ce70be-af1e-480b-a4cd-6e1a2d778242-1762556917700"
   mimeType: "application/vnd.openxmlformats-officedocument.wordprocessingml.document"
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2,$3) OFFSET $4

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 4945f2e1-45c9-448c-8b5f-aaf7d234bf08
   filename: "Koda blueprint (1).docx"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/98ce70be-af1e-480b-a4cd-6e1a2d778242-1762556917700"
   mimeType: "application/vnd.openxmlformats-officedocument.wordprocessingml.document"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE "public"."folders"."userId" = $1 ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: true)
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2,$3) OFFSET $4

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 4945f2e1-45c9-448c-8b5f-aaf7d234bf08
   filename: "Koda blueprint (1).docx"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/98ce70be-af1e-480b-a4cd-6e1a2d778242-1762556917700"
   mimeType: "application/vnd.openxmlformats-officedocument.wordprocessingml.document"
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2,$3) OFFSET $4

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 4945f2e1-45c9-448c-8b5f-aaf7d234bf08
   filename: "Koda blueprint (1).docx"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/98ce70be-af1e-480b-a4cd-6e1a2d778242-1762556917700"
   mimeType: "application/vnd.openxmlformats-officedocument.wordprocessingml.document"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üóëÔ∏è Deleted from Supabase: c4f8906d-fbc7-4445-8de3-28dcdc5615ae/98ce70be-af1e-480b-a4cd-6e1a2d778242-1762556917700
üóëÔ∏è [Pinecone] Deleting all vectors for document: 4945f2e1-45c9-448c-8b5f-aaf7d234bf08
‚ö†Ô∏è [Pinecone] No vectors found for document 4945f2e1-45c9-448c-8b5f-aaf7d234bf08
Deleted embeddings for document 4945f2e1-45c9-448c-8b5f-aaf7d234bf08 from Pinecone
üóëÔ∏è Deleted embeddings for document 4945f2e1-45c9-448c-8b5f-aaf7d234bf08
prisma:query DELETE FROM "public"."documents" WHERE ("public"."documents"."id" = $1 AND 1=1) RETURNING "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt"
üóëÔ∏è Invalidated user cache for c4f8906d-fbc7-4445-8de3-28dcdc5615ae after document deletion
üóëÔ∏è Invalidated response cache for document 4945f2e1-45c9-448c-8b5f-aaf7d234bf08
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT 1
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE "public"."folders"."userId" = $1 ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: true)
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2) OFFSET $3

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: a550e5d4-e098-4b78-abbb-f031b9e6ab39
   filename: "koda_checklist.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/8ae1e7ba-af92-44d9-8de7-198dffda8039-1762556650838"
   mimeType: "application/pdf"
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2) OFFSET $3

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: a550e5d4-e098-4b78-abbb-f031b9e6ab39
   filename: "koda_checklist.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/8ae1e7ba-af92-44d9-8de7-198dffda8039-1762556650838"
   mimeType: "application/pdf"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE "public"."folders"."userId" = $1 ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: true)
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2) OFFSET $3

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: a550e5d4-e098-4b78-abbb-f031b9e6ab39
   filename: "koda_checklist.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/8ae1e7ba-af92-44d9-8de7-198dffda8039-1762556650838"
   mimeType: "application/pdf"
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2) OFFSET $3

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: a550e5d4-e098-4b78-abbb-f031b9e6ab39
   filename: "koda_checklist.pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/8ae1e7ba-af92-44d9-8de7-198dffda8039-1762556650838"
   mimeType: "application/pdf"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
‚ö†Ô∏è getSignedUploadUrl called - Supabase uploads should use server-side uploadFile()
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìù [createDocumentAfterUpload] Processing upload:
   Filename: Koda blueprint (1).docx
   File hash: 9b0cf62b0c9ae8af3974e7a06faae03e1c49603946e025ca4a8550ac8aebad3a
   File size: 337211
   Folder ID: null (no folder)
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."fileHash" = $2 AND "public"."documents"."status" = $3) LIMIT $4 OFFSET $5
‚úÖ New file detected: Koda blueprint (1).docx
prisma:query BEGIN
prisma:query INSERT INTO "public"."documents" ("id","userId","folderId","filename","encryptedFilename","fileSize","mimeType","fileHash","status","isEncrypted","createdAt","updatedAt") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12) RETURNING "public"."documents"."id"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."id" = $1 LIMIT $2 OFFSET $3
prisma:query COMMIT
üöÄ Starting async processing for: Koda blueprint (1).docx (Document ID: 2966da53-5ba1-46db-bda6-0731ce032df0)
üìÑ Processing document: Koda blueprint (1).docx
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
Supabase download error for c4f8906d-fbc7-4445-8de3-28dcdc5615ae/c7152d47-7275-4f9b-8d49-8d822f876eca-1762557111533: {
  "__isStorageError": true,
  "name": "StorageUnknownError",
  "originalError": {}
}
Error downloading from Supabase (c4f8906d-fbc7-4445-8de3-28dcdc5615ae/c7152d47-7275-4f9b-8d49-8d822f876eca-1762557111533): Error: Supabase download error: {}
    at SupabaseStorageService.download (C:\Users\Pedro\Desktop\webapp\backend\src\services\supabaseStorage.service.ts:66:15)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async downloadFile (C:\Users\Pedro\Desktop\webapp\backend\src\config\storage.ts:55:18)
    at async processDocumentAsync (C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:1138:22)
    at async C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:1073:7
‚ùå Error processing document: Error: Supabase download error: {}
    at SupabaseStorageService.download (C:\Users\Pedro\Desktop\webapp\backend\src\services\supabaseStorage.service.ts:66:15)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async downloadFile (C:\Users\Pedro\Desktop\webapp\backend\src\config\storage.ts:55:18)
    at async processDocumentAsync (C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:1138:22)
    at async C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:1073:7
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query UPDATE "public"."documents" SET "status" = $1, "updatedAt" = $2 WHERE ("public"."documents"."id" = $3 AND 1=1) RETURNING "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt"
‚úÖ Document processing completed: Koda blueprint (1).docx
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=false, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE ("public"."folders"."userId" = $1 AND "public"."folders"."parentFolderId" IS NULL) ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: false)
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2,$3) OFFSET $4
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2,$3) OFFSET $4

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 2966da53-5ba1-46db-bda6-0731ce032df0
   filename: "Koda blueprint (1).docx"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/c7152d47-7275-4f9b-8d49-8d822f876eca-1762557111533"
   mimeType: "application/vnd.openxmlformats-officedocument.wordprocessingml.document"
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=false, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE ("public"."folders"."userId" = $1 AND "public"."folders"."parentFolderId" IS NULL) ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: false)
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2,$3) OFFSET $4

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 2966da53-5ba1-46db-bda6-0731ce032df0
   filename: "Koda blueprint (1).docx"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/c7152d47-7275-4f9b-8d49-8d822f876eca-1762557111533"
   mimeType: "application/vnd.openxmlformats-officedocument.wordprocessingml.document"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ Supabase Storage initialized
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops
[dotenv@17.2.3] injecting env (0) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
üöÄ Server is running on http://localhost:5000
üìù Environment: development
üîó Health check: http://localhost:5000/health
‚öôÔ∏è  Background workers initialized
üîå WebSocket server ready
‚ö†Ô∏è  HTTP mode - SSL/HTTPS not enabled (development only)
‚úÖ Reminder scheduler started (runs every hour)
üîÑ Starting background document processor (polling every 30s)
‚úÖ System roles initialized
‚úÖ Redis connected
‚úÖ Cache service connected to Redis
‚úÖ Supabase storage bucket already exists: user-files
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
üîå Client connected: VD1D63wozps7zWnSAAAB (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ Supabase Storage initialized
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
üöÄ Server is running on http://localhost:5000
üìù Environment: development
üîó Health check: http://localhost:5000/health
‚öôÔ∏è  Background workers initialized
üîå WebSocket server ready
‚ö†Ô∏è  HTTP mode - SSL/HTTPS not enabled (development only)
‚úÖ Reminder scheduler started (runs every hour)
üîÑ Starting background document processor (polling every 30s)
‚úÖ System roles initialized
‚úÖ Redis connected
‚úÖ Cache service connected to Redis
‚úÖ Supabase storage bucket already exists: user-files
üîå Client connected: oRH3hzO5zVAv8L91AAAB (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ Supabase Storage initialized
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
üöÄ Server is running on http://localhost:5000
üìù Environment: development
üîó Health check: http://localhost:5000/health
‚öôÔ∏è  Background workers initialized
üîå WebSocket server ready
‚ö†Ô∏è  HTTP mode - SSL/HTTPS not enabled (development only)
‚úÖ Reminder scheduler started (runs every hour)
üîÑ Starting background document processor (polling every 30s)
‚úÖ System roles initialized
‚úÖ Redis connected
‚úÖ Cache service connected to Redis
‚úÖ Supabase storage bucket already exists: user-files
üîå Client connected: WPTWhUTDfp4-V_nLAAAB (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE "public"."folders"."userId" = $1 ORDER BY "public"."folders"."name" ASC OFFSET $2
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
üîç getFolderTree returning: 0 folders (includeAll: true)
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE "public"."folders"."userId" = $1 ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: true)
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2,$3) OFFSET $4

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 2966da53-5ba1-46db-bda6-0731ce032df0
   filename: "Koda blueprint (1).docx"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/c7152d47-7275-4f9b-8d49-8d822f876eca-1762557111533"
   mimeType: "application/vnd.openxmlformats-officedocument.wordprocessingml.document"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2,$3) OFFSET $4

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 2966da53-5ba1-46db-bda6-0731ce032df0
   filename: "Koda blueprint (1).docx"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/c7152d47-7275-4f9b-8d49-8d822f876eca-1762557111533"
   mimeType: "application/vnd.openxmlformats-officedocument.wordprocessingml.document"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2,$3) OFFSET $4

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 2966da53-5ba1-46db-bda6-0731ce032df0
   filename: "Koda blueprint (1).docx"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/c7152d47-7275-4f9b-8d49-8d822f876eca-1762557111533"
   mimeType: "application/vnd.openxmlformats-officedocument.wordprocessingml.document"
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2,$3) OFFSET $4

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 2966da53-5ba1-46db-bda6-0731ce032df0
   filename: "Koda blueprint (1).docx"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/c7152d47-7275-4f9b-8d49-8d822f876eca-1762557111533"
   mimeType: "application/vnd.openxmlformats-officedocument.wordprocessingml.document"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE "public"."folders"."userId" = $1 ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: true)
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2,$3) OFFSET $4

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 2966da53-5ba1-46db-bda6-0731ce032df0
   filename: "Koda blueprint (1).docx"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/c7152d47-7275-4f9b-8d49-8d822f876eca-1762557111533"
   mimeType: "application/vnd.openxmlformats-officedocument.wordprocessingml.document"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
‚ö†Ô∏è getSignedUploadUrl called - Supabase uploads should use server-side uploadFile()
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìù [createDocumentAfterUpload] Processing upload:
   Filename: CapiÃÅtulo 8 (Framework Scrum).pdf
   File hash: a588fce227c4c89d381e35ed945bedf5808afe4741dd23fc1d12cc31fa46989d
   File size: 2608382
   Folder ID: null (no folder)
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2,$3) OFFSET $4
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."fileHash" = $2 AND "public"."documents"."status" = $3) LIMIT $4 OFFSET $5
‚úÖ New file detected: CapiÃÅtulo 8 (Framework Scrum).pdf
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2,$3) OFFSET $4

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 2966da53-5ba1-46db-bda6-0731ce032df0
   filename: "Koda blueprint (1).docx"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/c7152d47-7275-4f9b-8d49-8d822f876eca-1762557111533"
   mimeType: "application/vnd.openxmlformats-officedocument.wordprocessingml.document"
prisma:query BEGIN
prisma:query INSERT INTO "public"."documents" ("id","userId","folderId","filename","encryptedFilename","fileSize","mimeType","fileHash","status","isEncrypted","createdAt","updatedAt") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12) RETURNING "public"."documents"."id"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."id" = $1 LIMIT $2 OFFSET $3
prisma:query COMMIT
üöÄ Starting async processing for: CapiÃÅtulo 8 (Framework Scrum).pdf (Document ID: 8e7a902f-b0ef-4c93-baa6-922dd3a2dff2)
üìÑ Processing document: CapiÃÅtulo 8 (Framework Scrum).pdf
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=false, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE ("public"."folders"."userId" = $1 AND "public"."folders"."parentFolderId" IS NULL) ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: false)
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
Supabase download error for c4f8906d-fbc7-4445-8de3-28dcdc5615ae/a6754463-c608-4508-a450-1007a3229a4f-1762557306952: {
  "__isStorageError": true,
  "name": "StorageUnknownError",
  "originalError": {}
}
Error downloading from Supabase (c4f8906d-fbc7-4445-8de3-28dcdc5615ae/a6754463-c608-4508-a450-1007a3229a4f-1762557306952): Error: Supabase download error: {}
    at SupabaseStorageService.download (C:\Users\Pedro\Desktop\webapp\backend\src\services\supabaseStorage.service.ts:69:15)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async downloadFile (C:\Users\Pedro\Desktop\webapp\backend\src\config\storage.ts:55:18)
    at async processDocumentAsync (C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:1138:22)
    at async C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:1073:7
‚ùå Error processing document: Error: Supabase download error: {}
    at SupabaseStorageService.download (C:\Users\Pedro\Desktop\webapp\backend\src\services\supabaseStorage.service.ts:69:15)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async downloadFile (C:\Users\Pedro\Desktop\webapp\backend\src\config\storage.ts:55:18)
    at async processDocumentAsync (C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:1138:22)
    at async C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:1073:7
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=false, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2,$3,$4) OFFSET $5
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE ("public"."folders"."userId" = $1 AND "public"."folders"."parentFolderId" IS NULL) ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: false)
prisma:query UPDATE "public"."documents" SET "status" = $1, "updatedAt" = $2 WHERE ("public"."documents"."id" = $3 AND 1=1) RETURNING "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt"
‚úÖ Document processing completed: CapiÃÅtulo 8 (Framework Scrum).pdf
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2,$3,$4) OFFSET $5

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 8e7a902f-b0ef-4c93-baa6-922dd3a2dff2
   filename: "CapiÃÅtulo 8 (Framework Scrum).pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/a6754463-c608-4508-a450-1007a3229a4f-1762557306952"
   mimeType: "application/pdf"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2,$3,$4) OFFSET $5
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2,$3,$4) OFFSET $5

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 8e7a902f-b0ef-4c93-baa6-922dd3a2dff2
   filename: "CapiÃÅtulo 8 (Framework Scrum).pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/a6754463-c608-4508-a450-1007a3229a4f-1762557306952"
   mimeType: "application/pdf"
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ Supabase Storage initialized
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops
[dotenv@17.2.3] injecting env (0) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
üöÄ Server is running on http://localhost:5000
üìù Environment: development
üîó Health check: http://localhost:5000/health
‚öôÔ∏è  Background workers initialized
üîå WebSocket server ready
‚ö†Ô∏è  HTTP mode - SSL/HTTPS not enabled (development only)
‚úÖ Reminder scheduler started (runs every hour)
üîÑ Starting background document processor (polling every 30s)
‚úÖ System roles initialized
‚úÖ Redis connected
‚úÖ Cache service connected to Redis
üîå Client connected: VjJjQoRMCVSuspkyAAAB (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
‚úÖ Supabase storage bucket already exists: user-files
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE "public"."folders"."userId" = $1 ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: true)
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE "public"."folders"."userId" = $1 ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: true)
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2,$3,$4) OFFSET $5
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2,$3,$4) OFFSET $5
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2,$3,$4) OFFSET $5

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 8e7a902f-b0ef-4c93-baa6-922dd3a2dff2
   filename: "CapiÃÅtulo 8 (Framework Scrum).pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/a6754463-c608-4508-a450-1007a3229a4f-1762557306952"
   mimeType: "application/pdf"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2,$3,$4) OFFSET $5

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 8e7a902f-b0ef-4c93-baa6-922dd3a2dff2
   filename: "CapiÃÅtulo 8 (Framework Scrum).pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/a6754463-c608-4508-a450-1007a3229a4f-1762557306952"
   mimeType: "application/pdf"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2,$3,$4) OFFSET $5
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE "public"."folders"."userId" = $1 ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: true)
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2,$3,$4) OFFSET $5
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2,$3,$4) OFFSET $5

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 8e7a902f-b0ef-4c93-baa6-922dd3a2dff2
   filename: "CapiÃÅtulo 8 (Framework Scrum).pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/a6754463-c608-4508-a450-1007a3229a4f-1762557306952"
   mimeType: "application/pdf"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2,$3,$4) OFFSET $5

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 8e7a902f-b0ef-4c93-baa6-922dd3a2dff2
   filename: "CapiÃÅtulo 8 (Framework Scrum).pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/a6754463-c608-4508-a450-1007a3229a4f-1762557306952"
   mimeType: "application/pdf"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2,$3,$4) OFFSET $5
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
‚ö†Ô∏è getSignedUploadUrl called - Supabase uploads should use server-side uploadFile()
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2,$3,$4) OFFSET $5

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 8e7a902f-b0ef-4c93-baa6-922dd3a2dff2
   filename: "CapiÃÅtulo 8 (Framework Scrum).pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/a6754463-c608-4508-a450-1007a3229a4f-1762557306952"
   mimeType: "application/pdf"
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2,$3,$4) OFFSET $5
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìù [createDocumentAfterUpload] Processing upload:
   Filename: Koda Presentation Port Final.pptx
   File hash: 78ccef97ffec6f3c6010dc162490aec82ace470ea53e0f9001b7c38a9d7b8ac8
   File size: 2902035
   Folder ID: null (no folder)
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2,$3,$4) OFFSET $5

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 8e7a902f-b0ef-4c93-baa6-922dd3a2dff2
   filename: "CapiÃÅtulo 8 (Framework Scrum).pdf"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/a6754463-c608-4508-a450-1007a3229a4f-1762557306952"
   mimeType: "application/pdf"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."fileHash" = $2 AND "public"."documents"."status" = $3) LIMIT $4 OFFSET $5
‚úÖ New file detected: Koda Presentation Port Final.pptx
prisma:query BEGIN
prisma:query INSERT INTO "public"."documents" ("id","userId","folderId","filename","encryptedFilename","fileSize","mimeType","fileHash","status","isEncrypted","createdAt","updatedAt") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12) RETURNING "public"."documents"."id"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."id" = $1 LIMIT $2 OFFSET $3
prisma:query COMMIT
üöÄ Starting async processing for: Koda Presentation Port Final.pptx (Document ID: 6aae85ad-7876-44fc-be9f-7be8c48ef0db)
üìÑ Processing document: Koda Presentation Port Final.pptx
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
Supabase download error for c4f8906d-fbc7-4445-8de3-28dcdc5615ae/12e4b7a0-1501-48b3-aa15-8331b2577306-1762557476014: {
  "__isStorageError": true,
  "name": "StorageUnknownError",
  "originalError": {}
}
Error downloading from Supabase (c4f8906d-fbc7-4445-8de3-28dcdc5615ae/12e4b7a0-1501-48b3-aa15-8331b2577306-1762557476014): Error: Supabase download error: {}
    at SupabaseStorageService.download (C:\Users\Pedro\Desktop\webapp\backend\src\services\supabaseStorage.service.ts:69:15)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async downloadFile (C:\Users\Pedro\Desktop\webapp\backend\src\config\storage.ts:55:18)
    at async processDocumentAsync (C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:1138:22)
    at async C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:1073:7
‚ùå Error processing document: Error: Supabase download error: {}
    at SupabaseStorageService.download (C:\Users\Pedro\Desktop\webapp\backend\src\services\supabaseStorage.service.ts:69:15)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async downloadFile (C:\Users\Pedro\Desktop\webapp\backend\src\config\storage.ts:55:18)
    at async processDocumentAsync (C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:1138:22)
    at async C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:1073:7
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=false, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query UPDATE "public"."documents" SET "status" = $1, "updatedAt" = $2 WHERE ("public"."documents"."id" = $3 AND 1=1) RETURNING "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt"
‚úÖ Document processing completed: Koda Presentation Port Final.pptx
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE ("public"."folders"."userId" = $1 AND "public"."folders"."parentFolderId" IS NULL) ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: false)
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2,$3,$4,$5) OFFSET $6
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=false, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE ("public"."folders"."userId" = $1 AND "public"."folders"."parentFolderId" IS NULL) ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: false)
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2,$3,$4,$5) OFFSET $6

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 6aae85ad-7876-44fc-be9f-7be8c48ef0db
   filename: "Koda Presentation Port Final.pptx"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/12e4b7a0-1501-48b3-aa15-8331b2577306-1762557476014"
   mimeType: "application/vnd.openxmlformats-officedocument.presentationml.presentation"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2,$3,$4,$5) OFFSET $6
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2,$3,$4,$5) OFFSET $6

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 6aae85ad-7876-44fc-be9f-7be8c48ef0db
   filename: "Koda Presentation Port Final.pptx"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/12e4b7a0-1501-48b3-aa15-8331b2577306-1762557476014"
   mimeType: "application/vnd.openxmlformats-officedocument.presentationml.presentation"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT 1
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE "public"."folders"."userId" = $1 ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: true)
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE "public"."folders"."userId" = $1 ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: true)
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2,$3,$4,$5) OFFSET $6
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2,$3,$4,$5) OFFSET $6

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 6aae85ad-7876-44fc-be9f-7be8c48ef0db
   filename: "Koda Presentation Port Final.pptx"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/12e4b7a0-1501-48b3-aa15-8331b2577306-1762557476014"
   mimeType: "application/vnd.openxmlformats-officedocument.presentationml.presentation"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2,$3,$4,$5) OFFSET $6
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2,$3,$4,$5) OFFSET $6
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2,$3,$4,$5) OFFSET $6

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 6aae85ad-7876-44fc-be9f-7be8c48ef0db
   filename: "Koda Presentation Port Final.pptx"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/12e4b7a0-1501-48b3-aa15-8331b2577306-1762557476014"
   mimeType: "application/vnd.openxmlformats-officedocument.presentationml.presentation"
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2,$3,$4,$5) OFFSET $6

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 6aae85ad-7876-44fc-be9f-7be8c48ef0db
   filename: "Koda Presentation Port Final.pptx"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/12e4b7a0-1501-48b3-aa15-8331b2577306-1762557476014"
   mimeType: "application/vnd.openxmlformats-officedocument.presentationml.presentation"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2,$3,$4,$5) OFFSET $6
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2,$3,$4,$5) OFFSET $6

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 6aae85ad-7876-44fc-be9f-7be8c48ef0db
   filename: "Koda Presentation Port Final.pptx"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/12e4b7a0-1501-48b3-aa15-8331b2577306-1762557476014"
   mimeType: "application/vnd.openxmlformats-officedocument.presentationml.presentation"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2,$3,$4,$5) OFFSET $6
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE "public"."folders"."userId" = $1 ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: true)
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2,$3,$4,$5) OFFSET $6

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 6aae85ad-7876-44fc-be9f-7be8c48ef0db
   filename: "Koda Presentation Port Final.pptx"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/12e4b7a0-1501-48b3-aa15-8331b2577306-1762557476014"
   mimeType: "application/vnd.openxmlformats-officedocument.presentationml.presentation"
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2,$3,$4,$5) OFFSET $6
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2,$3,$4,$5) OFFSET $6

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 6aae85ad-7876-44fc-be9f-7be8c48ef0db
   filename: "Koda Presentation Port Final.pptx"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/12e4b7a0-1501-48b3-aa15-8331b2577306-1762557476014"
   mimeType: "application/vnd.openxmlformats-officedocument.presentationml.presentation"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE "public"."folders"."userId" = $1 ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: true)
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2,$3,$4,$5) OFFSET $6
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2,$3,$4,$5) OFFSET $6
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2,$3,$4,$5) OFFSET $6

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 6aae85ad-7876-44fc-be9f-7be8c48ef0db
   filename: "Koda Presentation Port Final.pptx"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/12e4b7a0-1501-48b3-aa15-8331b2577306-1762557476014"
   mimeType: "application/vnd.openxmlformats-officedocument.presentationml.presentation"
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2,$3,$4,$5) OFFSET $6

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: 6aae85ad-7876-44fc-be9f-7be8c48ef0db
   filename: "Koda Presentation Port Final.pptx"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/12e4b7a0-1501-48b3-aa15-8331b2577306-1762557476014"
   mimeType: "application/vnd.openxmlformats-officedocument.presentationml.presentation"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
‚ö†Ô∏è getSignedUploadUrl called - Supabase uploads should use server-side uploadFile()
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìù [createDocumentAfterUpload] Processing upload:
   Filename: Lone Mountain Ranch P&L 2025 (Budget).xlsx
   File hash: 8b41322717258a3314bce5bbf580499c1a3acbcce67f98cc8a916f7017a3970d
   File size: 48374
   Folder ID: null (no folder)
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."fileHash" = $2 AND "public"."documents"."status" = $3) LIMIT $4 OFFSET $5
‚úÖ New file detected: Lone Mountain Ranch P&L 2025 (Budget).xlsx
prisma:query BEGIN
prisma:query INSERT INTO "public"."documents" ("id","userId","folderId","filename","encryptedFilename","fileSize","mimeType","fileHash","status","isEncrypted","createdAt","updatedAt") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12) RETURNING "public"."documents"."id"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."id" = $1 LIMIT $2 OFFSET $3
prisma:query COMMIT
üöÄ Starting async processing for: Lone Mountain Ranch P&L 2025 (Budget).xlsx (Document ID: b895ff62-4d0a-468b-9b00-1db136a3cf59)
üìÑ Processing document: Lone Mountain Ranch P&L 2025 (Budget).xlsx
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT 1
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=false, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=false, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE ("public"."folders"."userId" = $1 AND "public"."folders"."parentFolderId" IS NULL) ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: false)
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE ("public"."folders"."userId" = $1 AND "public"."folders"."parentFolderId" IS NULL) ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: false)
Supabase download error for c4f8906d-fbc7-4445-8de3-28dcdc5615ae/ed15575b-8671-40d2-8da2-1afe991120c9-1762557557383: {
  "__isStorageError": true,
  "name": "StorageUnknownError",
  "originalError": {}
}
Error downloading from Supabase (c4f8906d-fbc7-4445-8de3-28dcdc5615ae/ed15575b-8671-40d2-8da2-1afe991120c9-1762557557383): Error: Supabase download error: {}
    at SupabaseStorageService.download (C:\Users\Pedro\Desktop\webapp\backend\src\services\supabaseStorage.service.ts:69:15)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async downloadFile (C:\Users\Pedro\Desktop\webapp\backend\src\config\storage.ts:55:18)
    at async processDocumentAsync (C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:1138:22)
    at async C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:1073:7
‚ùå Error processing document: Error: Supabase download error: {}
    at SupabaseStorageService.download (C:\Users\Pedro\Desktop\webapp\backend\src\services\supabaseStorage.service.ts:69:15)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async downloadFile (C:\Users\Pedro\Desktop\webapp\backend\src\config\storage.ts:55:18)
    at async processDocumentAsync (C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:1138:22)
    at async C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:1073:7
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2,$3,$4,$5,$6) OFFSET $7
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2,$3,$4,$5,$6) OFFSET $7
prisma:query UPDATE "public"."documents" SET "status" = $1, "updatedAt" = $2 WHERE ("public"."documents"."id" = $3 AND 1=1) RETURNING "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt"
‚úÖ Document processing completed: Lone Mountain Ranch P&L 2025 (Budget).xlsx
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2,$3,$4,$5,$6) OFFSET $7

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: b895ff62-4d0a-468b-9b00-1db136a3cf59
   filename: "Lone Mountain Ranch P&L 2025 (Budget).xlsx"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/ed15575b-8671-40d2-8da2-1afe991120c9-1762557557383"
   mimeType: "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2,$3,$4,$5,$6) OFFSET $7

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: b895ff62-4d0a-468b-9b00-1db136a3cf59
   filename: "Lone Mountain Ranch P&L 2025 (Budget).xlsx"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/ed15575b-8671-40d2-8da2-1afe991120c9-1762557557383"
   mimeType: "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT 1
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2,$3,$4,$5,$6) OFFSET $7
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2,$3,$4,$5,$6) OFFSET $7

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: b895ff62-4d0a-468b-9b00-1db136a3cf59
   filename: "Lone Mountain Ranch P&L 2025 (Budget).xlsx"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/ed15575b-8671-40d2-8da2-1afe991120c9-1762557557383"
   mimeType: "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=false, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE ("public"."folders"."userId" = $1 AND "public"."folders"."parentFolderId" IS NULL) ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: false)
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT 1
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE "public"."folders"."userId" = $1 ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: true)
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2,$3,$4,$5) OFFSET $6
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2,$3,$4,$5) OFFSET $6

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: b895ff62-4d0a-468b-9b00-1db136a3cf59
   filename: "Lone Mountain Ranch P&L 2025 (Budget).xlsx"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/ed15575b-8671-40d2-8da2-1afe991120c9-1762557557383"
   mimeType: "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2,$3,$4,$5,$6) OFFSET $7
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2,$3,$4,$5,$6) OFFSET $7

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: b895ff62-4d0a-468b-9b00-1db136a3cf59
   filename: "Lone Mountain Ranch P&L 2025 (Budget).xlsx"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/ed15575b-8671-40d2-8da2-1afe991120c9-1762557557383"
   mimeType: "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE "public"."folders"."userId" = $1 ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: true)
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2,$3,$4,$5,$6) OFFSET $7
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2,$3,$4,$5) OFFSET $6
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2,$3,$4,$5,$6) OFFSET $7

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: b895ff62-4d0a-468b-9b00-1db136a3cf59
   filename: "Lone Mountain Ranch P&L 2025 (Budget).xlsx"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/ed15575b-8671-40d2-8da2-1afe991120c9-1762557557383"
   mimeType: "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2,$3,$4,$5) OFFSET $6

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: b895ff62-4d0a-468b-9b00-1db136a3cf59
   filename: "Lone Mountain Ranch P&L 2025 (Budget).xlsx"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/ed15575b-8671-40d2-8da2-1afe991120c9-1762557557383"
   mimeType: "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3

‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üì§ UPLOADING DOCUMENT: passport_with_number (1) (1).png
üë§ User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae
üîê Hash: 58f5d81808c17e80eb54d3e79234b70dc5cb3b5afe3e7df8205c7ecee89f9d66
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."fileHash" = $2 AND "public"."documents"."status" = $3) LIMIT $4 OFFSET $5
‚úÖ New file detected, proceeding with upload...
üîí Encrypting file: passport_with_number (1) (1).png (2463026 bytes)
‚úÖ File encrypted successfully (2463058 bytes)
üì§ Uploading to Supabase: c4f8906d-fbc7-4445-8de3-28dcdc5615ae/0c0850ac-ad0b-44c4-a9ef-816c69eb8788-1762557645947 (2463058 bytes)
‚úÖ Uploaded to Supabase: c4f8906d-fbc7-4445-8de3-28dcdc5615ae/0c0850ac-ad0b-44c4-a9ef-816c69eb8788-1762557645947 (2463058 bytes)
prisma:query BEGIN
prisma:query INSERT INTO "public"."documents" ("id","userId","folderId","filename","encryptedFilename","fileSize","mimeType","fileHash","status","isEncrypted","encryptionIV","encryptionAuthTag","createdAt","updatedAt") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14) RETURNING "public"."documents"."id"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."id" = $1 LIMIT $2 OFFSET $3
prisma:query COMMIT
üîÑ Starting document processing asynchronously...
üìÑ Processing document in background: passport_with_number (1) (1).png
üîÑ Starting document processing pipeline for: passport_with_number (1) (1).png
üñºÔ∏è Using Gemini Vision for image OCR...
‚úÖ Document created, processing in background: passport_with_number (1) (1).png
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=false, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=false, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT 1
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE ("public"."folders"."userId" = $1 AND "public"."folders"."parentFolderId" IS NULL) ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: false)
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE ("public"."folders"."userId" = $1 AND "public"."folders"."parentFolderId" IS NULL) ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: false)
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: aff56afa-eff4-4f50-b0f6-24e0a21db021
   filename: "passport_with_number (1) (1).png"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/0c0850ac-ad0b-44c4-a9ef-816c69eb8788-1762557645947"
   mimeType: "image/png"
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: aff56afa-eff4-4f50-b0f6-24e0a21db021
   filename: "passport_with_number (1) (1).png"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/0c0850ac-ad0b-44c4-a9ef-816c69eb8788-1762557645947"
   mimeType: "image/png"
‚úÖ Text extracted (329 characters)
üìù Converting document to markdown...
üîÑ Converting passport_with_number (1) (1).png to markdown (image/png)
‚ö†Ô∏è Markdown conversion failed (non-critical): Error: Unsupported document type: image/png
    at MarkdownConversionService.convertToMarkdown (C:\Users\Pedro\Desktop\webapp\backend\src\services\markdownConversion.service.ts:89:15)
    at processDocumentWithTimeout (C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:594:62)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async processDocumentInBackground (C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:189:5)
üìÅ Document will appear in Recently Added (auto-categorization disabled)
ü§ñ Analyzing document with OpenAI...
‚úÖ Document analyzed
üîç Enriching document metadata with semantic analysis...
üîç [Metadata Enrichment] Enriching document metadata...
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
‚úÖ [Metadata Enrichment] Completed in 10.44s
   Topics: 4
   Entities: 8
   Summary: 210 chars
   Key Points: 5
‚úÖ Metadata enriched: 4 topics, 5 key points, sentiment: neutral
prisma:query INSERT INTO "public"."document_metadata" ("id","documentId","extractedText","ocrConfidence","pageCount","wordCount","thumbnailUrl","entities","classification","summary","hasSignature","hasTables","hasImages","markdownContent","slidesData","pptxMetadata","slideGenerationStatus","createdAt","updatedAt") VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19) ON CONFLICT ("documentId") DO UPDATE SET "extractedText" = $20, "ocrConfidence" = $21, "classification" = $22, "entities" = $23, "summary" = $24, "thumbnailUrl" = $25, "pageCount" = $26, "wordCount" = $27, "markdownContent" = $28, "slidesData" = $29, "pptxMetadata" = $30, "updatedAt" = $31 WHERE ("public"."document_metadata"."documentId" = $32 AND 1=1) RETURNING "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt"
üè∑Ô∏è Auto-generating tags...
‚úÖ Generated 7 tags: passport, 2027, usa, document, identification, jane doe, travel
prisma:query SELECT "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt" FROM "public"."tags" WHERE (("public"."tags"."userId" = $1 AND "public"."tags"."name" = $2) AND 1=1) LIMIT $3 OFFSET $4
prisma:query INSERT INTO "public"."tags" ("id","userId","name","createdAt") VALUES ($1,$2,$3,$4) RETURNING "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt"
prisma:query BEGIN
prisma:query SELECT "public"."document_tags"."id" FROM "public"."document_tags" WHERE (("public"."document_tags"."documentId" = $1 AND "public"."document_tags"."tagId" = $2) AND 1=1) OFFSET $3
prisma:query INSERT INTO "public"."document_tags" ("id","documentId","tagId","createdAt") VALUES ($1,$2,$3,$4) RETURNING "public"."document_tags"."id"
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."id" = $1 LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query SELECT "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt" FROM "public"."tags" WHERE (("public"."tags"."userId" = $1 AND "public"."tags"."name" = $2) AND 1=1) LIMIT $3 OFFSET $4
prisma:query INSERT INTO "public"."tags" ("id","userId","name","createdAt") VALUES ($1,$2,$3,$4) RETURNING "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt"
prisma:query BEGIN
prisma:query SELECT "public"."document_tags"."id" FROM "public"."document_tags" WHERE (("public"."document_tags"."documentId" = $1 AND "public"."document_tags"."tagId" = $2) AND 1=1) OFFSET $3
prisma:query INSERT INTO "public"."document_tags" ("id","documentId","tagId","createdAt") VALUES ($1,$2,$3,$4) RETURNING "public"."document_tags"."id"
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."id" = $1 LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query SELECT "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt" FROM "public"."tags" WHERE (("public"."tags"."userId" = $1 AND "public"."tags"."name" = $2) AND 1=1) LIMIT $3 OFFSET $4
prisma:query INSERT INTO "public"."tags" ("id","userId","name","createdAt") VALUES ($1,$2,$3,$4) RETURNING "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt"
prisma:query BEGIN
prisma:query SELECT "public"."document_tags"."id" FROM "public"."document_tags" WHERE (("public"."document_tags"."documentId" = $1 AND "public"."document_tags"."tagId" = $2) AND 1=1) OFFSET $3
prisma:query INSERT INTO "public"."document_tags" ("id","documentId","tagId","createdAt") VALUES ($1,$2,$3,$4) RETURNING "public"."document_tags"."id"
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."id" = $1 LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query SELECT 1
prisma:query SELECT "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt" FROM "public"."tags" WHERE (("public"."tags"."userId" = $1 AND "public"."tags"."name" = $2) AND 1=1) LIMIT $3 OFFSET $4
prisma:query INSERT INTO "public"."tags" ("id","userId","name","createdAt") VALUES ($1,$2,$3,$4) RETURNING "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt"
prisma:query BEGIN
prisma:query SELECT "public"."document_tags"."id" FROM "public"."document_tags" WHERE (("public"."document_tags"."documentId" = $1 AND "public"."document_tags"."tagId" = $2) AND 1=1) OFFSET $3
prisma:query INSERT INTO "public"."document_tags" ("id","documentId","tagId","createdAt") VALUES ($1,$2,$3,$4) RETURNING "public"."document_tags"."id"
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."id" = $1 LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query SELECT "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt" FROM "public"."tags" WHERE (("public"."tags"."userId" = $1 AND "public"."tags"."name" = $2) AND 1=1) LIMIT $3 OFFSET $4
prisma:query INSERT INTO "public"."tags" ("id","userId","name","createdAt") VALUES ($1,$2,$3,$4) RETURNING "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt"
prisma:query BEGIN
prisma:query SELECT "public"."document_tags"."id" FROM "public"."document_tags" WHERE (("public"."document_tags"."documentId" = $1 AND "public"."document_tags"."tagId" = $2) AND 1=1) OFFSET $3
prisma:query INSERT INTO "public"."document_tags" ("id","documentId","tagId","createdAt") VALUES ($1,$2,$3,$4) RETURNING "public"."document_tags"."id"
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."id" = $1 LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query SELECT "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt" FROM "public"."tags" WHERE (("public"."tags"."userId" = $1 AND "public"."tags"."name" = $2) AND 1=1) LIMIT $3 OFFSET $4
prisma:query INSERT INTO "public"."tags" ("id","userId","name","createdAt") VALUES ($1,$2,$3,$4) RETURNING "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt"
prisma:query BEGIN
prisma:query SELECT "public"."document_tags"."id" FROM "public"."document_tags" WHERE (("public"."document_tags"."documentId" = $1 AND "public"."document_tags"."tagId" = $2) AND 1=1) OFFSET $3
prisma:query INSERT INTO "public"."document_tags" ("id","documentId","tagId","createdAt") VALUES ($1,$2,$3,$4) RETURNING "public"."document_tags"."id"
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."id" = $1 LIMIT $2 OFFSET $3
prisma:query COMMIT
prisma:query SELECT "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt" FROM "public"."tags" WHERE (("public"."tags"."userId" = $1 AND "public"."tags"."name" = $2) AND 1=1) LIMIT $3 OFFSET $4
prisma:query INSERT INTO "public"."tags" ("id","userId","name","createdAt") VALUES ($1,$2,$3,$4) RETURNING "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt"
prisma:query BEGIN
prisma:query SELECT "public"."document_tags"."id" FROM "public"."document_tags" WHERE (("public"."document_tags"."documentId" = $1 AND "public"."document_tags"."tagId" = $2) AND 1=1) OFFSET $3
prisma:query INSERT INTO "public"."document_tags" ("id","documentId","tagId","createdAt") VALUES ($1,$2,$3,$4) RETURNING "public"."document_tags"."id"
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."id" = $1 LIMIT $2 OFFSET $3
prisma:query COMMIT
üîÆ Generating semantic chunks and vector embeddings...
üìù Using standard text chunking...
üìÑ Short document (47 words) - creating single chunk
üì¶ Split document into 1 chunks
üîÆ Generating embeddings with Gemini...
‚ö° [Embedding Service] BATCH generating embeddings for 1 texts...
   üì¶ Processing batch 1/1 (1 texts in ONE API call)...
üíæ Cached embedding for text (length: 329)
   ‚úÖ Batch 1/1 completed (1 embeddings)
‚úÖ [Embedding Service] Generated 1 embeddings in 1.06s
‚ö° [Store Embeddings] Processing 1 chunks for document aff56afa-eff4-4f50-b0f6-24e0a21db021...
üóëÔ∏è [Pinecone] Deleting all vectors for document: aff56afa-eff4-4f50-b0f6-24e0a21db021
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
‚ö†Ô∏è [Pinecone] No vectors found for document aff56afa-eff4-4f50-b0f6-24e0a21db021
‚ö° [Batch Embedding] Processing 1 chunks in parallel...
üì¶ [Batch Embedding] Cache hits: 0/1
   üîÆ Generating batch embeddings for 1 chunks in ONE API call...
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE "public"."folders"."userId" = $1 ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: true)
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE "public"."folders"."userId" = $1 ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: true)
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2,$3,$4,$5) OFFSET $6
üíæ Cached embedding for text (length: 329)
   ‚úÖ Batch 1/1 completed in 0.3s
‚ö° [Batch Embedding] Completed in 328ms (328ms per chunk)
üíæ [Store Embeddings] Saving to Pinecone...
prisma:query SELECT "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt" FROM "public"."tags" WHERE "public"."tags"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2,$3,$4,$5) OFFSET $6

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: aff56afa-eff4-4f50-b0f6-24e0a21db021
   filename: "passport_with_number (1) (1).png"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/0c0850ac-ad0b-44c4-a9ef-816c69eb8788-1762557645947"
   mimeType: "image/png"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) ORDER BY "public"."documents"."createdAt" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2,$3,$4,$5) OFFSET $6
prisma:query SELECT "public"."document_tags"."id", "public"."document_tags"."documentId", "public"."document_tags"."tagId", "public"."document_tags"."createdAt" FROM "public"."document_tags" WHERE "public"."document_tags"."documentId" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
prisma:query SELECT "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt" FROM "public"."tags" WHERE "public"."tags"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
prisma:query SELECT "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt" FROM "public"."tags" WHERE "public"."tags"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
prisma:query SELECT "public"."tags"."id", "public"."tags"."userId", "public"."tags"."name", "public"."tags"."color", "public"."tags"."createdAt" FROM "public"."tags" WHERE "public"."tags"."id" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: aff56afa-eff4-4f50-b0f6-24e0a21db021
   filename: "passport_with_number (1) (1).png"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/0c0850ac-ad0b-44c4-a9ef-816c69eb8788-1762557645947"
   mimeType: "image/png"
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2,$3,$4,$5) OFFSET $6

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: aff56afa-eff4-4f50-b0f6-24e0a21db021
   filename: "passport_with_number (1) (1).png"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/0c0850ac-ad0b-44c4-a9ef-816c69eb8788-1762557645947"
   mimeType: "image/png"
prisma:query SELECT "public"."document_metadata"."id", "public"."document_metadata"."documentId", "public"."document_metadata"."extractedText", "public"."document_metadata"."ocrConfidence", "public"."document_metadata"."pageCount", "public"."document_metadata"."wordCount", "public"."document_metadata"."characterCount", "public"."document_metadata"."thumbnailUrl", "public"."document_metadata"."entities", "public"."document_metadata"."classification", "public"."document_metadata"."summary", "public"."document_metadata"."author", "public"."document_metadata"."creationDate", "public"."document_metadata"."modificationDate", "public"."document_metadata"."language", "public"."document_metadata"."topics", "public"."document_metadata"."keyEntities", "public"."document_metadata"."hasSignature", "public"."document_metadata"."hasTables", "public"."document_metadata"."hasImages", "public"."document_metadata"."markdownContent", "public"."document_metadata"."markdownUrl", "public"."document_metadata"."markdownStructure", "public"."document_metadata"."sheetCount", "public"."document_metadata"."slideCount", "public"."document_metadata"."slidesData", "public"."document_metadata"."pptxMetadata", "public"."document_metadata"."slideGenerationStatus", "public"."document_metadata"."slideGenerationError", "public"."document_metadata"."createdAt", "public"."document_metadata"."updatedAt" FROM "public"."document_metadata" WHERE "public"."document_metadata"."documentId" IN ($1,$2,$3,$4,$5,$6,$7) OFFSET $8

üìÑ [LIST DOCUMENTS] Sample document fields:
   Document ID: aff56afa-eff4-4f50-b0f6-24e0a21db021
   filename: "passport_with_number (1) (1).png"
   encryptedFilename: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae/0c0850ac-ad0b-44c4-a9ef-816c69eb8788-1762557645947"
   mimeType: "image/png"
‚úÖ [Pinecone] Upserted batch 1/1
‚úÖ [Pinecone] Upserted 1 embeddings with full metadata for document aff56afa-eff4-4f50-b0f6-24e0a21db021
‚úÖ [Store Embeddings] Completed in 3.9s (3949ms per chunk)
‚úÖ Stored 1 vector embeddings
üîç Step 7: Verifying Pinecone storage...
üîÑ Verification attempt 1/5...
üîç Verifying document aff56afa-eff4-4f50-b0f6-24e0a21db021 in Pinecone...
‚úÖ Verification passed: Found 1 vectors
‚úÖ Verification passed: Found 1 vectors in Pinecone
üîç Step 8: Extracting entities and auto-tagging...
üîç NER: Extracting entities from "passport_with_number (1) (1).png"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
‚ö†Ô∏è NER: JSON parsing failed, attempting to fix common issues...
‚ùå NER: Entity extraction failed: SyntaxError: Expected ',' or ']' after array element in JSON at position 322 (line 1 column 323)
    at JSON.parse (<anonymous>)
    at NERService.extractEntities (C:\Users\Pedro\Desktop\webapp\backend\src\services\ner.service.ts:111:28)
    at processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async processDocumentWithTimeout (C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:928:27)
    at async processDocumentInBackground (C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:189:5)
üè∑Ô∏è  Auto-tagging document aff56afa-eff4-4f50-b0f6-24e0a21db021
prisma:query SELECT "public"."documents"."id", "public"."documents"."filename" FROM "public"."documents" WHERE ("public"."documents"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
   Generated tags: 
‚úÖ Entity extraction complete: 0 entities, 0 tags
prisma:query UPDATE "public"."documents" SET "status" = $1, "updatedAt" = $2 WHERE ("public"."documents"."id" = $3 AND 1=1) RETURNING "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt"
üóëÔ∏è Invalidated cache for user c4f8906d-fbc7-4445-8de3-28dcdc5615ae after document upload
‚úÖ Document processing completed: passport_with_number (1) (1).png
‚úÖ Document processing complete: passport_with_number (1) (1).png
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ Supabase Storage initialized
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
üöÄ Server is running on http://localhost:5000
üìù Environment: development
üîó Health check: http://localhost:5000/health
‚öôÔ∏è  Background workers initialized
üîå WebSocket server ready
‚ö†Ô∏è  HTTP mode - SSL/HTTPS not enabled (development only)
‚úÖ Reminder scheduler started (runs every hour)
üîÑ Starting background document processor (polling every 30s)
‚úÖ System roles initialized
‚úÖ Redis connected
‚úÖ Cache service connected to Redis
‚úÖ Supabase storage bucket already exists: user-files
üîå Client connected: MOcRrmkc0MVX-HEbAAAB (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ Supabase Storage initialized
[dotenv@17.2.3] injecting env (0) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
üöÄ Server is running on http://localhost:5000
üìù Environment: development
üîó Health check: http://localhost:5000/health
‚öôÔ∏è  Background workers initialized
üîå WebSocket server ready
‚ö†Ô∏è  HTTP mode - SSL/HTTPS not enabled (development only)
‚úÖ Reminder scheduler started (runs every hour)
üîÑ Starting background document processor (polling every 30s)
‚úÖ System roles initialized
‚úÖ Cache service connected to Redis
‚úÖ Redis connected
‚úÖ Supabase storage bucket already exists: user-files
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
üîå Client connected: Zzh-mvkq239Ejuf0AAAB (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ Supabase Storage initialized
[dotenv@17.2.3] injecting env (0) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
üöÄ Server is running on http://localhost:5000
üìù Environment: development
üîó Health check: http://localhost:5000/health
‚öôÔ∏è  Background workers initialized
üîå WebSocket server ready
‚ö†Ô∏è  HTTP mode - SSL/HTTPS not enabled (development only)
‚úÖ Reminder scheduler started (runs every hour)
üîÑ Starting background document processor (polling every 30s)
‚úÖ System roles initialized
‚úÖ Cache service connected to Redis
‚úÖ Redis connected
‚úÖ Supabase storage bucket already exists: user-files
üîå Client connected: sV2QI3r33xjgR--cAAAB (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ Supabase Storage initialized
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com
[dotenv@17.2.3] injecting env (0) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
üöÄ Server is running on http://localhost:5000
üìù Environment: development
üîó Health check: http://localhost:5000/health
‚öôÔ∏è  Background workers initialized
üîå WebSocket server ready
‚ö†Ô∏è  HTTP mode - SSL/HTTPS not enabled (development only)
‚úÖ Reminder scheduler started (runs every hour)
üîÑ Starting background document processor (polling every 30s)
‚úÖ System roles initialized
‚úÖ Redis connected
‚úÖ Cache service connected to Redis
‚úÖ Supabase storage bucket already exists: user-files
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
üîå Client connected: Mty3CsZ3vqtM10TXAAAB (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ Supabase Storage initialized
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com
[dotenv@17.2.3] injecting env (0) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
üöÄ Server is running on http://localhost:5000
üìù Environment: development
üîó Health check: http://localhost:5000/health
‚öôÔ∏è  Background workers initialized
üîå WebSocket server ready
‚ö†Ô∏è  HTTP mode - SSL/HTTPS not enabled (development only)
‚úÖ Reminder scheduler started (runs every hour)
üîÑ Starting background document processor (polling every 30s)
‚úÖ System roles initialized
‚úÖ Cache service connected to Redis
‚úÖ Redis connected
‚úÖ Supabase storage bucket already exists: user-files
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
üîå Client connected: LWWqCnTS4tNLXjHYAAAB (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ Supabase Storage initialized
[dotenv@17.2.3] injecting env (0) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
üöÄ Server is running on http://localhost:5000
üìù Environment: development
üîó Health check: http://localhost:5000/health
‚öôÔ∏è  Background workers initialized
üîå WebSocket server ready
‚ö†Ô∏è  HTTP mode - SSL/HTTPS not enabled (development only)
‚úÖ Reminder scheduler started (runs every hour)
üîÑ Starting background document processor (polling every 30s)
‚úÖ System roles initialized
‚úÖ Cache service connected to Redis
‚úÖ Redis connected
‚úÖ Supabase storage bucket already exists: user-files
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
üîå Client connected: eFac4kM2s_0hdc-NAAAB (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ Supabase Storage initialized
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }
[dotenv@17.2.3] injecting env (0) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
üöÄ Server is running on http://localhost:5000
üìù Environment: development
üîó Health check: http://localhost:5000/health
‚öôÔ∏è  Background workers initialized
üîå WebSocket server ready
‚ö†Ô∏è  HTTP mode - SSL/HTTPS not enabled (development only)
‚úÖ Reminder scheduler started (runs every hour)
üîÑ Starting background document processor (polling every 30s)
‚úÖ System roles initialized
‚úÖ Cache service connected to Redis
‚úÖ Redis connected
üîå Client connected: DEsD-C7AnAsf4PNkAAAB (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
‚úÖ Supabase storage bucket already exists: user-files
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ Supabase Storage initialized
[dotenv@17.2.3] injecting env (0) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
üöÄ Server is running on http://localhost:5000
üìù Environment: development
üîó Health check: http://localhost:5000/health
‚öôÔ∏è  Background workers initialized
üîå WebSocket server ready
‚ö†Ô∏è  HTTP mode - SSL/HTTPS not enabled (development only)
‚úÖ Reminder scheduler started (runs every hour)
üîÑ Starting background document processor (polling every 30s)
‚úÖ System roles initialized
‚úÖ Cache service connected to Redis
‚úÖ Redis connected
üîå Client connected: mNkmZgbh4nS0v2dqAAAB (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
‚úÖ Supabase storage bucket already exists: user-files
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ Supabase Storage initialized
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
üöÄ Server is running on http://localhost:5000
üìù Environment: development
üîó Health check: http://localhost:5000/health
‚öôÔ∏è  Background workers initialized
üîå WebSocket server ready
‚ö†Ô∏è  HTTP mode - SSL/HTTPS not enabled (development only)
‚úÖ Reminder scheduler started (runs every hour)
üîÑ Starting background document processor (polling every 30s)
‚úÖ System roles initialized
‚úÖ Redis connected
‚úÖ Cache service connected to Redis
‚úÖ Supabase storage bucket already exists: user-files
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
üîå Client connected: leh7-LLT0dq4bHdxAAAB (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ Supabase Storage initialized
[dotenv@17.2.3] injecting env (0) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
üöÄ Server is running on http://localhost:5000
üìù Environment: development
üîó Health check: http://localhost:5000/health
‚öôÔ∏è  Background workers initialized
üîå WebSocket server ready
‚ö†Ô∏è  HTTP mode - SSL/HTTPS not enabled (development only)
‚úÖ Reminder scheduler started (runs every hour)
üîÑ Starting background document processor (polling every 30s)
‚úÖ System roles initialized
‚úÖ Redis connected
‚úÖ Cache service connected to Redis
‚úÖ Supabase storage bucket already exists: user-files
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
üîå Client connected: uOrjH1eA6-GnTe7aAAAB (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ Supabase Storage initialized
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
üöÄ Server is running on http://localhost:5000
üìù Environment: development
üîó Health check: http://localhost:5000/health
‚öôÔ∏è  Background workers initialized
üîå WebSocket server ready
‚ö†Ô∏è  HTTP mode - SSL/HTTPS not enabled (development only)
‚úÖ Reminder scheduler started (runs every hour)
üîÑ Starting background document processor (polling every 30s)
‚úÖ System roles initialized
‚úÖ Redis connected
‚úÖ Cache service connected to Redis
‚úÖ Supabase storage bucket already exists: user-files
üîå Client connected: LiFr99u1OlAcY_hsAAAB (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ Supabase Storage initialized
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }
[dotenv@17.2.3] injecting env (0) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
üöÄ Server is running on http://localhost:5000
üìù Environment: development
üîó Health check: http://localhost:5000/health
‚öôÔ∏è  Background workers initialized
üîå WebSocket server ready
‚ö†Ô∏è  HTTP mode - SSL/HTTPS not enabled (development only)
‚úÖ Reminder scheduler started (runs every hour)
üîÑ Starting background document processor (polling every 30s)
‚úÖ System roles initialized
‚úÖ Cache service connected to Redis
‚úÖ Redis connected
üîå Client connected: eT35EkXHHyTwRPZ-AAAB (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
‚úÖ Supabase storage bucket already exists: user-files
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ Supabase Storage initialized
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
üöÄ Server is running on http://localhost:5000
üìù Environment: development
üîó Health check: http://localhost:5000/health
‚öôÔ∏è  Background workers initialized
üîå WebSocket server ready
‚ö†Ô∏è  HTTP mode - SSL/HTTPS not enabled (development only)
‚úÖ Reminder scheduler started (runs every hour)
üîÑ Starting background document processor (polling every 30s)
‚úÖ System roles initialized
‚úÖ Redis connected
‚úÖ Cache service connected to Redis
üîå Client connected: WoJbrwSNkFoh6I7LAAAB (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
‚úÖ Supabase storage bucket already exists: user-files
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ Supabase Storage initialized
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
üöÄ Server is running on http://localhost:5000
üìù Environment: development
üîó Health check: http://localhost:5000/health
‚öôÔ∏è  Background workers initialized
üîå WebSocket server ready
‚ö†Ô∏è  HTTP mode - SSL/HTTPS not enabled (development only)
‚úÖ Reminder scheduler started (runs every hour)
üîÑ Starting background document processor (polling every 30s)
‚úÖ System roles initialized
‚úÖ Cache service connected to Redis
‚úÖ Redis connected
‚úÖ Supabase storage bucket already exists: user-files
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
üîå Client connected: RFvH8TCq-F1NVrNGAAAB (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ Supabase Storage initialized
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com
[dotenv@17.2.3] injecting env (0) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
üöÄ Server is running on http://localhost:5000
üìù Environment: development
üîó Health check: http://localhost:5000/health
‚öôÔ∏è  Background workers initialized
üîå WebSocket server ready
‚ö†Ô∏è  HTTP mode - SSL/HTTPS not enabled (development only)
‚úÖ Reminder scheduler started (runs every hour)
üîÑ Starting background document processor (polling every 30s)
‚úÖ System roles initialized
‚úÖ Redis connected
‚úÖ Cache service connected to Redis
‚úÖ Supabase storage bucket already exists: user-files
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
üîå Client connected: amMud88aiflerm0aAAAB (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ Supabase Storage initialized
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }
[dotenv@17.2.3] injecting env (0) from .env -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
üöÄ Server is running on http://localhost:5000
üìù Environment: development
üîó Health check: http://localhost:5000/health
‚öôÔ∏è  Background workers initialized
üîå WebSocket server ready
‚ö†Ô∏è  HTTP mode - SSL/HTTPS not enabled (development only)
‚úÖ Reminder scheduler started (runs every hour)
üîÑ Starting background document processor (polling every 30s)
‚úÖ System roles initialized
‚úÖ Redis connected
‚úÖ Cache service connected to Redis
‚úÖ Supabase storage bucket already exists: user-files
üîå Client connected: gMamSQSl88dBiAbZAAAB (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
üîå Client disconnected: gMamSQSl88dBiAbZAAAB
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîå Client connected: hogEPuQgBHoLLDiPAAAD (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT 1
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:error 
Invalid `prisma.document.findMany()` invocation in
C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:2061:21

  2058 }
  2059 
  2060 const [documents, total] = await Promise.all([
‚Üí 2061   prisma.document.findMany({
           where: {
             userId: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae",
             status: {
               not: "deleted"
             }
           },
           include: {
             folder: true,
             tags: {
               include: {
                 tag: true
               }
             },
             metadata: {
               select: {
                 documentId: true,
                 pageCount: true,
                 wordCount: true,
                 hasOcr: true,
                 ~~~~~~
                 ocrConfidence: true,
         ?       id?: true,
         ?       extractedText?: true,
         ?       characterCount?: true,
         ?       thumbnailUrl?: true,
         ?       entities?: true,
         ?       classification?: true,
         ?       summary?: true,
         ?       author?: true,
         ?       creationDate?: true,
         ?       modificationDate?: true,
         ?       language?: true,
         ?       topics?: true,
         ?       keyEntities?: true,
         ?       hasSignature?: true,
         ?       hasTables?: true,
         ?       hasImages?: true,
         ?       markdownContent?: true,
         ?       markdownUrl?: true,
         ?       markdownStructure?: true,
         ?       sheetCount?: true,
         ?       slideCount?: true,
         ?       slidesData?: true,
         ?       pptxMetadata?: true,
         ?       slideGenerationStatus?: true,
         ?       slideGenerationError?: true,
         ?       createdAt?: true,
         ?       updatedAt?: true,
         ?       document?: true
               }
             }
           },
           orderBy: {
             createdAt: "desc"
           },
           skip: 0,
           take: 1000
         })

Unknown field `hasOcr` for select statement on model `DocumentMetadata`. Available options are marked with ?.
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
üîå Client disconnected: hogEPuQgBHoLLDiPAAAD
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîå Client connected: MeHWqf762oaJ3W-kAAAF (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT 1
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:error 
Invalid `prisma.document.findMany()` invocation in
C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:2061:21

  2058 }
  2059 
  2060 const [documents, total] = await Promise.all([
‚Üí 2061   prisma.document.findMany({
           where: {
             userId: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae",
             status: {
               not: "deleted"
             }
           },
           include: {
             folder: true,
             tags: {
               include: {
                 tag: true
               }
             },
             metadata: {
               select: {
                 documentId: true,
                 pageCount: true,
                 wordCount: true,
                 hasOcr: true,
                 ~~~~~~
                 ocrConfidence: true,
         ?       id?: true,
         ?       extractedText?: true,
         ?       characterCount?: true,
         ?       thumbnailUrl?: true,
         ?       entities?: true,
         ?       classification?: true,
         ?       summary?: true,
         ?       author?: true,
         ?       creationDate?: true,
         ?       modificationDate?: true,
         ?       language?: true,
         ?       topics?: true,
         ?       keyEntities?: true,
         ?       hasSignature?: true,
         ?       hasTables?: true,
         ?       hasImages?: true,
         ?       markdownContent?: true,
         ?       markdownUrl?: true,
         ?       markdownStructure?: true,
         ?       sheetCount?: true,
         ?       slideCount?: true,
         ?       slidesData?: true,
         ?       pptxMetadata?: true,
         ?       slideGenerationStatus?: true,
         ?       slideGenerationError?: true,
         ?       createdAt?: true,
         ?       updatedAt?: true,
         ?       document?: true
               }
             }
           },
           orderBy: {
             createdAt: "desc"
           },
           skip: 0,
           take: 1000
         })

Unknown field `hasOcr` for select statement on model `DocumentMetadata`. Available options are marked with ?.
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:error 
Invalid `prisma.document.findMany()` invocation in
C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:2061:21

  2058 }
  2059 
  2060 const [documents, total] = await Promise.all([
‚Üí 2061   prisma.document.findMany({
           where: {
             userId: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae",
             status: {
               not: "deleted"
             }
           },
           include: {
             folder: true,
             tags: {
               include: {
                 tag: true
               }
             },
             metadata: {
               select: {
                 documentId: true,
                 pageCount: true,
                 wordCount: true,
                 hasOcr: true,
                 ~~~~~~
                 ocrConfidence: true,
         ?       id?: true,
         ?       extractedText?: true,
         ?       characterCount?: true,
         ?       thumbnailUrl?: true,
         ?       entities?: true,
         ?       classification?: true,
         ?       summary?: true,
         ?       author?: true,
         ?       creationDate?: true,
         ?       modificationDate?: true,
         ?       language?: true,
         ?       topics?: true,
         ?       keyEntities?: true,
         ?       hasSignature?: true,
         ?       hasTables?: true,
         ?       hasImages?: true,
         ?       markdownContent?: true,
         ?       markdownUrl?: true,
         ?       markdownStructure?: true,
         ?       sheetCount?: true,
         ?       slideCount?: true,
         ?       slidesData?: true,
         ?       pptxMetadata?: true,
         ?       slideGenerationStatus?: true,
         ?       slideGenerationError?: true,
         ?       createdAt?: true,
         ?       updatedAt?: true,
         ?       document?: true
               }
             }
           },
           orderBy: {
             createdAt: "desc"
           },
           skip: 0,
           take: 5
         })

Unknown field `hasOcr` for select statement on model `DocumentMetadata`. Available options are marked with ?.
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:error 
Invalid `prisma.document.findMany()` invocation in
C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:2061:21

  2058 }
  2059 
  2060 const [documents, total] = await Promise.all([
‚Üí 2061   prisma.document.findMany({
           where: {
             userId: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae",
             status: {
               not: "deleted"
             }
           },
           include: {
             folder: true,
             tags: {
               include: {
                 tag: true
               }
             },
             metadata: {
               select: {
                 documentId: true,
                 pageCount: true,
                 wordCount: true,
                 hasOcr: true,
                 ~~~~~~
                 ocrConfidence: true,
         ?       id?: true,
         ?       extractedText?: true,
         ?       characterCount?: true,
         ?       thumbnailUrl?: true,
         ?       entities?: true,
         ?       classification?: true,
         ?       summary?: true,
         ?       author?: true,
         ?       creationDate?: true,
         ?       modificationDate?: true,
         ?       language?: true,
         ?       topics?: true,
         ?       keyEntities?: true,
         ?       hasSignature?: true,
         ?       hasTables?: true,
         ?       hasImages?: true,
         ?       markdownContent?: true,
         ?       markdownUrl?: true,
         ?       markdownStructure?: true,
         ?       sheetCount?: true,
         ?       slideCount?: true,
         ?       slidesData?: true,
         ?       pptxMetadata?: true,
         ?       slideGenerationStatus?: true,
         ?       slideGenerationError?: true,
         ?       createdAt?: true,
         ?       updatedAt?: true,
         ?       document?: true
               }
             }
           },
           orderBy: {
             createdAt: "desc"
           },
           skip: 0,
           take: 1000
         })

Unknown field `hasOcr` for select statement on model `DocumentMetadata`. Available options are marked with ?.
prisma:query SELECT "public"."folders"."id", "public"."folders"."userId", "public"."folders"."name", "public"."folders"."description", "public"."folders"."emoji", "public"."folders"."color", "public"."folders"."parentFolderId", "public"."folders"."path", "public"."folders"."createdAt", "public"."folders"."updatedAt", COALESCE("aggr_selection_0_Document"."_aggr_count_documents", 0) AS "_aggr_count_documents", COALESCE("aggr_selection_1_Folder"."_aggr_count_subfolders", 0) AS "_aggr_count_subfolders" FROM "public"."folders" LEFT JOIN (SELECT "public"."documents"."folderId", COUNT(*) AS "_aggr_count_documents" FROM "public"."documents" WHERE 1=1 GROUP BY "public"."documents"."folderId") AS "aggr_selection_0_Document" ON ("public"."folders"."id" = "aggr_selection_0_Document"."folderId") LEFT JOIN (SELECT "public"."folders"."parentFolderId", COUNT(*) AS "_aggr_count_subfolders" FROM "public"."folders" WHERE 1=1 GROUP BY "public"."folders"."parentFolderId") AS "aggr_selection_1_Folder" ON ("public"."folders"."id" = "aggr_selection_1_Folder"."parentFolderId") WHERE "public"."folders"."userId" = $1 ORDER BY "public"."folders"."name" ASC OFFSET $2
üîç getFolderTree returning: 0 folders (includeAll: true)
üíæ Cached value for key: folder_tree:de2d5631c726c770981c5538fb10036d... (TTL: 300s)
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîå Client connected: 1lNmYlPUsIluexeBAAAH (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
üí¨ Joined conversation: 85a028e0-024d-43c0-acd6-5d06c47f080d (1 clients in room)
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìñ Fetching conversation: 85a028e0-024d-43c0-acd6-5d06c47f080d
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìã Fetching conversations for user: c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."firstName", "public"."users"."lastName", "public"."users"."profileImage", "public"."users"."isEmailVerified", "public"."users"."phoneNumber", "public"."users"."isPhoneVerified" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."conversations"."id", "public"."conversations"."userId", "public"."conversations"."title", "public"."conversations"."createdAt", "public"."conversations"."updatedAt", "public"."conversations"."contextType", "public"."conversations"."contextId", "public"."conversations"."contextName", "public"."conversations"."contextMeta" FROM "public"."conversations" WHERE ("public"."conversations"."id" = $1 AND "public"."conversations"."userId" = $2) LIMIT $3 OFFSET $4
üí¨ Left conversation: 85a028e0-024d-43c0-acd6-5d06c47f080d
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."conversations"."id", "public"."conversations"."userId", "public"."conversations"."title", "public"."conversations"."createdAt", "public"."conversations"."updatedAt", "public"."conversations"."contextType", "public"."conversations"."contextId", "public"."conversations"."contextName", "public"."conversations"."contextMeta", COALESCE("aggr_selection_0_Message"."_aggr_count_messages", 0) AS "_aggr_count_messages" FROM "public"."conversations" LEFT JOIN (SELECT "public"."messages"."conversationId", COUNT(*) AS "_aggr_count_messages" FROM "public"."messages" WHERE 1=1 GROUP BY "public"."messages"."conversationId") AS "aggr_selection_0_Message" ON ("public"."conversations"."id" = "aggr_selection_0_Message"."conversationId") WHERE "public"."conversations"."userId" = $1 ORDER BY "public"."conversations"."updatedAt" DESC OFFSET $2
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."two_factor_auth"."id", "public"."two_factor_auth"."isEnabled", "public"."two_factor_auth"."userId" FROM "public"."two_factor_auth" WHERE "public"."two_factor_auth"."userId" IN ($1) OFFSET $2
prisma:query SELECT "public"."messages"."id", "public"."messages"."conversationId", "public"."messages"."role", "public"."messages"."content", "public"."messages"."metadata", "public"."messages"."createdAt", "public"."messages"."isDocument", "public"."messages"."documentTitle", "public"."messages"."documentFormat", "public"."messages"."markdownContent" FROM "public"."messages" WHERE "public"."messages"."conversationId" IN ($1) ORDER BY "public"."messages"."createdAt" ASC OFFSET $2
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:error 
Invalid `prisma.document.findMany()` invocation in
C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:2061:21

  2058 }
  2059 
  2060 const [documents, total] = await Promise.all([
‚Üí 2061   prisma.document.findMany({
           where: {
             userId: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae",
             status: {
               not: "deleted"
             }
           },
           include: {
             folder: true,
             tags: {
               include: {
                 tag: true
               }
             },
             metadata: {
               select: {
                 documentId: true,
                 pageCount: true,
                 wordCount: true,
                 hasOcr: true,
                 ~~~~~~
                 ocrConfidence: true,
         ?       id?: true,
         ?       extractedText?: true,
         ?       characterCount?: true,
         ?       thumbnailUrl?: true,
         ?       entities?: true,
         ?       classification?: true,
         ?       summary?: true,
         ?       author?: true,
         ?       creationDate?: true,
         ?       modificationDate?: true,
         ?       language?: true,
         ?       topics?: true,
         ?       keyEntities?: true,
         ?       hasSignature?: true,
         ?       hasTables?: true,
         ?       hasImages?: true,
         ?       markdownContent?: true,
         ?       markdownUrl?: true,
         ?       markdownStructure?: true,
         ?       sheetCount?: true,
         ?       slideCount?: true,
         ?       slidesData?: true,
         ?       pptxMetadata?: true,
         ?       slideGenerationStatus?: true,
         ?       slideGenerationError?: true,
         ?       createdAt?: true,
         ?       updatedAt?: true,
         ?       document?: true
               }
             }
           },
           orderBy: {
             createdAt: "desc"
           },
           skip: 0,
           take: 5
         })

Unknown field `hasOcr` for select statement on model `DocumentMetadata`. Available options are marked with ?.
prisma:query SELECT "public"."messages"."id", "public"."messages"."content", "public"."messages"."createdAt", "public"."messages"."conversationId" FROM "public"."messages" WHERE "public"."messages"."conversationId" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10) ORDER BY "public"."messages"."createdAt" DESC OFFSET $11
‚úÖ Found 10 conversations
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."message_attachments"."id", "public"."message_attachments"."messageId", "public"."message_attachments"."conversationId", "public"."message_attachments"."userId", "public"."message_attachments"."attachmentType", "public"."message_attachments"."title", "public"."message_attachments"."content", "public"."message_attachments"."previewHtml", "public"."message_attachments"."previewCss", "public"."message_attachments"."sourceDocumentIds", "public"."message_attachments"."analysisType", "public"."message_attachments"."metadata", "public"."message_attachments"."editHistory", "public"."message_attachments"."editCount", "public"."message_attachments"."createdAt", "public"."message_attachments"."updatedAt" FROM "public"."message_attachments" WHERE "public"."message_attachments"."messageId" IN ($1,$2) OFFSET $3
üí¨ Joined conversation: 85a028e0-024d-43c0-acd6-5d06c47f080d (1 clients in room)
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."chat_documents"."id", "public"."chat_documents"."messageId", "public"."chat_documents"."conversationId", "public"."chat_documents"."userId", "public"."chat_documents"."title", "public"."chat_documents"."markdownContent", "public"."chat_documents"."documentType", "public"."chat_documents"."sourceDocumentId", "public"."chat_documents"."pdfUrl", "public"."chat_documents"."docxUrl", "public"."chat_documents"."wordCount", "public"."chat_documents"."createdAt", "public"."chat_documents"."expiresAt" FROM "public"."chat_documents" WHERE "public"."chat_documents"."messageId" IN ($1,$2) OFFSET $3
‚úÖ Conversation found with 2 messages
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìã Fetching conversations for user: c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìñ Fetching conversation: 85a028e0-024d-43c0-acd6-5d06c47f080d
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."firstName", "public"."users"."lastName", "public"."users"."profileImage", "public"."users"."isEmailVerified", "public"."users"."phoneNumber", "public"."users"."isPhoneVerified" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."two_factor_auth"."id", "public"."two_factor_auth"."isEnabled", "public"."two_factor_auth"."userId" FROM "public"."two_factor_auth" WHERE "public"."two_factor_auth"."userId" IN ($1) OFFSET $2
prisma:query SELECT "public"."conversations"."id", "public"."conversations"."userId", "public"."conversations"."title", "public"."conversations"."createdAt", "public"."conversations"."updatedAt", "public"."conversations"."contextType", "public"."conversations"."contextId", "public"."conversations"."contextName", "public"."conversations"."contextMeta", COALESCE("aggr_selection_0_Message"."_aggr_count_messages", 0) AS "_aggr_count_messages" FROM "public"."conversations" LEFT JOIN (SELECT "public"."messages"."conversationId", COUNT(*) AS "_aggr_count_messages" FROM "public"."messages" WHERE 1=1 GROUP BY "public"."messages"."conversationId") AS "aggr_selection_0_Message" ON ("public"."conversations"."id" = "aggr_selection_0_Message"."conversationId") WHERE "public"."conversations"."userId" = $1 ORDER BY "public"."conversations"."updatedAt" DESC OFFSET $2
prisma:query SELECT "public"."conversations"."id", "public"."conversations"."userId", "public"."conversations"."title", "public"."conversations"."createdAt", "public"."conversations"."updatedAt", "public"."conversations"."contextType", "public"."conversations"."contextId", "public"."conversations"."contextName", "public"."conversations"."contextMeta" FROM "public"."conversations" WHERE ("public"."conversations"."id" = $1 AND "public"."conversations"."userId" = $2) LIMIT $3 OFFSET $4
prisma:query SELECT "public"."messages"."id", "public"."messages"."content", "public"."messages"."createdAt", "public"."messages"."conversationId" FROM "public"."messages" WHERE "public"."messages"."conversationId" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10) ORDER BY "public"."messages"."createdAt" DESC OFFSET $11
‚úÖ Found 10 conversations
prisma:query SELECT "public"."messages"."id", "public"."messages"."conversationId", "public"."messages"."role", "public"."messages"."content", "public"."messages"."metadata", "public"."messages"."createdAt", "public"."messages"."isDocument", "public"."messages"."documentTitle", "public"."messages"."documentFormat", "public"."messages"."markdownContent" FROM "public"."messages" WHERE "public"."messages"."conversationId" IN ($1) ORDER BY "public"."messages"."createdAt" ASC OFFSET $2
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:error 
Invalid `prisma.document.findMany()` invocation in
C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:2061:21

  2058 }
  2059 
  2060 const [documents, total] = await Promise.all([
‚Üí 2061   prisma.document.findMany({
           where: {
             userId: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae",
             status: {
               not: "deleted"
             }
           },
           include: {
             folder: true,
             tags: {
               include: {
                 tag: true
               }
             },
             metadata: {
               select: {
                 documentId: true,
                 pageCount: true,
                 wordCount: true,
                 hasOcr: true,
                 ~~~~~~
                 ocrConfidence: true,
         ?       id?: true,
         ?       extractedText?: true,
         ?       characterCount?: true,
         ?       thumbnailUrl?: true,
         ?       entities?: true,
         ?       classification?: true,
         ?       summary?: true,
         ?       author?: true,
         ?       creationDate?: true,
         ?       modificationDate?: true,
         ?       language?: true,
         ?       topics?: true,
         ?       keyEntities?: true,
         ?       hasSignature?: true,
         ?       hasTables?: true,
         ?       hasImages?: true,
         ?       markdownContent?: true,
         ?       markdownUrl?: true,
         ?       markdownStructure?: true,
         ?       sheetCount?: true,
         ?       slideCount?: true,
         ?       slidesData?: true,
         ?       pptxMetadata?: true,
         ?       slideGenerationStatus?: true,
         ?       slideGenerationError?: true,
         ?       createdAt?: true,
         ?       updatedAt?: true,
         ?       document?: true
               }
             }
           },
           orderBy: {
             createdAt: "desc"
           },
           skip: 0,
           take: 1000
         })

Unknown field `hasOcr` for select statement on model `DocumentMetadata`. Available options are marked with ?.
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
‚úÖ Cache hit for key: folder_tree:de2d5631c726c770981c5538fb10036d...
‚úÖ Cache hit for folder tree (includeAll: true)
prisma:query SELECT "public"."message_attachments"."id", "public"."message_attachments"."messageId", "public"."message_attachments"."conversationId", "public"."message_attachments"."userId", "public"."message_attachments"."attachmentType", "public"."message_attachments"."title", "public"."message_attachments"."content", "public"."message_attachments"."previewHtml", "public"."message_attachments"."previewCss", "public"."message_attachments"."sourceDocumentIds", "public"."message_attachments"."analysisType", "public"."message_attachments"."metadata", "public"."message_attachments"."editHistory", "public"."message_attachments"."editCount", "public"."message_attachments"."createdAt", "public"."message_attachments"."updatedAt" FROM "public"."message_attachments" WHERE "public"."message_attachments"."messageId" IN ($1,$2) OFFSET $3
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."chat_documents"."id", "public"."chat_documents"."messageId", "public"."chat_documents"."conversationId", "public"."chat_documents"."userId", "public"."chat_documents"."title", "public"."chat_documents"."markdownContent", "public"."chat_documents"."documentType", "public"."chat_documents"."sourceDocumentId", "public"."chat_documents"."pdfUrl", "public"."chat_documents"."docxUrl", "public"."chat_documents"."wordCount", "public"."chat_documents"."createdAt", "public"."chat_documents"."expiresAt" FROM "public"."chat_documents" WHERE "public"."chat_documents"."messageId" IN ($1,$2) OFFSET $3
‚úÖ Conversation found with 2 messages
üí¨ Left conversation: 85a028e0-024d-43c0-acd6-5d06c47f080d
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:error 
Invalid `prisma.document.findMany()` invocation in
C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:2061:21

  2058 }
  2059 
  2060 const [documents, total] = await Promise.all([
‚Üí 2061   prisma.document.findMany({
           where: {
             userId: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae",
             status: {
               not: "deleted"
             }
           },
           include: {
             folder: true,
             tags: {
               include: {
                 tag: true
               }
             },
             metadata: {
               select: {
                 documentId: true,
                 pageCount: true,
                 wordCount: true,
                 hasOcr: true,
                 ~~~~~~
                 ocrConfidence: true,
         ?       id?: true,
         ?       extractedText?: true,
         ?       characterCount?: true,
         ?       thumbnailUrl?: true,
         ?       entities?: true,
         ?       classification?: true,
         ?       summary?: true,
         ?       author?: true,
         ?       creationDate?: true,
         ?       modificationDate?: true,
         ?       language?: true,
         ?       topics?: true,
         ?       keyEntities?: true,
         ?       hasSignature?: true,
         ?       hasTables?: true,
         ?       hasImages?: true,
         ?       markdownContent?: true,
         ?       markdownUrl?: true,
         ?       markdownStructure?: true,
         ?       sheetCount?: true,
         ?       slideCount?: true,
         ?       slidesData?: true,
         ?       pptxMetadata?: true,
         ?       slideGenerationStatus?: true,
         ?       slideGenerationError?: true,
         ?       createdAt?: true,
         ?       updatedAt?: true,
         ?       document?: true
               }
             }
           },
           orderBy: {
             createdAt: "desc"
           },
           skip: 0,
           take: 5
         })

Unknown field `hasOcr` for select statement on model `DocumentMetadata`. Available options are marked with ?.
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
‚úÖ Cache hit for key: folder_tree:de2d5631c726c770981c5538fb10036d...
‚úÖ Cache hit for folder tree (includeAll: true)
prisma:error 
Invalid `prisma.document.findMany()` invocation in
C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:2061:21

  2058 }
  2059 
  2060 const [documents, total] = await Promise.all([
‚Üí 2061   prisma.document.findMany({
           where: {
             userId: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae",
             status: {
               not: "deleted"
             }
           },
           include: {
             folder: true,
             tags: {
               include: {
                 tag: true
               }
             },
             metadata: {
               select: {
                 documentId: true,
                 pageCount: true,
                 wordCount: true,
                 hasOcr: true,
                 ~~~~~~
                 ocrConfidence: true,
         ?       id?: true,
         ?       extractedText?: true,
         ?       characterCount?: true,
         ?       thumbnailUrl?: true,
         ?       entities?: true,
         ?       classification?: true,
         ?       summary?: true,
         ?       author?: true,
         ?       creationDate?: true,
         ?       modificationDate?: true,
         ?       language?: true,
         ?       topics?: true,
         ?       keyEntities?: true,
         ?       hasSignature?: true,
         ?       hasTables?: true,
         ?       hasImages?: true,
         ?       markdownContent?: true,
         ?       markdownUrl?: true,
         ?       markdownStructure?: true,
         ?       sheetCount?: true,
         ?       slideCount?: true,
         ?       slidesData?: true,
         ?       pptxMetadata?: true,
         ?       slideGenerationStatus?: true,
         ?       slideGenerationError?: true,
         ?       createdAt?: true,
         ?       updatedAt?: true,
         ?       document?: true
               }
             }
           },
           orderBy: {
             createdAt: "desc"
           },
           skip: 0,
           take: 1000
         })

Unknown field `hasOcr` for select statement on model `DocumentMetadata`. Available options are marked with ?.
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
üí¨ Joined conversation: 85a028e0-024d-43c0-acd6-5d06c47f080d (1 clients in room)
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìã Fetching conversations for user: c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìñ Fetching conversation: 85a028e0-024d-43c0-acd6-5d06c47f080d
prisma:query SELECT "public"."conversations"."id", "public"."conversations"."userId", "public"."conversations"."title", "public"."conversations"."createdAt", "public"."conversations"."updatedAt", "public"."conversations"."contextType", "public"."conversations"."contextId", "public"."conversations"."contextName", "public"."conversations"."contextMeta" FROM "public"."conversations" WHERE ("public"."conversations"."id" = $1 AND "public"."conversations"."userId" = $2) LIMIT $3 OFFSET $4
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."firstName", "public"."users"."lastName", "public"."users"."profileImage", "public"."users"."isEmailVerified", "public"."users"."phoneNumber", "public"."users"."isPhoneVerified" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."conversations"."id", "public"."conversations"."userId", "public"."conversations"."title", "public"."conversations"."createdAt", "public"."conversations"."updatedAt", "public"."conversations"."contextType", "public"."conversations"."contextId", "public"."conversations"."contextName", "public"."conversations"."contextMeta", COALESCE("aggr_selection_0_Message"."_aggr_count_messages", 0) AS "_aggr_count_messages" FROM "public"."conversations" LEFT JOIN (SELECT "public"."messages"."conversationId", COUNT(*) AS "_aggr_count_messages" FROM "public"."messages" WHERE 1=1 GROUP BY "public"."messages"."conversationId") AS "aggr_selection_0_Message" ON ("public"."conversations"."id" = "aggr_selection_0_Message"."conversationId") WHERE "public"."conversations"."userId" = $1 ORDER BY "public"."conversations"."updatedAt" DESC OFFSET $2
prisma:query SELECT "public"."messages"."id", "public"."messages"."conversationId", "public"."messages"."role", "public"."messages"."content", "public"."messages"."metadata", "public"."messages"."createdAt", "public"."messages"."isDocument", "public"."messages"."documentTitle", "public"."messages"."documentFormat", "public"."messages"."markdownContent" FROM "public"."messages" WHERE "public"."messages"."conversationId" IN ($1) ORDER BY "public"."messages"."createdAt" ASC OFFSET $2
prisma:query SELECT "public"."message_attachments"."id", "public"."message_attachments"."messageId", "public"."message_attachments"."conversationId", "public"."message_attachments"."userId", "public"."message_attachments"."attachmentType", "public"."message_attachments"."title", "public"."message_attachments"."content", "public"."message_attachments"."previewHtml", "public"."message_attachments"."previewCss", "public"."message_attachments"."sourceDocumentIds", "public"."message_attachments"."analysisType", "public"."message_attachments"."metadata", "public"."message_attachments"."editHistory", "public"."message_attachments"."editCount", "public"."message_attachments"."createdAt", "public"."message_attachments"."updatedAt" FROM "public"."message_attachments" WHERE "public"."message_attachments"."messageId" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."two_factor_auth"."id", "public"."two_factor_auth"."isEnabled", "public"."two_factor_auth"."userId" FROM "public"."two_factor_auth" WHERE "public"."two_factor_auth"."userId" IN ($1) OFFSET $2
prisma:query SELECT "public"."messages"."id", "public"."messages"."content", "public"."messages"."createdAt", "public"."messages"."conversationId" FROM "public"."messages" WHERE "public"."messages"."conversationId" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10) ORDER BY "public"."messages"."createdAt" DESC OFFSET $11
‚úÖ Found 10 conversations
prisma:query SELECT "public"."chat_documents"."id", "public"."chat_documents"."messageId", "public"."chat_documents"."conversationId", "public"."chat_documents"."userId", "public"."chat_documents"."title", "public"."chat_documents"."markdownContent", "public"."chat_documents"."documentType", "public"."chat_documents"."sourceDocumentId", "public"."chat_documents"."pdfUrl", "public"."chat_documents"."docxUrl", "public"."chat_documents"."wordCount", "public"."chat_documents"."createdAt", "public"."chat_documents"."expiresAt" FROM "public"."chat_documents" WHERE "public"."chat_documents"."messageId" IN ($1,$2) OFFSET $3
‚úÖ Conversation found with 2 messages
üí¨ Left conversation: 85a028e0-024d-43c0-acd6-5d06c47f080d
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
‚úÖ Cache hit for key: folder_tree:de2d5631c726c770981c5538fb10036d...
‚úÖ Cache hit for folder tree (includeAll: true)
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:error 
Invalid `prisma.document.findMany()` invocation in
C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:2061:21

  2058 }
  2059 
  2060 const [documents, total] = await Promise.all([
‚Üí 2061   prisma.document.findMany({
           where: {
             userId: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae",
             status: {
               not: "deleted"
             }
           },
           include: {
             folder: true,
             tags: {
               include: {
                 tag: true
               }
             },
             metadata: {
               select: {
                 documentId: true,
                 pageCount: true,
                 wordCount: true,
                 hasOcr: true,
                 ~~~~~~
                 ocrConfidence: true,
         ?       id?: true,
         ?       extractedText?: true,
         ?       characterCount?: true,
         ?       thumbnailUrl?: true,
         ?       entities?: true,
         ?       classification?: true,
         ?       summary?: true,
         ?       author?: true,
         ?       creationDate?: true,
         ?       modificationDate?: true,
         ?       language?: true,
         ?       topics?: true,
         ?       keyEntities?: true,
         ?       hasSignature?: true,
         ?       hasTables?: true,
         ?       hasImages?: true,
         ?       markdownContent?: true,
         ?       markdownUrl?: true,
         ?       markdownStructure?: true,
         ?       sheetCount?: true,
         ?       slideCount?: true,
         ?       slidesData?: true,
         ?       pptxMetadata?: true,
         ?       slideGenerationStatus?: true,
         ?       slideGenerationError?: true,
         ?       createdAt?: true,
         ?       updatedAt?: true,
         ?       document?: true
               }
             }
           },
           orderBy: {
             createdAt: "desc"
           },
           skip: 0,
           take: 5
         })

Unknown field `hasOcr` for select statement on model `DocumentMetadata`. Available options are marked with ?.
prisma:error 
Invalid `prisma.document.findMany()` invocation in
C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:2061:21

  2058 }
  2059 
  2060 const [documents, total] = await Promise.all([
‚Üí 2061   prisma.document.findMany({
           where: {
             userId: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae",
             status: {
               not: "deleted"
             }
           },
           include: {
             folder: true,
             tags: {
               include: {
                 tag: true
               }
             },
             metadata: {
               select: {
                 documentId: true,
                 pageCount: true,
                 wordCount: true,
                 hasOcr: true,
                 ~~~~~~
                 ocrConfidence: true,
         ?       id?: true,
         ?       extractedText?: true,
         ?       characterCount?: true,
         ?       thumbnailUrl?: true,
         ?       entities?: true,
         ?       classification?: true,
         ?       summary?: true,
         ?       author?: true,
         ?       creationDate?: true,
         ?       modificationDate?: true,
         ?       language?: true,
         ?       topics?: true,
         ?       keyEntities?: true,
         ?       hasSignature?: true,
         ?       hasTables?: true,
         ?       hasImages?: true,
         ?       markdownContent?: true,
         ?       markdownUrl?: true,
         ?       markdownStructure?: true,
         ?       sheetCount?: true,
         ?       slideCount?: true,
         ?       slidesData?: true,
         ?       pptxMetadata?: true,
         ?       slideGenerationStatus?: true,
         ?       slideGenerationError?: true,
         ?       createdAt?: true,
         ?       updatedAt?: true,
         ?       document?: true
               }
             }
           },
           orderBy: {
             createdAt: "desc"
           },
           skip: 0,
           take: 1000
         })

Unknown field `hasOcr` for select statement on model `DocumentMetadata`. Available options are marked with ?.
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
üí¨ Joined conversation: 85a028e0-024d-43c0-acd6-5d06c47f080d (1 clients in room)
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT 1
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìã Fetching conversations for user: c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìñ Fetching conversation: 85a028e0-024d-43c0-acd6-5d06c47f080d
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."conversations"."id", "public"."conversations"."userId", "public"."conversations"."title", "public"."conversations"."createdAt", "public"."conversations"."updatedAt", "public"."conversations"."contextType", "public"."conversations"."contextId", "public"."conversations"."contextName", "public"."conversations"."contextMeta", COALESCE("aggr_selection_0_Message"."_aggr_count_messages", 0) AS "_aggr_count_messages" FROM "public"."conversations" LEFT JOIN (SELECT "public"."messages"."conversationId", COUNT(*) AS "_aggr_count_messages" FROM "public"."messages" WHERE 1=1 GROUP BY "public"."messages"."conversationId") AS "aggr_selection_0_Message" ON ("public"."conversations"."id" = "aggr_selection_0_Message"."conversationId") WHERE "public"."conversations"."userId" = $1 ORDER BY "public"."conversations"."updatedAt" DESC OFFSET $2
prisma:query SELECT "public"."conversations"."id", "public"."conversations"."userId", "public"."conversations"."title", "public"."conversations"."createdAt", "public"."conversations"."updatedAt", "public"."conversations"."contextType", "public"."conversations"."contextId", "public"."conversations"."contextName", "public"."conversations"."contextMeta" FROM "public"."conversations" WHERE ("public"."conversations"."id" = $1 AND "public"."conversations"."userId" = $2) LIMIT $3 OFFSET $4
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."firstName", "public"."users"."lastName", "public"."users"."profileImage", "public"."users"."isEmailVerified", "public"."users"."phoneNumber", "public"."users"."isPhoneVerified" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."messages"."id", "public"."messages"."content", "public"."messages"."createdAt", "public"."messages"."conversationId" FROM "public"."messages" WHERE "public"."messages"."conversationId" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10) ORDER BY "public"."messages"."createdAt" DESC OFFSET $11
‚úÖ Found 10 conversations
prisma:query SELECT "public"."messages"."id", "public"."messages"."conversationId", "public"."messages"."role", "public"."messages"."content", "public"."messages"."metadata", "public"."messages"."createdAt", "public"."messages"."isDocument", "public"."messages"."documentTitle", "public"."messages"."documentFormat", "public"."messages"."markdownContent" FROM "public"."messages" WHERE "public"."messages"."conversationId" IN ($1) ORDER BY "public"."messages"."createdAt" ASC OFFSET $2
prisma:query SELECT "public"."two_factor_auth"."id", "public"."two_factor_auth"."isEnabled", "public"."two_factor_auth"."userId" FROM "public"."two_factor_auth" WHERE "public"."two_factor_auth"."userId" IN ($1) OFFSET $2
prisma:query SELECT "public"."message_attachments"."id", "public"."message_attachments"."messageId", "public"."message_attachments"."conversationId", "public"."message_attachments"."userId", "public"."message_attachments"."attachmentType", "public"."message_attachments"."title", "public"."message_attachments"."content", "public"."message_attachments"."previewHtml", "public"."message_attachments"."previewCss", "public"."message_attachments"."sourceDocumentIds", "public"."message_attachments"."analysisType", "public"."message_attachments"."metadata", "public"."message_attachments"."editHistory", "public"."message_attachments"."editCount", "public"."message_attachments"."createdAt", "public"."message_attachments"."updatedAt" FROM "public"."message_attachments" WHERE "public"."message_attachments"."messageId" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."chat_documents"."id", "public"."chat_documents"."messageId", "public"."chat_documents"."conversationId", "public"."chat_documents"."userId", "public"."chat_documents"."title", "public"."chat_documents"."markdownContent", "public"."chat_documents"."documentType", "public"."chat_documents"."sourceDocumentId", "public"."chat_documents"."pdfUrl", "public"."chat_documents"."docxUrl", "public"."chat_documents"."wordCount", "public"."chat_documents"."createdAt", "public"."chat_documents"."expiresAt" FROM "public"."chat_documents" WHERE "public"."chat_documents"."messageId" IN ($1,$2) OFFSET $3
‚úÖ Conversation found with 2 messages
üí¨ Left conversation: 85a028e0-024d-43c0-acd6-5d06c47f080d
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
‚úÖ Cache hit for key: folder_tree:de2d5631c726c770981c5538fb10036d...
‚úÖ Cache hit for folder tree (includeAll: true)
prisma:query SELECT 1
prisma:error 
Invalid `prisma.document.findMany()` invocation in
C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:2061:21

  2058 }
  2059 
  2060 const [documents, total] = await Promise.all([
‚Üí 2061   prisma.document.findMany({
           where: {
             userId: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae",
             status: {
               not: "deleted"
             }
           },
           include: {
             folder: true,
             tags: {
               include: {
                 tag: true
               }
             },
             metadata: {
               select: {
                 documentId: true,
                 pageCount: true,
                 wordCount: true,
                 hasOcr: true,
                 ~~~~~~
                 ocrConfidence: true,
         ?       id?: true,
         ?       extractedText?: true,
         ?       characterCount?: true,
         ?       thumbnailUrl?: true,
         ?       entities?: true,
         ?       classification?: true,
         ?       summary?: true,
         ?       author?: true,
         ?       creationDate?: true,
         ?       modificationDate?: true,
         ?       language?: true,
         ?       topics?: true,
         ?       keyEntities?: true,
         ?       hasSignature?: true,
         ?       hasTables?: true,
         ?       hasImages?: true,
         ?       markdownContent?: true,
         ?       markdownUrl?: true,
         ?       markdownStructure?: true,
         ?       sheetCount?: true,
         ?       slideCount?: true,
         ?       slidesData?: true,
         ?       pptxMetadata?: true,
         ?       slideGenerationStatus?: true,
         ?       slideGenerationError?: true,
         ?       createdAt?: true,
         ?       updatedAt?: true,
         ?       document?: true
               }
             }
           },
           orderBy: {
             createdAt: "desc"
           },
           skip: 0,
           take: 1000
         })

Unknown field `hasOcr` for select statement on model `DocumentMetadata`. Available options are marked with ?.
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT 1
prisma:error 
Invalid `prisma.document.findMany()` invocation in
C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:2061:21

  2058 }
  2059 
  2060 const [documents, total] = await Promise.all([
‚Üí 2061   prisma.document.findMany({
           where: {
             userId: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae",
             status: {
               not: "deleted"
             }
           },
           include: {
             folder: true,
             tags: {
               include: {
                 tag: true
               }
             },
             metadata: {
               select: {
                 documentId: true,
                 pageCount: true,
                 wordCount: true,
                 hasOcr: true,
                 ~~~~~~
                 ocrConfidence: true,
         ?       id?: true,
         ?       extractedText?: true,
         ?       characterCount?: true,
         ?       thumbnailUrl?: true,
         ?       entities?: true,
         ?       classification?: true,
         ?       summary?: true,
         ?       author?: true,
         ?       creationDate?: true,
         ?       modificationDate?: true,
         ?       language?: true,
         ?       topics?: true,
         ?       keyEntities?: true,
         ?       hasSignature?: true,
         ?       hasTables?: true,
         ?       hasImages?: true,
         ?       markdownContent?: true,
         ?       markdownUrl?: true,
         ?       markdownStructure?: true,
         ?       sheetCount?: true,
         ?       slideCount?: true,
         ?       slidesData?: true,
         ?       pptxMetadata?: true,
         ?       slideGenerationStatus?: true,
         ?       slideGenerationError?: true,
         ?       createdAt?: true,
         ?       updatedAt?: true,
         ?       document?: true
               }
             }
           },
           orderBy: {
             createdAt: "desc"
           },
           skip: 0,
           take: 5
         })

Unknown field `hasOcr` for select statement on model `DocumentMetadata`. Available options are marked with ?.
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üí¨ Joined conversation: 85a028e0-024d-43c0-acd6-5d06c47f080d (1 clients in room)
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT 1
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
‚úÖ Cache hit for key: folder_tree:de2d5631c726c770981c5538fb10036d...
‚úÖ Cache hit for folder tree (includeAll: true)
prisma:error 
Invalid `prisma.document.findMany()` invocation in
C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:2061:21

  2058 }
  2059 
  2060 const [documents, total] = await Promise.all([
‚Üí 2061   prisma.document.findMany({
           where: {
             userId: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae",
             status: {
               not: "deleted"
             }
           },
           include: {
             folder: true,
             tags: {
               include: {
                 tag: true
               }
             },
             metadata: {
               select: {
                 documentId: true,
                 pageCount: true,
                 wordCount: true,
                 hasOcr: true,
                 ~~~~~~
                 ocrConfidence: true,
         ?       id?: true,
         ?       extractedText?: true,
         ?       characterCount?: true,
         ?       thumbnailUrl?: true,
         ?       entities?: true,
         ?       classification?: true,
         ?       summary?: true,
         ?       author?: true,
         ?       creationDate?: true,
         ?       modificationDate?: true,
         ?       language?: true,
         ?       topics?: true,
         ?       keyEntities?: true,
         ?       hasSignature?: true,
         ?       hasTables?: true,
         ?       hasImages?: true,
         ?       markdownContent?: true,
         ?       markdownUrl?: true,
         ?       markdownStructure?: true,
         ?       sheetCount?: true,
         ?       slideCount?: true,
         ?       slidesData?: true,
         ?       pptxMetadata?: true,
         ?       slideGenerationStatus?: true,
         ?       slideGenerationError?: true,
         ?       createdAt?: true,
         ?       updatedAt?: true,
         ?       document?: true
               }
             }
           },
           orderBy: {
             createdAt: "desc"
           },
           skip: 0,
           take: 5
         })

Unknown field `hasOcr` for select statement on model `DocumentMetadata`. Available options are marked with ?.
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:error 
Invalid `prisma.document.findMany()` invocation in
C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:2061:21

  2058 }
  2059 
  2060 const [documents, total] = await Promise.all([
‚Üí 2061   prisma.document.findMany({
           where: {
             userId: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae",
             status: {
               not: "deleted"
             }
           },
           include: {
             folder: true,
             tags: {
               include: {
                 tag: true
               }
             },
             metadata: {
               select: {
                 documentId: true,
                 pageCount: true,
                 wordCount: true,
                 hasOcr: true,
                 ~~~~~~
                 ocrConfidence: true,
         ?       id?: true,
         ?       extractedText?: true,
         ?       characterCount?: true,
         ?       thumbnailUrl?: true,
         ?       entities?: true,
         ?       classification?: true,
         ?       summary?: true,
         ?       author?: true,
         ?       creationDate?: true,
         ?       modificationDate?: true,
         ?       language?: true,
         ?       topics?: true,
         ?       keyEntities?: true,
         ?       hasSignature?: true,
         ?       hasTables?: true,
         ?       hasImages?: true,
         ?       markdownContent?: true,
         ?       markdownUrl?: true,
         ?       markdownStructure?: true,
         ?       sheetCount?: true,
         ?       slideCount?: true,
         ?       slidesData?: true,
         ?       pptxMetadata?: true,
         ?       slideGenerationStatus?: true,
         ?       slideGenerationError?: true,
         ?       createdAt?: true,
         ?       updatedAt?: true,
         ?       document?: true
               }
             }
           },
           orderBy: {
             createdAt: "desc"
           },
           skip: 0,
           take: 1000
         })

Unknown field `hasOcr` for select statement on model `DocumentMetadata`. Available options are marked with ?.
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìã Fetching conversations for user: c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìñ Fetching conversation: 85a028e0-024d-43c0-acd6-5d06c47f080d
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."conversations"."id", "public"."conversations"."userId", "public"."conversations"."title", "public"."conversations"."createdAt", "public"."conversations"."updatedAt", "public"."conversations"."contextType", "public"."conversations"."contextId", "public"."conversations"."contextName", "public"."conversations"."contextMeta" FROM "public"."conversations" WHERE ("public"."conversations"."id" = $1 AND "public"."conversations"."userId" = $2) LIMIT $3 OFFSET $4
üí¨ Left conversation: 85a028e0-024d-43c0-acd6-5d06c47f080d
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."firstName", "public"."users"."lastName", "public"."users"."profileImage", "public"."users"."isEmailVerified", "public"."users"."phoneNumber", "public"."users"."isPhoneVerified" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."conversations"."id", "public"."conversations"."userId", "public"."conversations"."title", "public"."conversations"."createdAt", "public"."conversations"."updatedAt", "public"."conversations"."contextType", "public"."conversations"."contextId", "public"."conversations"."contextName", "public"."conversations"."contextMeta", COALESCE("aggr_selection_0_Message"."_aggr_count_messages", 0) AS "_aggr_count_messages" FROM "public"."conversations" LEFT JOIN (SELECT "public"."messages"."conversationId", COUNT(*) AS "_aggr_count_messages" FROM "public"."messages" WHERE 1=1 GROUP BY "public"."messages"."conversationId") AS "aggr_selection_0_Message" ON ("public"."conversations"."id" = "aggr_selection_0_Message"."conversationId") WHERE "public"."conversations"."userId" = $1 ORDER BY "public"."conversations"."updatedAt" DESC OFFSET $2
prisma:query SELECT "public"."messages"."id", "public"."messages"."conversationId", "public"."messages"."role", "public"."messages"."content", "public"."messages"."metadata", "public"."messages"."createdAt", "public"."messages"."isDocument", "public"."messages"."documentTitle", "public"."messages"."documentFormat", "public"."messages"."markdownContent" FROM "public"."messages" WHERE "public"."messages"."conversationId" IN ($1) ORDER BY "public"."messages"."createdAt" ASC OFFSET $2
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."message_attachments"."id", "public"."message_attachments"."messageId", "public"."message_attachments"."conversationId", "public"."message_attachments"."userId", "public"."message_attachments"."attachmentType", "public"."message_attachments"."title", "public"."message_attachments"."content", "public"."message_attachments"."previewHtml", "public"."message_attachments"."previewCss", "public"."message_attachments"."sourceDocumentIds", "public"."message_attachments"."analysisType", "public"."message_attachments"."metadata", "public"."message_attachments"."editHistory", "public"."message_attachments"."editCount", "public"."message_attachments"."createdAt", "public"."message_attachments"."updatedAt" FROM "public"."message_attachments" WHERE "public"."message_attachments"."messageId" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:error 
Invalid `prisma.document.findMany()` invocation in
C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:2061:21

  2058 }
  2059 
  2060 const [documents, total] = await Promise.all([
‚Üí 2061   prisma.document.findMany({
           where: {
             userId: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae",
             status: {
               not: "deleted"
             }
           },
           include: {
             folder: true,
             tags: {
               include: {
                 tag: true
               }
             },
             metadata: {
               select: {
                 documentId: true,
                 pageCount: true,
                 wordCount: true,
                 hasOcr: true,
                 ~~~~~~
                 ocrConfidence: true,
         ?       id?: true,
         ?       extractedText?: true,
         ?       characterCount?: true,
         ?       thumbnailUrl?: true,
         ?       entities?: true,
         ?       classification?: true,
         ?       summary?: true,
         ?       author?: true,
         ?       creationDate?: true,
         ?       modificationDate?: true,
         ?       language?: true,
         ?       topics?: true,
         ?       keyEntities?: true,
         ?       hasSignature?: true,
         ?       hasTables?: true,
         ?       hasImages?: true,
         ?       markdownContent?: true,
         ?       markdownUrl?: true,
         ?       markdownStructure?: true,
         ?       sheetCount?: true,
         ?       slideCount?: true,
         ?       slidesData?: true,
         ?       pptxMetadata?: true,
         ?       slideGenerationStatus?: true,
         ?       slideGenerationError?: true,
         ?       createdAt?: true,
         ?       updatedAt?: true,
         ?       document?: true
               }
             }
           },
           orderBy: {
             createdAt: "desc"
           },
           skip: 0,
           take: 5
         })

Unknown field `hasOcr` for select statement on model `DocumentMetadata`. Available options are marked with ?.
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
‚úÖ Cache hit for key: folder_tree:de2d5631c726c770981c5538fb10036d...
‚úÖ Cache hit for folder tree (includeAll: true)
prisma:query SELECT "public"."two_factor_auth"."id", "public"."two_factor_auth"."isEnabled", "public"."two_factor_auth"."userId" FROM "public"."two_factor_auth" WHERE "public"."two_factor_auth"."userId" IN ($1) OFFSET $2
prisma:query SELECT "public"."chat_documents"."id", "public"."chat_documents"."messageId", "public"."chat_documents"."conversationId", "public"."chat_documents"."userId", "public"."chat_documents"."title", "public"."chat_documents"."markdownContent", "public"."chat_documents"."documentType", "public"."chat_documents"."sourceDocumentId", "public"."chat_documents"."pdfUrl", "public"."chat_documents"."docxUrl", "public"."chat_documents"."wordCount", "public"."chat_documents"."createdAt", "public"."chat_documents"."expiresAt" FROM "public"."chat_documents" WHERE "public"."chat_documents"."messageId" IN ($1,$2) OFFSET $3
‚úÖ Conversation found with 2 messages
prisma:query SELECT "public"."messages"."id", "public"."messages"."content", "public"."messages"."createdAt", "public"."messages"."conversationId" FROM "public"."messages" WHERE "public"."messages"."conversationId" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10) ORDER BY "public"."messages"."createdAt" DESC OFFSET $11
‚úÖ Found 10 conversations
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:error 
Invalid `prisma.document.findMany()` invocation in
C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:2061:21

  2058 }
  2059 
  2060 const [documents, total] = await Promise.all([
‚Üí 2061   prisma.document.findMany({
           where: {
             userId: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae",
             status: {
               not: "deleted"
             }
           },
           include: {
             folder: true,
             tags: {
               include: {
                 tag: true
               }
             },
             metadata: {
               select: {
                 documentId: true,
                 pageCount: true,
                 wordCount: true,
                 hasOcr: true,
                 ~~~~~~
                 ocrConfidence: true,
         ?       id?: true,
         ?       extractedText?: true,
         ?       characterCount?: true,
         ?       thumbnailUrl?: true,
         ?       entities?: true,
         ?       classification?: true,
         ?       summary?: true,
         ?       author?: true,
         ?       creationDate?: true,
         ?       modificationDate?: true,
         ?       language?: true,
         ?       topics?: true,
         ?       keyEntities?: true,
         ?       hasSignature?: true,
         ?       hasTables?: true,
         ?       hasImages?: true,
         ?       markdownContent?: true,
         ?       markdownUrl?: true,
         ?       markdownStructure?: true,
         ?       sheetCount?: true,
         ?       slideCount?: true,
         ?       slidesData?: true,
         ?       pptxMetadata?: true,
         ?       slideGenerationStatus?: true,
         ?       slideGenerationError?: true,
         ?       createdAt?: true,
         ?       updatedAt?: true,
         ?       document?: true
               }
             }
           },
           orderBy: {
             createdAt: "desc"
           },
           skip: 0,
           take: 1000
         })

Unknown field `hasOcr` for select statement on model `DocumentMetadata`. Available options are marked with ?.
üí¨ Joined conversation: 85a028e0-024d-43c0-acd6-5d06c47f080d (1 clients in room)
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìã Fetching conversations for user: c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìñ Fetching conversation: 85a028e0-024d-43c0-acd6-5d06c47f080d
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT "public"."conversations"."id", "public"."conversations"."userId", "public"."conversations"."title", "public"."conversations"."createdAt", "public"."conversations"."updatedAt", "public"."conversations"."contextType", "public"."conversations"."contextId", "public"."conversations"."contextName", "public"."conversations"."contextMeta", COALESCE("aggr_selection_0_Message"."_aggr_count_messages", 0) AS "_aggr_count_messages" FROM "public"."conversations" LEFT JOIN (SELECT "public"."messages"."conversationId", COUNT(*) AS "_aggr_count_messages" FROM "public"."messages" WHERE 1=1 GROUP BY "public"."messages"."conversationId") AS "aggr_selection_0_Message" ON ("public"."conversations"."id" = "aggr_selection_0_Message"."conversationId") WHERE "public"."conversations"."userId" = $1 ORDER BY "public"."conversations"."updatedAt" DESC OFFSET $2
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."conversations"."id", "public"."conversations"."userId", "public"."conversations"."title", "public"."conversations"."createdAt", "public"."conversations"."updatedAt", "public"."conversations"."contextType", "public"."conversations"."contextId", "public"."conversations"."contextName", "public"."conversations"."contextMeta" FROM "public"."conversations" WHERE ("public"."conversations"."id" = $1 AND "public"."conversations"."userId" = $2) LIMIT $3 OFFSET $4
prisma:query SELECT "public"."messages"."id", "public"."messages"."content", "public"."messages"."createdAt", "public"."messages"."conversationId" FROM "public"."messages" WHERE "public"."messages"."conversationId" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10) ORDER BY "public"."messages"."createdAt" DESC OFFSET $11
‚úÖ Found 10 conversations
prisma:query SELECT "public"."messages"."id", "public"."messages"."conversationId", "public"."messages"."role", "public"."messages"."content", "public"."messages"."metadata", "public"."messages"."createdAt", "public"."messages"."isDocument", "public"."messages"."documentTitle", "public"."messages"."documentFormat", "public"."messages"."markdownContent" FROM "public"."messages" WHERE "public"."messages"."conversationId" IN ($1) ORDER BY "public"."messages"."createdAt" ASC OFFSET $2
prisma:query SELECT "public"."message_attachments"."id", "public"."message_attachments"."messageId", "public"."message_attachments"."conversationId", "public"."message_attachments"."userId", "public"."message_attachments"."attachmentType", "public"."message_attachments"."title", "public"."message_attachments"."content", "public"."message_attachments"."previewHtml", "public"."message_attachments"."previewCss", "public"."message_attachments"."sourceDocumentIds", "public"."message_attachments"."analysisType", "public"."message_attachments"."metadata", "public"."message_attachments"."editHistory", "public"."message_attachments"."editCount", "public"."message_attachments"."createdAt", "public"."message_attachments"."updatedAt" FROM "public"."message_attachments" WHERE "public"."message_attachments"."messageId" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."firstName", "public"."users"."lastName", "public"."users"."profileImage", "public"."users"."isEmailVerified", "public"."users"."phoneNumber", "public"."users"."isPhoneVerified" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."chat_documents"."id", "public"."chat_documents"."messageId", "public"."chat_documents"."conversationId", "public"."chat_documents"."userId", "public"."chat_documents"."title", "public"."chat_documents"."markdownContent", "public"."chat_documents"."documentType", "public"."chat_documents"."sourceDocumentId", "public"."chat_documents"."pdfUrl", "public"."chat_documents"."docxUrl", "public"."chat_documents"."wordCount", "public"."chat_documents"."createdAt", "public"."chat_documents"."expiresAt" FROM "public"."chat_documents" WHERE "public"."chat_documents"."messageId" IN ($1,$2) OFFSET $3
‚úÖ Conversation found with 2 messages
prisma:query SELECT "public"."two_factor_auth"."id", "public"."two_factor_auth"."isEnabled", "public"."two_factor_auth"."userId" FROM "public"."two_factor_auth" WHERE "public"."two_factor_auth"."userId" IN ($1) OFFSET $2
üí¨ Left conversation: 85a028e0-024d-43c0-acd6-5d06c47f080d
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìä getFolderTree API called, includeAll=true, user=c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
‚úÖ Cache hit for key: folder_tree:de2d5631c726c770981c5538fb10036d...
‚úÖ Cache hit for folder tree (includeAll: true)
prisma:error 
Invalid `prisma.document.findMany()` invocation in
C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:2061:21

  2058 }
  2059 
  2060 const [documents, total] = await Promise.all([
‚Üí 2061   prisma.document.findMany({
           where: {
             userId: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae",
             status: {
               not: "deleted"
             }
           },
           include: {
             folder: true,
             tags: {
               include: {
                 tag: true
               }
             },
             metadata: {
               select: {
                 documentId: true,
                 pageCount: true,
                 wordCount: true,
                 hasOcr: true,
                 ~~~~~~
                 ocrConfidence: true,
         ?       id?: true,
         ?       extractedText?: true,
         ?       characterCount?: true,
         ?       thumbnailUrl?: true,
         ?       entities?: true,
         ?       classification?: true,
         ?       summary?: true,
         ?       author?: true,
         ?       creationDate?: true,
         ?       modificationDate?: true,
         ?       language?: true,
         ?       topics?: true,
         ?       keyEntities?: true,
         ?       hasSignature?: true,
         ?       hasTables?: true,
         ?       hasImages?: true,
         ?       markdownContent?: true,
         ?       markdownUrl?: true,
         ?       markdownStructure?: true,
         ?       sheetCount?: true,
         ?       slideCount?: true,
         ?       slidesData?: true,
         ?       pptxMetadata?: true,
         ?       slideGenerationStatus?: true,
         ?       slideGenerationError?: true,
         ?       createdAt?: true,
         ?       updatedAt?: true,
         ?       document?: true
               }
             }
           },
           orderBy: {
             createdAt: "desc"
           },
           skip: 0,
           take: 5
         })

Unknown field `hasOcr` for select statement on model `DocumentMetadata`. Available options are marked with ?.
prisma:error 
Invalid `prisma.document.findMany()` invocation in
C:\Users\Pedro\Desktop\webapp\backend\src\services\document.service.ts:2061:21

  2058 }
  2059 
  2060 const [documents, total] = await Promise.all([
‚Üí 2061   prisma.document.findMany({
           where: {
             userId: "c4f8906d-fbc7-4445-8de3-28dcdc5615ae",
             status: {
               not: "deleted"
             }
           },
           include: {
             folder: true,
             tags: {
               include: {
                 tag: true
               }
             },
             metadata: {
               select: {
                 documentId: true,
                 pageCount: true,
                 wordCount: true,
                 hasOcr: true,
                 ~~~~~~
                 ocrConfidence: true,
         ?       id?: true,
         ?       extractedText?: true,
         ?       characterCount?: true,
         ?       thumbnailUrl?: true,
         ?       entities?: true,
         ?       classification?: true,
         ?       summary?: true,
         ?       author?: true,
         ?       creationDate?: true,
         ?       modificationDate?: true,
         ?       language?: true,
         ?       topics?: true,
         ?       keyEntities?: true,
         ?       hasSignature?: true,
         ?       hasTables?: true,
         ?       hasImages?: true,
         ?       markdownContent?: true,
         ?       markdownUrl?: true,
         ?       markdownStructure?: true,
         ?       sheetCount?: true,
         ?       slideCount?: true,
         ?       slidesData?: true,
         ?       pptxMetadata?: true,
         ?       slideGenerationStatus?: true,
         ?       slideGenerationError?: true,
         ?       createdAt?: true,
         ?       updatedAt?: true,
         ?       document?: true
               }
             }
           },
           orderBy: {
             createdAt: "desc"
           },
           skip: 0,
           take: 1000
         })

Unknown field `hasOcr` for select statement on model `DocumentMetadata`. Available options are marked with ?.
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
prisma:query SELECT COUNT(*) AS "_count$_all" FROM (SELECT "public"."documents"."id" FROM "public"."documents" WHERE ("public"."documents"."userId" = $1 AND "public"."documents"."status" <> $2) OFFSET $3) AS "sub"
üí¨ Joined conversation: 85a028e0-024d-43c0-acd6-5d06c47f080d (1 clients in room)
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
üîç CORS Check - Origin: https://koda-frontend.ngrok.app, isNgrokDomain: true, allowed: true
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
üìñ Fetching conversation: 85a028e0-024d-43c0-acd6-5d06c47f080d
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."googleId" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."conversations"."id", "public"."conversations"."userId", "public"."conversations"."title", "public"."conversations"."createdAt", "public"."conversations"."updatedAt", "public"."conversations"."contextType", "public"."conversations"."contextId", "public"."conversations"."contextName", "public"."conversations"."contextMeta" FROM "public"."conversations" WHERE ("public"."conversations"."id" = $1 AND "public"."conversations"."userId" = $2) LIMIT $3 OFFSET $4
üìã Fetching conversations for user: c4f8906d-fbc7-4445-8de3-28dcdc5615ae
prisma:query SELECT "public"."users"."id", "public"."users"."email", "public"."users"."firstName", "public"."users"."lastName", "public"."users"."profileImage", "public"."users"."isEmailVerified", "public"."users"."phoneNumber", "public"."users"."isPhoneVerified" FROM "public"."users" WHERE ("public"."users"."id" = $1 AND 1=1) LIMIT $2 OFFSET $3
prisma:query SELECT "public"."messages"."id", "public"."messages"."conversationId", "public"."messages"."role", "public"."messages"."content", "public"."messages"."metadata", "public"."messages"."createdAt", "public"."messages"."isDocument", "public"."messages"."documentTitle", "public"."messages"."documentFormat", "public"."messages"."markdownContent" FROM "public"."messages" WHERE "public"."messages"."conversationId" IN ($1) ORDER BY "public"."messages"."createdAt" ASC OFFSET $2
prisma:query SELECT "public"."two_factor_auth"."id", "public"."two_factor_auth"."isEnabled", "public"."two_factor_auth"."userId" FROM "public"."two_factor_auth" WHERE "public"."two_factor_auth"."userId" IN ($1) OFFSET $2
prisma:query SELECT "public"."message_attachments"."id", "public"."message_attachments"."messageId", "public"."message_attachments"."conversationId", "public"."message_attachments"."userId", "public"."message_attachments"."attachmentType", "public"."message_attachments"."title", "public"."message_attachments"."content", "public"."message_attachments"."previewHtml", "public"."message_attachments"."previewCss", "public"."message_attachments"."sourceDocumentIds", "public"."message_attachments"."analysisType", "public"."message_attachments"."metadata", "public"."message_attachments"."editHistory", "public"."message_attachments"."editCount", "public"."message_attachments"."createdAt", "public"."message_attachments"."updatedAt" FROM "public"."message_attachments" WHERE "public"."message_attachments"."messageId" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."conversations"."id", "public"."conversations"."userId", "public"."conversations"."title", "public"."conversations"."createdAt", "public"."conversations"."updatedAt", "public"."conversations"."contextType", "public"."conversations"."contextId", "public"."conversations"."contextName", "public"."conversations"."contextMeta", COALESCE("aggr_selection_0_Message"."_aggr_count_messages", 0) AS "_aggr_count_messages" FROM "public"."conversations" LEFT JOIN (SELECT "public"."messages"."conversationId", COUNT(*) AS "_aggr_count_messages" FROM "public"."messages" WHERE 1=1 GROUP BY "public"."messages"."conversationId") AS "aggr_selection_0_Message" ON ("public"."conversations"."id" = "aggr_selection_0_Message"."conversationId") WHERE "public"."conversations"."userId" = $1 ORDER BY "public"."conversations"."updatedAt" DESC OFFSET $2
prisma:query SELECT "public"."chat_documents"."id", "public"."chat_documents"."messageId", "public"."chat_documents"."conversationId", "public"."chat_documents"."userId", "public"."chat_documents"."title", "public"."chat_documents"."markdownContent", "public"."chat_documents"."documentType", "public"."chat_documents"."sourceDocumentId", "public"."chat_documents"."pdfUrl", "public"."chat_documents"."docxUrl", "public"."chat_documents"."wordCount", "public"."chat_documents"."createdAt", "public"."chat_documents"."expiresAt" FROM "public"."chat_documents" WHERE "public"."chat_documents"."messageId" IN ($1,$2) OFFSET $3
‚úÖ Conversation found with 2 messages
prisma:query SELECT "public"."messages"."id", "public"."messages"."content", "public"."messages"."createdAt", "public"."messages"."conversationId" FROM "public"."messages" WHERE "public"."messages"."conversationId" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10) ORDER BY "public"."messages"."createdAt" DESC OFFSET $11
‚úÖ Found 10 conversations
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ Supabase Storage initialized
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
üöÄ Server is running on http://localhost:5000
üìù Environment: development
üîó Health check: http://localhost:5000/health
‚öôÔ∏è  Background workers initialized
üîå WebSocket server ready
‚ö†Ô∏è  HTTP mode - SSL/HTTPS not enabled (development only)
‚úÖ Reminder scheduler started (runs every hour)
üîÑ Starting background document processor (polling every 30s)
‚úÖ System roles initialized
‚úÖ Redis connected
‚úÖ Cache service connected to Redis
üîå Client connected: lGp9ufCGXa1SooZyAAAB (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
‚úÖ Supabase storage bucket already exists: user-files
üîå Client connected: 2dRhlNoS6cMpgaa2AAAD (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: üîë add access controls to secrets: https://dotenvx.com/ops
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ Supabase Storage initialized
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
üöÄ Server is running on http://localhost:5000
üìù Environment: development
üîó Health check: http://localhost:5000/health
‚öôÔ∏è  Background workers initialized
üîå WebSocket server ready
‚ö†Ô∏è  HTTP mode - SSL/HTTPS not enabled (development only)
‚úÖ Reminder scheduler started (runs every hour)
üîÑ Starting background document processor (polling every 30s)
‚úÖ System roles initialized
‚úÖ Cache service connected to Redis
‚úÖ Redis connected
‚úÖ Supabase storage bucket already exists: user-files
üîå Client connected: Zkl5YZDfewUfAV1pAAAB (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
üîå Client connected: rfWmxsr4R0hMqWhLAAAD (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ Supabase Storage initialized
[dotenv@17.2.3] injecting env (0) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops
[dotenv@17.2.3] injecting env (0) from .env -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
üöÄ Server is running on http://localhost:5000
üìù Environment: development
üîó Health check: http://localhost:5000/health
‚öôÔ∏è  Background workers initialized
üîå WebSocket server ready
‚ö†Ô∏è  HTTP mode - SSL/HTTPS not enabled (development only)
‚úÖ Reminder scheduler started (runs every hour)
üîÑ Starting background document processor (polling every 30s)
‚úÖ System roles initialized
‚úÖ Redis connected
‚úÖ Cache service connected to Redis
üîå Client connected: bxtUzf7fF3KxV-QMAAAB (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
‚úÖ Supabase storage bucket already exists: user-files
üîå Client connected: aOYrEsRJETmZ4LfKAAAD (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ Supabase Storage initialized
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
üöÄ Server is running on http://localhost:5000
üìù Environment: development
üîó Health check: http://localhost:5000/health
‚öôÔ∏è  Background workers initialized
üîå WebSocket server ready
‚ö†Ô∏è  HTTP mode - SSL/HTTPS not enabled (development only)
‚úÖ Reminder scheduler started (runs every hour)
üîÑ Starting background document processor (polling every 30s)
‚úÖ System roles initialized
‚úÖ Redis connected
‚úÖ Cache service connected to Redis
‚úÖ Supabase storage bucket already exists: user-files
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
üîå Client connected: VPtRlSaSJX31H5MaAAAB (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
üîå Client connected: s3DEBotxaAKm2lLXAAAD (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ Supabase Storage initialized
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
üöÄ Server is running on http://localhost:5000
üìù Environment: development
üîó Health check: http://localhost:5000/health
‚öôÔ∏è  Background workers initialized
üîå WebSocket server ready
‚ö†Ô∏è  HTTP mode - SSL/HTTPS not enabled (development only)
‚úÖ Reminder scheduler started (runs every hour)
üîÑ Starting background document processor (polling every 30s)
‚úÖ System roles initialized
‚úÖ Cache service connected to Redis
‚úÖ Redis connected
‚úÖ Supabase storage bucket already exists: user-files
üîå Client connected: LHNh4Gq8VZGrtWSIAAAC (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
üîå Client connected: qh8tClMly-ZWYzocAAAD (User: c4f8906d-fbc7-4445-8de3-28dcdc5615ae)
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3

> backend@1.0.0 dev
> nodemon --exec ts-node --transpile-only src/server.ts

[33m[nodemon] 3.1.10[39m
[33m[nodemon] to restart at any time, enter `rs`[39m
[33m[nodemon] watching path(s): *.*[39m
[33m[nodemon] watching extensions: ts,json[39m
[32m[nodemon] starting `ts-node --transpile-only src/server.ts`[39m
[dotenv@17.2.3] injecting env (42) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops
üîó Connecting to Redis using REDIS_HOST/PORT...
‚úÖ Supabase Storage initialized
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }
‚úÖ Twilio SMS service initialized
‚ö†Ô∏è  Sentry: DSN not configured, error monitoring disabled
   Set SENTRY_DSN environment variable to enable Sentry
üîß [Pinecone] Constructor: indexName set to "koda-gemini"
‚úÖ [Pinecone] Initialized successfully with index: "koda-gemini"
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Running in development mode - SSL/HTTPS disabled
‚ö†Ô∏è  Creating HTTP server (not secure for production!)
Error: listen EADDRINUSE: address already in use :::5000
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at Server.listen (node:net:2102:7)
    at Object.<anonymous> (C:\Users\Pedro\Desktop\webapp\backend\src\server.ts:250:12)
    at Module._compile (node:internal/modules/cjs/loader:1706:14)
    at Module.m._compile (C:\Users\Pedro\Desktop\webapp\backend\node_modules\ts-node\src\index.ts:1618:23)
    at node:internal/modules/cjs/loader:1839:10
    at Object.require.extensions.<computed> [as .ts] (C:\Users\Pedro\Desktop\webapp\backend\node_modules\ts-node\src\index.ts:1621:12)
    at Module.load (node:internal/modules/cjs/loader:1441:32)
    at Function._load (node:internal/modules/cjs/loader:1263:12)
    at TracingChannel.traceSync (node:diagnostics_channel:322:14)
    at wrapModuleLoad (node:internal/modules/cjs/loader:237:24)
    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:171:5)
    at phase4 (C:\Users\Pedro\Desktop\webapp\backend\node_modules\ts-node\src\bin.ts:649:14)
    at bootstrap (C:\Users\Pedro\Desktop\webapp\backend\node_modules\ts-node\src\bin.ts:95:10)
    at main (C:\Users\Pedro\Desktop\webapp\backend\node_modules\ts-node\src\bin.ts:55:10) {
  code: 'EADDRINUSE',
  errno: -4091,
  syscall: 'listen',
  address: '::',
  port: 5000
}
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
prisma:query SELECT 1
prisma:query SELECT "public"."documents"."id", "public"."documents"."userId", "public"."documents"."folderId", "public"."documents"."filename", "public"."documents"."encryptedFilename", "public"."documents"."fileSize", "public"."documents"."mimeType", "public"."documents"."fileHash", "public"."documents"."status", "public"."documents"."parentVersionId", "public"."documents"."isEncrypted", "public"."documents"."encryptionIV", "public"."documents"."encryptionAuthTag", "public"."documents"."renderableContent", "public"."documents"."createdAt", "public"."documents"."updatedAt" FROM "public"."documents" WHERE "public"."documents"."status" = $1 ORDER BY "public"."documents"."createdAt" ASC LIMIT $2 OFFSET $3
